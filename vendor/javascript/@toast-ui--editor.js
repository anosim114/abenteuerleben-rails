import{Fragment as e,Schema as t,Slice as r,NodeRange as n,Mark as a,DOMParser as o,Node as i}from"prosemirror-model";import{DecorationSet as s,Decoration as l,EditorView as u}from"prosemirror-view";import{ReplaceAroundStep as d,canSplit as v,liftTarget as p,StepMap as f}from"prosemirror-transform";import{TextSelection as m,Plugin as g,PluginKey as y,EditorState as b,AllSelection as w,Selection as T,SelectionRange as C,NodeSelection as k}from"prosemirror-state";import{keymap as x}from"prosemirror-keymap";import{deleteSelection as M,selectAll as E,baseKeymap as L,chainCommands as N,joinForward as I,newlineInCode as S,setBlockType as O,wrapIn as A,toggleMark as P,exitCode as D}from"prosemirror-commands";import{InputRule as B,inputRules as R,undoInputRule as H}from"prosemirror-inputrules";import{undo as _,redo as $,history as F,undoDepth as j}from"prosemirror-history";
/**
 * @toast-ui/editor
 * @version 3.2.2 | Fri Feb 17 2023
 * @author NHN Cloud FE Development Lab <dl_javascript@nhn.com>
 * @license MIT
 */var extendStatics$1=function(e,t){extendStatics$1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])};return extendStatics$1(e,t)};function __extends$1(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");extendStatics$1(e,t);function __(){this.constructor=e}e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}var __assign$1=function(){__assign$1=Object.assign||function __assign(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e};return __assign$1.apply(this,arguments)};function __spreadArray$1(e,t,r){if(r||2===arguments.length)for(var n,a=0,o=t.length;a<o;a++)if(n||!(a in t)){n||(n=Array.prototype.slice.call(t,0,a));n[a]=t[a]}return e.concat(n||Array.prototype.slice.call(t))}function __makeTemplateObject(e,t){Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t;return e}
/**
 * Execute the provided callback once for each property of object which actually exist.
 * If the callback function returns false, the loop will be stopped.
 * Callback function(iteratee) is invoked with three arguments:
 *  1) The value of the property
 *  2) The name of the property
 *  3) The object being traversed
 * @param {Object} obj The object that will be traversed
 * @param {function} iteratee  Callback function
 * @param {Object} [context] Context(this) of callback function
 * @memberof module:collection
 * @example
 * // ES6
 * import forEachOwnProperties from 'tui-code-snippet/collection/forEachOwnProperties';
 * 
 * // CommonJS
 * const forEachOwnProperties = require('tui-code-snippet/collection/forEachOwnProperties'); 
 *
 * let sum = 0;
 *
 * forEachOwnProperties({a:1,b:2,c:3}, function(value){
 *   sum += value;
 * });
 * alert(sum); // 6
 */function forEachOwnProperties$2(e,t,r){var n;r=r||null;for(n in e)if(e.hasOwnProperty(n)&&false===t.call(r,e[n],n,e))break}var U=forEachOwnProperties$2;
/**
 * Extend the target object from other objects.
 * @param {object} target - Object that will be extended
 * @param {...object} objects - Objects as sources
 * @returns {object} Extended object
 * @memberof module:object
 */function extend(e,t){var r=Object.prototype.hasOwnProperty;var n,a,o,i;for(o=1,i=arguments.length;o<i;o+=1){n=arguments[o];for(a in n)r.call(n,a)&&(e[a]=n[a])}return e}var W=extend;
/**
 * Check whether the given variable is a string or not.
 * If the given variable is a string, return true.
 * @param {*} obj - Target for checking
 * @returns {boolean} Is string?
 * @memberof module:type
 */function isString$3(e){return"string"===typeof e||e instanceof String}var q=isString$3;
/**
 * Check whether the given variable is an instance of Array or not.
 * If the given variable is an instance of Array, return true.
 * @param {*} obj - Target for checking
 * @returns {boolean} Is array instance?
 * @memberof module:type
 */function isArray$3(e){return e instanceof Array}var z=isArray$3;
/**
 * Execute the provided callback once for each element present
 * in the array(or Array-like object) in ascending order.
 * If the callback function returns false, the loop will be stopped.
 * Callback function(iteratee) is invoked with three arguments:
 *  1) The value of the element
 *  2) The index of the element
 *  3) The array(or Array-like object) being traversed
 * @param {Array|Arguments|NodeList} arr The array(or Array-like object) that will be traversed
 * @param {function} iteratee Callback function
 * @param {Object} [context] Context(this) of callback function
 * @memberof module:collection
 * @example
 * // ES6
 * import forEachArray from 'tui-code-snippet/collection/forEachArray';
 * 
 * // CommonJS
 * const forEachArray = require('tui-code-snippet/collection/forEachArray'); 
 *
 * let sum = 0;
 *
 * forEachArray([1,2,3], function(value){
 *   sum += value;
 * });
 * alert(sum); // 6
 */function forEachArray$3(e,t,r){var n=0;var a=e.length;r=r||null;for(;n<a;n+=1)if(false===t.call(r,e[n],n,e))break}var V=forEachArray$3;var G=z;var Q=V;var X=U;
/**
 * Execute the provided callback once for each property of object(or element of array) which actually exist.
 * If the object is Array-like object(ex-arguments object), It needs to transform to Array.(see 'ex2' of example).
 * If the callback function returns false, the loop will be stopped.
 * Callback function(iteratee) is invoked with three arguments:
 *  1) The value of the property(or The value of the element)
 *  2) The name of the property(or The index of the element)
 *  3) The object being traversed
 * @param {Object} obj The object that will be traversed
 * @param {function} iteratee Callback function
 * @param {Object} [context] Context(this) of callback function
 * @memberof module:collection
 * @example
 * // ES6
 * import forEach from 'tui-code-snippet/collection/forEach'; 
 * 
 * // CommonJS
 * const forEach = require('tui-code-snippet/collection/forEach'); 
 *
 * let sum = 0;
 *
 * forEach([1,2,3], function(value){
 *   sum += value;
 * });
 * alert(sum); // 6
 *
 * // In case of Array-like object
 * const array = Array.prototype.slice.call(arrayLike); // change to array
 * forEach(array, function(value){
 *   sum += value;
 * });
 */function forEach$4(e,t,r){G(e)?Q(e,t,r):X(e,t,r)}var Z=forEach$4;var K=q;var Y=Z;
/**
 * Setting element style
 * @param {(HTMLElement|SVGElement)} element - element to setting style
 * @param {(string|object)} key - style prop name or {prop: value} pair object
 * @param {string} [value] - style value
 * @memberof module:domUtil
 */function css(e,t,r){var n=e.style;K(t)?n[t]=r:Y(t,(function(e,t){n[t]=e}))}var J=css;var ee=z;
/**
 * Returns the first index at which a given element can be found in the array
 * from start index(default 0), or -1 if it is not present.
 * It compares searchElement to elements of the Array using strict equality
 * (the same method used by the ===, or triple-equals, operator).
 * @param {*} searchElement Element to locate in the array
 * @param {Array} array Array that will be traversed.
 * @param {number} startIndex Start index in array for searching (default 0)
 * @returns {number} the First index at which a given element, or -1 if it is not present
 * @memberof module:array
 * @example
 * // ES6
 * import inArray from 'tui-code-snippet/array/inArray';
 * 
 * // CommonJS
 * const inArray = require('tui-code-snippet/array/inArray');
 *
 * const arr = ['one', 'two', 'three', 'four'];
 * const idx1 = inArray('one', arr, 3); // -1
 * const idx2 = inArray('one', arr); // 0
 */function inArray$4(e,t,r){var n;var a;r=r||0;if(!ee(t))return-1;if(Array.prototype.indexOf)return Array.prototype.indexOf.call(t,e,r);a=t.length;for(n=r;r>=0&&n<a;n+=1)if(t[n]===e)return n;return-1}var te=inArray$4;
/**
 * Check whether the given variable is undefined or not.
 * If the given variable is undefined, returns true.
 * @param {*} obj - Target for checking
 * @returns {boolean} Is undefined?
 * @memberof module:type
 */function isUndefined$4(e){return void 0===e}var re=isUndefined$4;var ne=re;
/**
 * Get HTML element's design classes.
 * @param {(HTMLElement|SVGElement)} element target element
 * @returns {string} element css class name
 * @memberof module:domUtil
 */function getClass$3(e){return e&&e.className?ne(e.className.baseVal)?e.className:e.className.baseVal:""}var ae=getClass$3;var oe=z;var ie=re;
/**
 * Set className value
 * @param {(HTMLElement|SVGElement)} element - target element
 * @param {(string|string[])} cssClass - class names
 * @private
 */function setClassName$2(e,t){t=oe(t)?t.join(" "):t;t=t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");ie(e.className.baseVal)?e.className=t:e.className.baseVal=t}var se=setClassName$2;var le=Z;var ue=te;var ce=ae;var de=se;
/**
 * Add css class to element
 * @param {(HTMLElement|SVGElement)} element - target element
 * @param {...string} cssClass - css classes to add
 * @memberof module:domUtil
 */function addClass(e){var t=Array.prototype.slice.call(arguments,1);var r=e.classList;var n=[];var a;if(r)le(t,(function(t){e.classList.add(t)}));else{a=ce(e);a&&(t=[].concat(a.split(/\s+/),t));le(t,(function(e){ue(e,n)<0&&n.push(e)}));de(e,n)}}var ve=addClass;var pe=V;var fe=te;var he=ae;var me=se;
/**
 * Remove css class from element
 * @param {(HTMLElement|SVGElement)} element - target element
 * @param {...string} cssClass - css classes to remove
 * @memberof module:domUtil
 */function removeClass(e){var t=Array.prototype.slice.call(arguments,1);var r=e.classList;var n,a;if(r)pe(t,(function(e){r.remove(e)}));else{n=he(e).split(/\s+/);a=[];pe(n,(function(e){fe(e,t)<0&&a.push(e)}));me(e,a)}}var ge=removeClass;
/**
 * Check whether the given variable is a number or not.
 * If the given variable is a number, return true.
 * @param {*} obj - Target for checking
 * @returns {boolean} Is number?
 * @memberof module:type
 */function isNumber(e){return"number"===typeof e||e instanceof Number}var ye=isNumber;
/**
 * Check whether the given variable is null or not.
 * If the given variable(arguments[0]) is null, returns true.
 * @param {*} obj - Target for checking
 * @returns {boolean} Is null?
 * @memberof module:type
 */function isNull$1(e){return null===e}var be=isNull$1;var we=U;
/**
 * Request image ping.
 * @param {String} url url for ping request
 * @param {Object} trackingInfo infos for make query string
 * @returns {HTMLElement}
 * @memberof module:request
 * @example
 * // ES6
 * import imagePing from 'tui-code-snippet/request/imagePing';
 * 
 * // CommonJS
 * const imagePing = require('tui-code-snippet/request/imagePing');
 *
 * imagePing('https://www.google-analytics.com/collect', {
 *   v: 1,
 *   t: 'event',
 *   tid: 'trackingid',
 *   cid: 'cid',
 *   dp: 'dp',
 *   dh: 'dh'
 * });
 */function imagePing$1(e,t){var r=document.createElement("img");var n="";we(t,(function(e,t){n+="&"+t+"="+e}));n=n.substring(1);r.src=e+"?"+n;r.style.display="none";document.body.appendChild(r);document.body.removeChild(r);return r}var Te=imagePing$1;var Ce=re;var ke=Te;var xe=6048e5;
/**
 * Check if the date has passed 7 days
 * @param {number} date - milliseconds
 * @returns {boolean}
 * @private
 */function isExpired(e){var t=(new Date).getTime();return t-e>xe}
/**
 * Send hostname on DOMContentLoaded.
 * To prevent hostname set tui.usageStatistics to false.
 * @param {string} appName - application name
 * @param {string} trackingId - GA tracking ID
 * @ignore
 */function sendHostname(e,t){var r="https://www.google-analytics.com/collect";var n=location.hostname;var a="event";var o="use";var i="TOAST UI "+e+" for "+n+": Statistics";var s=window.localStorage.getItem(i);if((Ce(window.tui)||false!==window.tui.usageStatistics)&&(!s||isExpired(s))){window.localStorage.setItem(i,(new Date).getTime());setTimeout((function(){"interactive"!==document.readyState&&"complete"!==document.readyState||ke(r,{v:1,t:a,tid:t,cid:n,dp:n,dh:e,el:e,ec:o})}),1e3)}}var Me=sendHostname;/Mac/.test(navigator.platform);var Ee=/[\u0020]+/g;var Le=/[>(){}[\]+-.!#|]/g;var Ne=/<([a-zA-Z_][a-zA-Z0-9\-._]*)(\s|[^\\>])*\/?>|<(\/)([a-zA-Z_][a-zA-Z0-9\-._]*)\s*\/?>|<!--[^-]+-->|<([a-zA-Z_][a-zA-Z0-9\-.:/]*)>/g;var Ie=/\\[!"#$%&'()*+,-./:;<=>?@[\]^_`{|}~\\]/g;var Se=/[*_~`]/g;var Oe=/!\[.*\]\(.*\)/g;var Ae=/[[\]]/g;var Pe=/(?:^|[^\\])\\(?!\\)/g;var De='[&<>"]';var Be=new RegExp(De,"g");function replaceUnsafeChar$1(e){switch(e){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";default:return e}}function escapeXml$1(e){return Be.test(e)?e.replace(Be,replaceUnsafeChar$1):e}function sendHostName(){Me("editor","UA-129966929-1")}function includes(e,t){return-1!==e.indexOf(t)}var Re=["rel","target","hreflang","type"];var He={codeblock:/(^ {4}[^\n]+\n*)+/,thematicBreak:/^ *((\* *){3,}|(- *){3,} *|(_ *){3,}) */,atxHeading:/^(#{1,6}) +[\s\S]+/,seTextheading:/^([^\n]+)\n *(=|-){2,} */,blockquote:/^( *>[^\n]+.*)+/,list:/^ *(\*+|-+|\d+\.) [\s\S]+/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? */,link:/!?\[.*\]\(.*\)/,reflink:/!?\[.*\]\s*\[([^\]]*)\]/,verticalBar:/\u007C/,fencedCodeblock:/^((`|~){3,})/};function sanitizeLinkAttribute(e){if(!e)return null;var t={};Re.forEach((function(r){re(e[r])||(t[r]=e[r])}));return t}function repeat$1(e,t){var r="";for(var n=0;n<t;n+=1)r+=e;return r}function isNeedEscapeText(e){var t=false;U(He,(function(r){r.test(e)&&(t=true);return!t}));return t}function escapeTextForLink(e){var t=[];var r=Oe.exec(e);while(r){t.push([r.index,r.index+r[0].length]);r=Oe.exec(e)}return e.replace(Ae,(function(e,r){var n=t.some((function(e){return r>e[0]&&r<e[1]}));return n?e:"\\"+e}))}function escape$1(e){var aheadReplacer=function(e){return"\\"+e};var behindReplacer=function(e){return e+"\\"};var t=e.replace(Ee," ");Ie.test(t)&&(t=t.replace(Ie,aheadReplacer));Pe.test(t)&&(t=t.replace(Pe,behindReplacer));t=t.replace(Se,aheadReplacer);Ne.test(t)&&(t=t.replace(Ne,aheadReplacer));isNeedEscapeText(t)&&(t=t.replace(Le,aheadReplacer));return t}function quote(e){var t;t=-1===e.indexOf('"')?'""':-1===e.indexOf("'")?"''":"()";return t[0]+e+t[1]}function isNil(e){return be(e)||re(e)}function shallowEqual(e,t){if(null===e&&e===t)return true;if("object"!==typeof e||"object"!==typeof t||isNil(e)||isNil(t))return e===t;for(var r in e)if(e[r]!==t[r])return false;for(var r in t)if(!(r in e))return false;return true}function last$1(e){return e[e.length-1]}function between$1(e,t,r){return e>=t&&e<=r}function isObject$1(e){return"object"===typeof e&&null!==e}function deepMergedCopy(e,t){var r=__assign$1({},e);e&&t&&Object.keys(t).forEach((function(e){isObject$1(r[e])?Array.isArray(t[e])?r[e]=deepCopyArray(t[e]):r.hasOwnProperty(e)?r[e]=deepMergedCopy(r[e],t[e]):r[e]=deepCopy(t[e]):r[e]=t[e]}));return r}function deepCopyArray(e){return e.map((function(e){return isObject$1(e)?Array.isArray(e)?deepCopyArray(e):deepCopy(e):e}))}function deepCopy(e){var t=Object.keys(e);return t.length?t.reduce((function(t,r){isObject$1(e[r])?t[r]=Array.isArray(e[r])?deepCopyArray(e[r]):deepCopy(e[r]):t[r]=e[r];return t}),{}):e}function assign(e,t){void 0===t&&(t={});Object.keys(t).forEach((function(r){e.hasOwnProperty(r)&&"object"===typeof e[r]?Array.isArray(t[r])?e[r]=t[r]:assign(e[r],t[r]):e[r]=t[r]}));return e}function getSortedNumPair(e,t){return e>t?[t,e]:[e,t]}var _e=V;
/**
 * Transform the Array-like object to Array.
 * In low IE (below 8), Array.prototype.slice.call is not perfect. So, try-catch statement is used.
 * @param {*} arrayLike Array-like object
 * @returns {Array} Array
 * @memberof module:collection
 * @example
 * // ES6
 * import toArray from 'tui-code-snippet/collection/toArray'; 
 * 
 * // CommonJS
 * const toArray = require('tui-code-snippet/collection/toArray'); 
 *
 * const arrayLike = {
 *   0: 'one',
 *   1: 'two',
 *   2: 'three',
 *   3: 'four',
 *   length: 4
 * };
 * const result = toArray(arrayLike);
 *
 * alert(result instanceof Array); // true
 * alert(result); // one,two,three,four
 */function toArray$1(e){var t;try{t=Array.prototype.slice.call(e)}catch(r){t=[];_e(e,(function(e){t.push(e)}))}return t}var $e=toArray$1;function createParagraph(e,t){var r=e.nodes.paragraph;return t?r.create(null,q(t)?e.text(t):t):r.createAndFill()}function createTextNode$1(e,t,r){return e.text(t,r)}function createTextSelection(e,t,r){void 0===r&&(r=t);var n=e.doc.content.size;var a=n>0?n-1:1;return m.create(e.doc,Math.min(t,a),Math.min(r,a))}function addParagraph(e,t,r){var n=t.pos;e.replaceWith(n,n,createParagraph(r));return e.setSelection(createTextSelection(e,n+1))}function replaceTextNode(t){var r=t.state,n=t.from,a=t.startIndex,o=t.endIndex,i=t.createText;var s=r.tr,l=r.doc,u=r.schema;for(var d=a;d<=o;d+=1){var v=l.child(d),p=v.nodeSize,f=v.textContent,m=v.content;var g=i(f);var y=g?createTextNode$1(u,g):e.empty;var b=s.mapping.map(n);var w=b+m.size;s.replaceWith(b,w,y);n+=p}return s}function splitAndExtendBlock(e,t,r,n){var a=r.length;e.split(t).delete(t-a,t).insert(e.mapping.map(t),n).setSelection(createTextSelection(e,e.mapping.map(t)-a))}function getMdStartLine(e){return e.sourcepos[0][0]}function getMdEndLine(e){return e.sourcepos[1][0]}function getMdStartCh(e){return e.sourcepos[0][1]}function getMdEndCh(e){return e.sourcepos[1][1]}function isHTMLNode(e){var t=e.type;return"htmlBlock"===t||"htmlInline"===t}function isStyledInlineNode(e){var t=e.type;return"strike"===t||"strong"===t||"emph"===t||"code"===t||"link"===t||"image"===t}function isCodeBlockNode(e){return e&&"codeBlock"===e.type}function isListNode$1(e){return e&&("item"===e.type||"list"===e.type)}function isOrderedListNode(e){return isListNode$1(e)&&"ordered"===e.listData.type}function isBulletListNode(e){return isListNode$1(e)&&"ordered"!==e.listData.type}function isTableCellNode(e){return e&&("tableCell"===e.type||"tableDelimCell"===e.type)}function isInlineNode$1(e){switch(e.type){case"code":case"text":case"emph":case"strong":case"strike":case"link":case"image":case"htmlInline":case"linebreak":case"softbreak":case"customInline":return true;default:return false}}function findClosestNode(e,t,r){void 0===r&&(r=true);e=r?e:e.parent;while(e&&"document"!==e.type){if(t(e))return e;e=e.parent}return null}function traverseParentNodes(e,t,r){void 0===r&&(r=true);e=r?e:e.parent;while(e&&"document"!==e.type){t(e);e=e.parent}}function addOffsetPos(e,t){return[e[0],e[1]+t]}function setOffsetPos(e,t){return[e[0],t]}function getInlineMarkdownText(e){var t=e.firstChild.literal;switch(e.type){case"emph":return"*"+t+"*";case"strong":return"**"+t+"**";case"strike":return"~~"+t+"~~";case"code":return"`"+t+"`";case"link":case"image":var r=e,n=r.destination,a=r.title;var o="link"===e.type?"":"!";return o+"["+t+"]("+n+(a?' "'+a+'"':"")+")";default:return null}}function isContainer$2(e){switch(e.type){case"document":case"blockQuote":case"list":case"item":case"paragraph":case"heading":case"emph":case"strong":case"strike":case"link":case"image":case"table":case"tableHead":case"tableBody":case"tableRow":case"tableCell":case"tableDelimRow":case"customInline":return true;default:return false}}function getChildrenText$1(e){var t=[];var r=e.walker();var n=null;while(n=r.next()){var a=n.node;"text"===a.type&&t.push(a.literal)}return t.join("")}var Fe=[];var je={};var Ue=/\$\$widget\d+\s/;function unwrapWidgetSyntax(e){var t=e.search(Ue);if(-1!==t){var r=e.substring(t);var n=r.replace(Ue,"").replace("$$","");e=e.substring(0,t);e+=unwrapWidgetSyntax(n)}return e}function createWidgetContent(e,t){return"$$"+e+" "+t+"$$"}function widgetToDOM(e,t){var r=je[e],n=r.rule,a=r.toDOM;var o=unwrapWidgetSyntax(t).match(n);o&&(t=o[0]);return a(t)}function getWidgetRules(){return Fe}function setWidgetRules(e){Fe=e;Fe.forEach((function(e,t){je["widget"+t]=e}))}function mergeNodes(e,t,r,n){return e.concat(createNodesWithWidget(t,r,n))}function createNodesWithWidget(e,t,r){void 0===r&&(r=0);var n=[];var a=(Fe[r]||{}).rule;var o=r+1;e=unwrapWidgetSyntax(e);if(a&&a.test(e)){var i=void 0;while(-1!==(i=e.search(a))){var s=e.substring(0,i);s&&(n=mergeNodes(n,s,t,o));e=e.substring(i);var l=e.match(a)[0];var u="widget"+r;n.push(t.nodes.widget.create({info:u},t.text(createWidgetContent(u,l))));e=e.substring(l.length)}e&&(n=mergeNodes(n,e,t,o))}else e&&(n=r<Fe.length-1?mergeNodes(n,e,t,o):[t.text(e)]);return n}function getWidgetContent(e){var t;var r="";var n=e.walker();while(t=n.next()){var a=t.node,o=t.entering;if(o)if(a!==e&&"text"!==a.type){r+=getInlineMarkdownText(a);n.resumeAt(e,false);n.next()}else"text"===a.type&&(r+=a.literal)}return r}function getDefaultCommands(){return{deleteSelection:function(){return M},selectAll:function(){return E},undo:function(){return _},redo:function(){return $}}}function placeholder(e){return new g({props:{decorations:function(t){var r=t.doc;if(e.text&&1===r.childCount&&r.firstChild.isTextblock&&0===r.firstChild.content.size){var n=document.createElement("span");ve(n,"placeholder");e.className&&ve(n,e.className);n.textContent=e.text;return s.create(r,[l.widget(1,n)])}return null}}})}var We=te;var qe=ae;
/**
 * Check element has specific css class
 * @param {(HTMLElement|SVGElement)} element - target element
 * @param {string} cssClass - css class
 * @returns {boolean}
 * @memberof module:domUtil
 */function hasClass(e,t){var r;if(e.classList)return e.classList.contains(t);r=qe(e).split(/\s+/);return We(t,r)>-1}var ze=hasClass;var Ve=te;var Ge=$e;var Qe=Element.prototype;var Xe=Qe.matches||Qe.webkitMatchesSelector||Qe.mozMatchesSelector||Qe.msMatchesSelector||function(e){var t=this.document||this.ownerDocument;return Ve(this,Ge(t.querySelectorAll(e)))>-1};
/**
 * Check element match selector
 * @param {HTMLElement} element - element to check
 * @param {string} selector - selector to check
 * @returns {boolean} is selector matched to element?
 * @memberof module:domUtil
 */function matches(e,t){return Xe.call(e,t)}var Ze=matches;var Ke="[A-Za-z][A-Za-z0-9-]*";var Ye="[a-zA-Z_:][a-zA-Z0-9:._-]*";var Je="[^\"'=<>`\\x00-\\x20]+";var et="'[^']*'";var tt='"[^"]*"';var rt="(?:"+Je+"|"+et+"|"+tt+")";var nt="(?:\\s*=\\s*"+rt+")";var at="(?:\\s+"+Ye+nt+"?)";var ot="<("+Ke+")("+at+")*\\s*/?>";var it="</("+Ke+")\\s*[>]";var st="(?:"+ot+"|"+it+")";var lt=new RegExp("^"+st,"i");var ut=/<br\s*\/*>/i;var ct=/<! ---->|<!--(?:-?[^>-])(?:-?[^-])*-->/;var dt="</p><p>";function isPositionInBox(e,t,r){var n=parseInt(e.left,10);var a=parseInt(e.top,10);var o=parseInt(e.width,10)+parseInt(e.paddingLeft,10)+parseInt(e.paddingRight,10);var i=parseInt(e.height,10)+parseInt(e.paddingTop,10)+parseInt(e.paddingBottom,10);return t>=n&&t<=n+o&&r>=a&&r<=a+i}var vt="toastui-editor-";function cls(){var e=[];for(var t=0;t<arguments.length;t++)e[t]=arguments[t];var r=[];for(var n=0,a=e;n<a.length;n++){var o=a[n];var i=void 0;i=Array.isArray(o)?o[0]?o[1]:null:o;i&&r.push(""+vt+i)}return r.join(" ")}function clsWithMdPrefix(){var e=[];for(var t=0;t<arguments.length;t++)e[t]=arguments[t];return e.map((function(e){return vt+"md-"+e})).join(" ")}function isTextNode(e){return(null===e||void 0===e?void 0:e.nodeType)===Node.TEXT_NODE}function isElemNode(e){return e&&e.nodeType===Node.ELEMENT_NODE}function findNodes(e,t){var r=$e(e.querySelectorAll(t));return r.length?r:[]}function appendNodes(e,t){t=z(t)?$e(t):[t];t.forEach((function(t){e.appendChild(t)}))}function insertBeforeNode(e,t){t.parentNode&&t.parentNode.insertBefore(e,t)}function removeNode$1(e){e.parentNode&&e.parentNode.removeChild(e)}function unwrapNode(e){var t=[];while(e.firstChild){t.push(e.firstChild);e.parentNode&&e.parentNode.insertBefore(e.firstChild,e)}removeNode$1(e);return t}function toggleClass(e,t,r){re(r)&&(r=!ze(e,t));var n=r?ve:ge;n(e,t)}function createElementWith(e,t){var r=document.createElement("div");q(e)?r.innerHTML=e:r.appendChild(e);var n=r.firstChild;t&&t.appendChild(n);return n}function getOuterWidth(e){var t=window.getComputedStyle(e);return["margin-left","margin-right"].reduce((function(e,r){return e+parseInt(t.getPropertyValue(r),10)}),0)+e.offsetWidth}function closest(e,t){var r;r=q(t)?function(e){return Ze(e,t)}:function(e){return e===t};while(e&&e!==document){if(isElemNode(e)&&r(e))return e;e=e.parentNode}return null}function getTotalOffset(e,t){var r=0;var n=0;while(e&&e!==t){var a=e.offsetTop,o=e.offsetLeft,i=e.offsetParent;r+=a;n+=o;if(i===t.offsetParent)break;e=e.offsetParent}return{offsetTop:r,offsetLeft:n}}function setAttributes(e,t){Object.keys(e).forEach((function(r){isNil(e[r])?t.removeAttribute(r):t.setAttribute(r,e[r])}))}function replaceBRWithEmptyBlock(e){var t=e.replace(/<p><br\s*\/*><\/p>/gi,"<p></p>");var r=new RegExp(st,"ig");var n=t.match(r);null===n||void 0===n?void 0:n.forEach((function(e,r){if(ut.test(e)){var a=dt;if(r){var o=n[r-1];var i=o.match(ot);if(i&&!/br/i.test(i[1])){var s=i[1];a="</"+s+"><"+s+">"}}t=t.replace(ut,a)}}));return t}function removeProseMirrorHackNodes(e){var t=/<img class="ProseMirror-separator" alt="">/g;var r=/ class="ProseMirror-trailingBreak"/g;var n=e;n=n.replace(t,"");n=n.replace(r,"");return n}var pt=new y("widget");var ft=5;var ht=function(){function PopupWidget(e,t){var r=this;this.popup=null;this.removeWidget=function(){if(r.popup){r.rootEl.removeChild(r.popup);r.popup=null}};this.rootEl=e.dom.parentElement;this.eventEmitter=t;this.eventEmitter.listen("blur",this.removeWidget);this.eventEmitter.listen("loadUI",(function(){r.rootEl=closest(e.dom.parentElement,"."+cls("defaultUI"))}));this.eventEmitter.listen("removePopupWidget",this.removeWidget)}PopupWidget.prototype.update=function(e){var t=pt.getState(e.state);this.removeWidget();if(t){var r=t.node,n=t.style;var a=e.coordsAtPos(t.pos),o=a.top,i=a.left,s=a.bottom;var l=s-o;var u=this.rootEl.getBoundingClientRect();var d=o-u.top;J(r,{opacity:"0"});this.rootEl.appendChild(r);J(r,{position:"absolute",left:i-u.left+ft+"px",top:("bottom"===n?d+l-ft:d-l)+"px",opacity:"1"});this.popup=r;e.focus()}};PopupWidget.prototype.destroy=function(){this.eventEmitter.removeEventHandler("blur",this.removeWidget)};return PopupWidget}();function addWidget(e){return new g({key:pt,state:{init:function(){return null},apply:function(e){return e.getMeta("widget")}},view:function(t){return new ht(t,e)}})}function addDefaultImageBlobHook(e){e.listen("addImageBlobHook",(function(e,t){var r=new FileReader;r.onload=function(e){var r=e.target;return t(r.result)};r.readAsDataURL(e)}))}function emitImageBlobHook(e,t,r){var hook=function(r,n){e.emit("command","addImage",{imageUrl:r,altText:n||t.name||"image"})};e.emit("addImageBlobHook",t,hook,r)}function pasteImageOnly(e){var t=$e(e).filter((function(e){var t=e.type;return-1!==t.indexOf("image")}));if(1===t.length){var r=t[0];if(r)return r.getAsFile()}return null}function dropImage(e){var t=e.eventEmitter;return new g({props:{handleDOMEvents:{drop:function(e,r){var n;var a=null===(n=r.dataTransfer)||void 0===n?void 0:n.files;a&&V(a,(function(e){if(-1!==e.type.indexOf("image")){r.preventDefault();r.stopPropagation();emitImageBlobHook(t,e,r.type);return false}return true}));return true}}}})}var mt=function(){function Node(){}Object.defineProperty(Node.prototype,"type",{get:function(){return"node"},enumerable:false,configurable:true});Node.prototype.setContext=function(e){this.context=e};return Node}();function widgetNodeView(e){var t=document.createElement("span");var r=widgetToDOM(e.attrs.info,e.textContent);t.className="tui-widget";t.appendChild(r);return{dom:t}}function isWidgetNode(e){return"widget"===e.type.name}var gt=function(e){__extends$1(Widget,e);function Widget(){return null!==e&&e.apply(this,arguments)||this}Object.defineProperty(Widget.prototype,"name",{get:function(){return"widget"},enumerable:false,configurable:true});Object.defineProperty(Widget.prototype,"schema",{get:function(){return{attrs:{info:{default:null}},group:"inline",inline:true,content:"text*",selectable:false,atom:true,toDOM:function(){return["span",{class:"tui-widget"},0]},parseDOM:[{tag:"span.tui-widget",getAttrs:function(e){var t=e.textContent;var r=t.match(/\$\$(widget\d+)/),n=r[1];return{info:n}}}]}},enumerable:false,configurable:true});return Widget}(mt);var yt=function(){function EditorBase(e){this.timer=null;this.el=document.createElement("div");this.el.className="toastui-editor";this.eventEmitter=e;this.placeholder={text:""}}EditorBase.prototype.createState=function(){return b.create({schema:this.schema,plugins:this.createPlugins()})};EditorBase.prototype.initEvent=function(){var e=this,t=e.eventEmitter,r=e.view,n=e.editorType;r.dom.addEventListener("focus",(function(){return t.emit("focus",n)}));r.dom.addEventListener("blur",(function(){return t.emit("blur",n)}))};EditorBase.prototype.emitChangeEvent=function(e){this.eventEmitter.emit("caretChange",this.editorType);e.docChanged&&this.eventEmitter.emit("change",this.editorType)};Object.defineProperty(EditorBase.prototype,"defaultPlugins",{get:function(){var e=this.createInputRules();var t=__spreadArray$1(__spreadArray$1([],this.keymaps),[x(__assign$1({"Shift-Enter":L.Enter},L)),F(),placeholder(this.placeholder),addWidget(this.eventEmitter),dropImage(this.context)]);return e?t.concat(e):t},enumerable:false,configurable:true});EditorBase.prototype.createInputRules=function(){var e=getWidgetRules();var t=e.map((function(e){var t=e.rule;return new B(t,(function(e,r,n,a){var o=e.schema,i=e.tr,s=e.doc;var l=r.input.match(new RegExp(t,"g"));var u=s.resolve(n);var d=u.parent;var v=0;isWidgetNode(d)&&(d=u.node(u.depth-1));d.forEach((function(e){return isWidgetNode(e)&&(v+=1)}));if(l.length>v){var p=last$1(l);var f=createNodesWithWidget(p,o);return i.replaceWith(a-p.length+1,a,f)}return null}))}));return t.length?R({rules:t}):null};EditorBase.prototype.clearTimer=function(){if(this.timer){clearTimeout(this.timer);this.timer=null}};EditorBase.prototype.createSchema=function(){return new t({nodes:this.specs.nodes,marks:this.specs.marks})};EditorBase.prototype.createKeymaps=function(e){var t=getDefaultCommands(),r=t.undo,n=t.redo;var a=this.specs.keymaps(e);var o={"Mod-z":r(),"Shift-Mod-z":n()};return e?a.concat(x(o)):a};EditorBase.prototype.createCommands=function(){return this.specs.commands(this.view)};EditorBase.prototype.createPluginProps=function(){var e=this;return this.extraPlugins.map((function(t){return t(e.eventEmitter)}))};EditorBase.prototype.focus=function(){var e=this;this.clearTimer();this.timer=setTimeout((function(){e.view.focus();e.view.dispatch(e.view.state.tr.scrollIntoView())}))};EditorBase.prototype.blur=function(){this.view.dom.blur()};EditorBase.prototype.destroy=function(){var e=this;this.clearTimer();this.view.destroy();Object.keys(this).forEach((function(t){delete e[t]}))};EditorBase.prototype.moveCursorToStart=function(e){var t=this.view.state.tr;this.view.dispatch(t.setSelection(createTextSelection(t,1)).scrollIntoView());e&&this.focus()};EditorBase.prototype.moveCursorToEnd=function(e){var t=this.view.state.tr;this.view.dispatch(t.setSelection(createTextSelection(t,t.doc.content.size-1)).scrollIntoView());e&&this.focus()};EditorBase.prototype.setScrollTop=function(e){this.view.dom.scrollTop=e};EditorBase.prototype.getScrollTop=function(){return this.view.dom.scrollTop};EditorBase.prototype.setPlaceholder=function(e){this.placeholder.text=e;this.view.dispatch(this.view.state.tr.scrollIntoView())};EditorBase.prototype.setHeight=function(e){J(this.el,{height:e+"px"})};EditorBase.prototype.setMinHeight=function(e){J(this.el,{minHeight:e+"px"})};EditorBase.prototype.getElement=function(){return this.el};return EditorBase}();
/**
 * Check whether the given variable is a function or not.
 * If the given variable is a function, return true.
 * @param {*} obj - Target for checking
 * @returns {boolean} Is function?
 * @memberof module:type
 */function isFunction(e){return e instanceof Function}var bt=isFunction;var wt=["Enter","Shift-Enter","Mod-Enter","Tab","Shift-Tab","Delete","Backspace","Mod-Delete","Mod-Backspace","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Mod-d","Mod-D","Alt-ArrowUp","Alt-ArrowDown"];function execCommand(e,t,r){e.focus();return t(r)(e.state,e.dispatch,e)}var Tt=function(){function SpecManager(e){this.specs=e}Object.defineProperty(SpecManager.prototype,"nodes",{get:function(){return this.specs.filter((function(e){return"node"===e.type})).reduce((function(e,t){var r;var n=t.name,a=t.schema;return __assign$1(__assign$1({},e),(r={},r[n]=a,r))}),{})},enumerable:false,configurable:true});Object.defineProperty(SpecManager.prototype,"marks",{get:function(){return this.specs.filter((function(e){return"mark"===e.type})).reduce((function(e,t){var r;var n=t.name,a=t.schema;return __assign$1(__assign$1({},e),(r={},r[n]=a,r))}),{})},enumerable:false,configurable:true});SpecManager.prototype.commands=function(e,t){var r=this.specs.filter((function(e){var t=e.commands;return t})).reduce((function(t,r){var n={};var a=r.commands();bt(a)?n[r.name]=function(t){return execCommand(e,a,t)}:Object.keys(a).forEach((function(t){n[t]=function(r){return execCommand(e,a[t],r)}}));return __assign$1(__assign$1({},t),n)}),{});var n=getDefaultCommands();Object.keys(n).forEach((function(t){r[t]=function(r){return execCommand(e,n[t],r)}}));t&&Object.keys(t).forEach((function(n){r[n]=function(r){return execCommand(e,t[n],r)}}));return r};SpecManager.prototype.keymaps=function(e){var t=this.specs.filter((function(e){return e.keymaps})).map((function(e){return e.keymaps()}));return t.map((function(t){e||Object.keys(t).forEach((function(e){includes(wt,e)||delete t[e]}));return x(t)}))};SpecManager.prototype.setContext=function(e){this.specs.forEach((function(t){t.setContext(e)}))};return SpecManager}();function resolveSelectionPos(e){var t=e.from,r=e.to;return e instanceof w?[t+1,r-1]:[t,r]}function getMdLine(e){return e.index(0)+1}function getWidgetNodePos(e,t,r){void 0===r&&(r=1);var n=0;e.forEach((function(e,a){isWidgetNode(e)&&a+2<t&&(n+=2*r)}));return n}function getEditorToMdPos(e,t,r){void 0===r&&(r=t);var n=t===r;var a=e.resolve(t);var o=getMdLine(a);var i=o;var s=a.start(1);var l=s;if(!n){var u=e.resolve(r===e.content.size?r-1:r);l=u.start(1);i=getMdLine(u);u.pos===e.content.size&&(r=e.content.size-2)}var d=Math.max(t-s+1,1);var v=Math.max(r-l+1,1);return[[o,d+getWidgetNodePos(e.child(o-1),d,-1)],[i,v+getWidgetNodePos(e.child(i-1),v,-1)]]}function getStartPosListPerLine(e,t){var r=[];for(var n=0,a=0;n<t;n+=1){var o=e.child(n);r[n]=a;a+=o.nodeSize}return r}function getMdToEditorPos(e,t,r){var n=getStartPosListPerLine(e,r[0]);var a=t[0]-1;var o=r[0]-1;var i=e.child(a);var s=e.child(o);var l=n[a];var u=n[o];l+=t[1]+getWidgetNodePos(i,t[1]-1);u+=r[1]+getWidgetNodePos(s,r[1]-1);return[l,Math.min(u,e.content.size)]}function getRangeInfo(e){var t=e.$from,r=e.$to;var n=e.from,a=e.to;var o=t.doc;if(e instanceof w){t=o.resolve(n+1);r=o.resolve(a-1)}if(0===t.depth){t=o.resolve(n-1);r=t}return{startFromOffset:t.start(1),endFromOffset:r.start(1),startToOffset:t.end(1),endToOffset:r.end(1),startIndex:t.index(0),endIndex:r.index(0),from:t.pos,to:r.pos}}function getNodeContentOffsetRange(e,t){var r=1;var n=1;for(var a=0,o=0;a<e.childCount;a+=1){var i=e.child(a).nodeSize;r=o+1;n=o+i-1;if(a===t)break;o+=i}return{startOffset:r,endOffset:n}}var Ct="heading";var kt="blockQuote";var xt="listItem";var Mt="table";var Et="tableCell";var Lt="codeBlock";var Nt="thematicBreak";var It="link";var St="code";var Ot="meta";var At="delimiter";var Pt="taskDelimiter";var Dt="markedText";var Bt="html";var Rt="customBlock";var Ht={strong:2,emph:1,strike:2};function markInfo(e,t,r,n){return{start:e,end:t,spec:{type:r,attrs:n}}}function heading$1(e,t,r){var n=e.level,a=e.headingType;var o=[markInfo(t,r,Ct,{level:n})];"atx"===a?o.push(markInfo(t,addOffsetPos(t,n),At)):o.push(markInfo(setOffsetPos(r,0),r,Ct,{seText:true}));return o}function emphasisAndStrikethrough(e,t,r){var n=e.type;var a=addOffsetPos(t,Ht[n]);var o=addOffsetPos(r,-Ht[n]);return[markInfo(a,o,n),markInfo(t,a,At),markInfo(o,r,At)]}function markLink(e,t,r,n){return[markInfo(e,t,It),markInfo(setOffsetPos(e,r[1]+1),setOffsetPos(t,n),It,{desc:true}),markInfo(setOffsetPos(t,n+2),addOffsetPos(t,-1),It,{url:true})]}function image$1(e,t,r){var n=e.lastChild;var a=n?getMdEndCh(n)+1:3;var o=addOffsetPos(t,1);return __spreadArray$1([markInfo(t,o,Ot)],markLink(t,r,o,a))}function link(e,t,r){var n=e.lastChild,a=e.extendedAutolink;var o=n?getMdEndCh(n)+1:2;return a?[markInfo(t,r,It,{desc:true})]:markLink(t,r,t,o)}function code(e,t,r){var n=e.tickCount;var a=addOffsetPos(t,n);var o=addOffsetPos(r,-n);return[markInfo(t,r,St),markInfo(t,a,St,{start:true}),markInfo(a,o,St,{marked:true}),markInfo(o,r,St,{end:true})]}function lineBackground(e,t,r,n){var a={start:t,end:r,spec:{attrs:{className:n+"-line-background",codeStart:t[0],codeEnd:r[0]}},lineBackground:true};return"item"!==e.type&&"blockQuote"!==e.type?[__assign$1(__assign$1({},a),{end:t,spec:{attrs:{className:n+"-line-background start"}}}),__assign$1(__assign$1({},a),{start:[Math.min(t[0]+1,r[0]),t[1]]})]:null}function codeBlock$1(e,t,r,n){var a=e.fenceOffset,o=e.fenceLength,i=e.fenceChar,s=e.info,l=e.infoPadding,u=e.parent;var d=a+o;var v=[markInfo(setOffsetPos(t,1),r,Lt)];i&&v.push(markInfo(t,addOffsetPos(t,d),At));s&&v.push(markInfo(addOffsetPos(t,o),addOffsetPos(t,o+l+s.length),Ot));var p="^(\\s{0,4})("+i+"{"+o+",})";var f=new RegExp(p);f.test(n)&&v.push(markInfo(setOffsetPos(r,1),r,At));var m=lineBackground(u,t,r,"code-block");return m?v.concat(m):v}function customBlock$2(e,t,r){var n=e,a=n.offset,o=n.syntaxLength,i=n.info,s=n.parent;var l=a+o;var u=[markInfo(setOffsetPos(t,1),r,Rt)];u.push(markInfo(t,addOffsetPos(t,l),At));i&&u.push(markInfo(addOffsetPos(t,l),addOffsetPos(t,o+i.length),Ot));u.push(markInfo(setOffsetPos(r,1),r,At));var d=lineBackground(s,t,r,"custom-block");return d?u.concat(d):u}function markListItemChildren(e,t){var r=[];while(e){var n=e.type;"paragraph"!==n&&"codeBlock"!==n||r.push(markInfo([getMdStartLine(e),getMdStartCh(e)-1],[getMdEndLine(e),getMdEndCh(e)+1],t));e=e.next}return r}function markParagraphInBlockQuote(e){var t=[];while(e){t.push(markInfo([getMdStartLine(e),getMdStartCh(e)],[getMdEndLine(e),getMdEndCh(e)+1],Dt));e=e.next}return t}function blockQuote$2(e,t,r){var n=e.parent&&"blockQuote"!==e.parent.type?[markInfo(t,r,kt)]:[];if(e.firstChild){var a=[];"paragraph"===e.firstChild.type?a=markParagraphInBlockQuote(e.firstChild.firstChild):"list"===e.firstChild.type&&(a=markListItemChildren(e.firstChild,Dt));n=__spreadArray$1(__spreadArray$1([],n),a)}return n}function getSpecOfListItemStyle(e){var t=0;while(e.parent.parent&&"item"===e.parent.parent.type){e=e.parent.parent;t+=1}var r=[{odd:true},{even:true}][t%2];return[xt,__assign$1(__assign$1({},r),{listStyle:true})]}function item$1(e,t){var r=e.listData,n=r.padding,a=r.task;var o=getSpecOfListItemStyle(e);var i=[markInfo.apply(void 0,__spreadArray$1([t,addOffsetPos(t,n)],o))];if(a){i.push(markInfo(addOffsetPos(t,n),addOffsetPos(t,n+3),Pt));i.push(markInfo(addOffsetPos(t,n+1),addOffsetPos(t,n+2),Ot))}return i.concat(markListItemChildren(e.firstChild,Dt))}var _t={heading:heading$1,strong:emphasisAndStrikethrough,emph:emphasisAndStrikethrough,strike:emphasisAndStrikethrough,link:link,image:image$1,code:code,codeBlock:codeBlock$1,blockQuote:blockQuote$2,item:item$1,customBlock:customBlock$2};var $t={thematicBreak:Nt,table:Mt,tableCell:Et,htmlInline:Bt};function getMarkInfo(e,t,r,n){var a=e.type;return bt(_t[a])?_t[a](e,t,r,n):$t[a]?[markInfo(t,r,$t[a])]:null}var Ft={};function syntaxHighlight(e){var t=e.schema,r=e.toastMark;return new g({appendTransaction:function(e,n,a){var o=e[0];var i=a.tr;if(o.docChanged){var s=[];var l=o.getMeta("editResult");l.forEach((function(e){var t=e.nodes,n=e.removedNodeRange;if(t.length){s=s.concat(getMarkForRemoving(i,t));for(var a=0,o=t;a<o.length;a++){var l=o[a];var u=l.walker();var d=u.next();while(d){var v=d.node,p=d.entering;p&&(s=s.concat(getMarkForAdding(v,r)));d=u.next()}}}else if(n){var f=i.doc.childCount-1;var m=n.line,g=m[0],y=m[1];var b=Math.min(g,f);var w=Math.min(y,f);for(var T=b;T<=w;T+=1)Ft[T]=true}}));appendMarkTr(i,t,s)}return i.setMeta("widget",o.getMeta("widget"))}})}function isDifferentBlock(e,t,r){return Object.keys(r).some((function(n){return r[n]!==e.child(t).attrs[n]}))}function addLineBackground(e,t,r,n,a){void 0===a&&(a={});var o=n.startIndex,i=n.endIndex,s=n.from,l=n.to;var u=false;for(var d=o;d<=i;d+=1){delete Ft[d];u=isDifferentBlock(t,d,a)}u&&e.setBlockType(s,l,r,a)}function appendMarkTr(e,t,r){var n=e.doc;var a=t.nodes.paragraph;var o=getStartPosListPerLine(n,n.childCount);r.forEach((function(r){var i=r.start,s=r.end,l=r.spec,u=r.lineBackground;var d=Math.min(i[0],n.childCount)-1;var v=Math.min(s[0],n.childCount)-1;var p=n.child(d);var f=n.child(v);var m=o[d];var g=o[v];m+=i[1]+getWidgetNodePos(p,i[1]-1);g+=s[1]+getWidgetNodePos(f,s[1]-1);if(l)if(u){var y={from:m,to:g,startIndex:d,endIndex:v};addLineBackground(e,n,a,y,l.attrs)}else e.addMark(m,g,t.mark(l.type,l.attrs));else e.removeMark(m,g)}));removeBlockBackground(e,o,a)}function removeBlockBackground(e,t,r){Object.keys(Ft).forEach((function(n){var a=Number(n);var o=Math.min(Number(n)+1,e.doc.childCount-1);var i=t[a];var s=t[o]-1;a===o&&(s+=2);e.setBlockType(i,s,r)}))}function cacheIndexToRemoveBackground(e,t,r){var n=[];Ft={};for(var a=t[0]-1;a<r[0];a+=1){var o=e.child(a);var i=o.attrs.codeEnd;var s=o.attrs.codeStart;if(s&&i&&!includes(n,s)){n.push(s);i=Math.min(i,e.childCount);var l=s-1;var u=r[0];for(var d=l;d<u;d+=1)Ft[d]=true}}}function getMarkForRemoving(e,t){var r=e.doc;var n=t[0].sourcepos[0];var a=last$1(t).sourcepos,o=a[1];var i=[n[0],n[1]];var s=[o[0],o[1]+1];var l=[];cacheIndexToRemoveBackground(r,n,o);l.push({start:i,end:s});return l}function getMarkForAdding(e,t){var r=t.getLineTexts();var n=[getMdStartLine(e),getMdStartCh(e)];var a=[getMdEndLine(e),getMdEndCh(e)+1];var o=getMarkInfo(e,n,a,r[a[0]-1]);return null!==o&&void 0!==o?o:[]}var jt=["taskList","orderedList","bulletList","table","strong","emph","strike","heading","thematicBreak","blockQuote","code","codeBlock","indent","outdent"];function getToolbarStateType$1(e){var t=e.type;return isListNode$1(e)?e.listData.task?"taskList":"ordered"===e.listData.type?"orderedList":"bulletList":-1!==t.indexOf("table")?"table":includes(jt,t)?t:null}function getToolbarState$1(e){var t={indent:{active:false,disabled:true},outdent:{active:false,disabled:true}};var r=true;traverseParentNodes(e,(function(e){var n=getToolbarStateType$1(e);if(n)if("bulletList"===n||"orderedList"===n){if(r){t[n]={active:true};t.indent.disabled=false;t.outdent.disabled=false;r=false}}else t[n]={active:true}}));return t}function previewHighlight(e){var t=e.toastMark,r=e.eventEmitter;return new g({view:function(){return{update:function(e,n){var a=e.state;var o=a.doc,i=a.selection;if(!(n&&n.doc.eq(o)&&n.selection.eq(i))){var s=i.from;var l=a.doc.resolve(s).start();var u=a.doc.content.findIndex(s).index+1;var d=s-l;s===l&&(d+=1);var v=[u,d];var p=t.findNodeAtPosition(v);var f=getToolbarState$1(p);r.emit("changeToolbarState",{cursorPos:v,mdNode:p,toolbarState:f});r.emit("setFocusedNode",p)}}}}})}var Ut=function(e){__extends$1(Doc,e);function Doc(){return null!==e&&e.apply(this,arguments)||this}Object.defineProperty(Doc.prototype,"name",{get:function(){return"doc"},enumerable:false,configurable:true});Object.defineProperty(Doc.prototype,"schema",{get:function(){return{content:"block+"}},enumerable:false,configurable:true});return Doc}(mt);var Wt=function(){function Mark(){}Object.defineProperty(Mark.prototype,"type",{get:function(){return"mark"},enumerable:false,configurable:true});Mark.prototype.setContext=function(e){this.context=e};return Mark}();function getTextByMdLine(e,t){return getTextContent(e,t-1)}function getTextContent(e,t){return e.child(t).textContent}var qt=/^\s*> ?/;var zt=function(e){__extends$1(BlockQuote,e);function BlockQuote(){return null!==e&&e.apply(this,arguments)||this}Object.defineProperty(BlockQuote.prototype,"name",{get:function(){return"blockQuote"},enumerable:false,configurable:true});Object.defineProperty(BlockQuote.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:clsWithMdPrefix("block-quote")},0]}}},enumerable:false,configurable:true});BlockQuote.prototype.createBlockQuoteText=function(e,t){return t?e.replace(qt,"").trim():"> "+e.trim()};BlockQuote.prototype.extendBlockQuote=function(){var e=this;return function(t,r){var n=t.selection,a=t.doc,o=t.tr,i=t.schema;var s=getRangeInfo(n),l=s.endFromOffset,u=s.endToOffset,d=s.endIndex,v=s.to;var p=getTextContent(a,d);var f=qt.test(p);if(f&&v>l&&n.empty){var m=!p.replace(qt,"").trim();if(m)o.deleteRange(l,u).split(o.mapping.map(u));else{var g=p.slice(v-l).trim();var y=createTextNode$1(i,e.createBlockQuoteText(g));splitAndExtendBlock(o,u,g,y)}r(o);return true}return false}};BlockQuote.prototype.commands=function(){var e=this;return function(){return function(t,r){var n=t.selection,a=t.doc;var o=getRangeInfo(n),i=o.startFromOffset,s=o.endToOffset,l=o.startIndex,u=o.endIndex;var d=qt.test(getTextContent(a,l));var v=replaceTextNode({state:t,startIndex:l,endIndex:u,from:i,createText:function(t){return e.createBlockQuoteText(t,d)}});r(v.setSelection(createTextSelection(v,v.mapping.map(s))));return true}}};BlockQuote.prototype.keymaps=function(){var e=this.commands()();return{"alt-q":e,"alt-Q":e,Enter:this.extendBlockQuote()}};return BlockQuote}(Wt);var Vt=/(^\s*)([-*+] |[\d]+\. )/;var Gt=/(^\s*)([\d])+\.( \[[ xX]])? /;var Qt=/^(\s*)((\d+)([.)]\s(?:\[(?:x|\s)\]\s)?))(.*)/;var Xt=/(^\s*)([-*+]|[\d]+\.)( \[[ xX]])? /;var Zt=/^(\s*)([-*+]+(\s(?:\[(?:x|\s)\]\s)?))(.*)/;var Kt=/(^\s*)([-*+] |[\d]+\. )(\[[ xX]] )/;var Yt=/(^\s*)([-*+])( \[[ xX]]) /;function getListType(e){return Gt.test(e)?"ordered":"bullet"}function getListDepth(e){var t=0;while(e&&"document"!==e.type){"list"===e.type&&(t+=1);e=e.parent}return t}function findSameDepthList(e,t,r,n){var a=e.getLineTexts();var o=a.length;var i=[];var s=t;while(n?s<o:s>1){s=n?s+1:s-1;var l=e.findFirstNodeAtLine(s);var u=getListDepth(l);if(u===r)i.push({line:s,depth:r,mdNode:l});else if(u<r)break}return i}function getSameDepthItems(e){var t=e.toastMark,r=e.mdNode,n=e.line;var a=getListDepth(r);var o=findSameDepthList(t,n,a,false).reverse();var i=findSameDepthList(t,n,a,true);return o.concat([{line:n,depth:a,mdNode:r}]).concat(i)}function textToBullet(e){if(!Vt.test(e))return"* "+e;var t=getListType(e);"bullet"===t&&Xt.test(e)?e=e.replace(Yt,"$1$2 "):"ordered"===t&&(e=e.replace(Gt,"$1* "));return e}function textToOrdered(e,t){if(!Vt.test(e))return t+". "+e;var r=getListType(e);if("bullet"===r||"ordered"===r&&Xt.test(e))e=e.replace(Xt,"$1"+t+". ");else if("ordered"===r){var n=Qt.exec(e)[3];Number(n)!==t&&(e=e.replace(Gt,"$1"+t+". "))}return e}function getChangedInfo(e,t,r,n){void 0===n&&(n=0);var a=Number.MAX_VALUE;var o=0;var i=t.map((function(t,i){var s=t.line;a=Math.min(s-1,a);o=Math.max(s-1,o);var l=getTextByMdLine(e,s);l="bullet"===r?textToBullet(l):textToOrdered(l,i+1+n);return{text:l,line:s}}));return{changedResults:i,firstIndex:a,lastIndex:o}}function getBulletOrOrdered(e,t){var r=getSameDepthItems(t);return getChangedInfo(t.doc,r,e)}var Jt={bullet:function(e){return getBulletOrOrdered("bullet",e)},ordered:function(e){return getBulletOrOrdered("ordered",e)},task:function(e){var t=e.mdNode,r=e.doc,n=e.line;var a=getTextByMdLine(r,n);t.listData.task?a=a.replace(Kt,"$1$2"):isListNode$1(t)&&(a=a.replace(Vt,"$1$2[ ] "));return{changedResults:[{text:a,line:n}]}}};var er={bullet:function(e){var t=e.doc,r=e.line;var n=getTextByMdLine(t,r);var a=[{text:"* "+n,line:r}];return{changedResults:a}},ordered:function(e){var t=e.toastMark,r=e.doc,n=e.line,a=e.startLine;var o=getTextByMdLine(r,n);var i=1;var s=a;var l=0;for(var u=a-1;u>0;u-=1){var d=t.findFirstNodeAtLine(u);var v=getTextByMdLine(r,u);var p=v&&!!findClosestNode(d,(function(e){return isListNode$1(e)}));var f=Qt.exec(getTextByMdLine(r,u));if(!f&&!p)break;if(f||!p){var m=f,g=m[1],y=m[3];if(!g){i=Number(y);s=u;break}}else l+=1}var b=i+n-s-l;var w=[{text:b+". "+o,line:n}];return{changedResults:w}},task:function(e){var t=e.doc,r=e.line;var n=getTextByMdLine(t,r);var a=[{text:"* [ ] "+n,line:r}];return{changedResults:a}}};var tr={bullet:function(e){var t=e.line,r=e.doc;var n=getTextByMdLine(r,t);var a=Zt.exec(n),o=a[1],i=a[2];return{listSyntax:""+o+i}},ordered:function(e){var t=e.toastMark,r=e.line,n=e.mdNode,a=e.doc;var o=getListDepth(n);var i=getTextByMdLine(a,r);var s=Qt.exec(i),l=s[1],u=s[3],d=s[4];var v=Number(u)+1;var p=""+l+v+d;var f=findSameDepthList(t,r,o,true);var m=f.filter((function(e){var t=Qt.exec(getTextByMdLine(a,e.line));return t&&t[1].length===l.length&&!!findClosestNode(e.mdNode,(function(e){return isOrderedListNode(e)}))}));return __assign$1({listSyntax:p},getChangedInfo(a,m,"ordered",v))}};function getReorderedListInfo(e,t,r,n,a){var o=[];var i=getTextByMdLine(e,r);var s=Qt.exec(i);while(s){var l=s[1],u=s[4],d=s[5];var v=l.length;if(v===a){o.push(createTextNode$1(t,""+l+n+u+d));n+=1;r+=1}else if(v>a){var p=getReorderedListInfo(e,t,r,1,v);r=p.line;o=o.concat(p.nodes)}if(v<a||r>e.childCount)break;i=getTextByMdLine(e,r);s=Qt.exec(i)}return{nodes:o,line:r}}var rr=/(^\s{1,4})(.*)/;function isBlockUnit(e,t,r){return e<t||Vt.test(r)||qt.test(r)}function isInTableCellNode(e,t,r){var n=r.$from;0===n.depth&&(n=e.resolve(n.pos-1));var a=n.node(1);var o=n.start(1);var i=a.content.size;return a.rangeHasMark(0,i,t.marks.table)&&n.pos-o!==i&&n.pos!==o}function createSelection(e,t){var r=t.from,n=t.to;if("indent"===t.type){var a=4;r+=a;n+=(t.lineLen+1)*a}else{var o=t.spaceLenList;r-=o[0];for(var i=0;i<o.length;i+=1)n-=o[i]}return createTextSelection(e,r,n)}var nr=function(e){__extends$1(Paragraph,e);function Paragraph(){return null!==e&&e.apply(this,arguments)||this}Object.defineProperty(Paragraph.prototype,"name",{get:function(){return"paragraph"},enumerable:false,configurable:true});Object.defineProperty(Paragraph.prototype,"schema",{get:function(){return{content:"inline*",attrs:{className:{default:null},codeStart:{default:null},codeEnd:{default:null}},selectable:false,group:"block",parseDOM:[{tag:"div"}],toDOM:function(e){var t=e.attrs;return t.className?["div",{class:clsWithMdPrefix(t.className)},0]:["div",0]}}},enumerable:false,configurable:true});Paragraph.prototype.reorderList=function(e,t){var r=this.context,n=r.view,a=r.toastMark,o=r.schema;var i=n.state,s=i.tr,l=i.selection,u=i.doc;var d=a.findFirstNodeAtLine(e);var v=d;while(d&&!isBulletListNode(d)&&"document"!==d.parent.type){d=d.parent;if(isOrderedListNode(d)){v=d;break}}v&&(e=v.sourcepos[0][0]);var p=Qt.exec(getTextByMdLine(u,e)),f=p[1],m=p[3];var g=f.length;var y=getReorderedListInfo(u,o,e,Number(m),g),b=y.line,w=y.nodes;t=Math.max(t,b-1);var T=getNodeContentOffsetRange(u,e-1).startOffset;for(var C=e-1;C<=t-1;C+=1){var k=u.child(C),x=k.nodeSize,M=k.content;var E=s.mapping.map(T);var L=E+M.size;s.replaceWith(E,L,w[C-e+1]);T+=x}var N=createTextSelection(s,l.from,l.to);n.dispatch(s.setSelection(N))};Paragraph.prototype.indent=function(e){var t=this;void 0===e&&(e=false);return function(){return function(r,n){var a=r.schema,o=r.selection,i=r.doc;var s=getRangeInfo(o),l=s.from,u=s.to,d=s.startFromOffset,v=s.startIndex,p=s.endIndex;if(e&&isInTableCellNode(i,a,o))return false;var f=getTextContent(i,v);if(e&&isBlockUnit(l,u,f)||!e&&Vt.test(f)){var m=replaceTextNode({state:r,from:d,startIndex:v,endIndex:p,createText:function(e){return"    "+e}});var g={type:"indent",from:l,to:u,lineLen:p-v};n(m.setSelection(createSelection(m,g)));Qt.test(f)&&t.reorderList(v+1,p+1)}else e&&n(r.tr.insert(u,createTextNode$1(a,"    ")));return true}}};Paragraph.prototype.outdent=function(e){var t=this;void 0===e&&(e=false);return function(){return function(r,n){var a=r.selection,o=r.doc,i=r.schema;var s=getRangeInfo(a),l=s.from,u=s.to,d=s.startFromOffset,v=s.startIndex,p=s.endIndex;if(e&&isInTableCellNode(o,i,a))return false;var f=getTextContent(o,v);if(e&&isBlockUnit(l,u,f)||!e&&Vt.test(f)){var m=[];var g=replaceTextNode({state:r,from:d,startIndex:v,endIndex:p,createText:function(e){var t=rr.exec(e);m.push(t?t[1].length:0);return e.replace(rr,"$2")}});var y={type:"outdent",from:l,to:u,spaceLenList:m};n(g.setSelection(createSelection(g,y)));Qt.test(f)&&t.reorderList(v+1,p+1)}else if(e){var b=f.slice(0,u-d);var w=b.replace(/\s{1,4}$/,"");var T=u-(b.length-w.length);n(r.tr.delete(T,u))}return true}}};Paragraph.prototype.deleteLines=function(){var e=this;return function(t,r){var n=e.context.view;var a=getRangeInfo(t.selection),o=a.startFromOffset,i=a.endToOffset;var deleteRange=function(){r(t.tr.deleteRange(o,i));return true};return N(deleteRange,I)(t,r,n)}};Paragraph.prototype.moveDown=function(){return function(e,t){var r=e.doc,n=e.tr,a=e.selection,o=e.schema;var i=getRangeInfo(a),s=i.startFromOffset,l=i.endToOffset,u=i.endIndex;if(u<r.content.childCount-1){var d=r.child(u+1),v=d.nodeSize,p=d.textContent;n.delete(l,l+v).split(s).insert(n.mapping.map(s)-2,createTextNode$1(o,p));t(n);return true}return false}};Paragraph.prototype.moveUp=function(){return function(e,t){var r=e.tr,n=e.doc,a=e.selection,o=e.schema;var i=getRangeInfo(a),s=i.startFromOffset,l=i.endToOffset,u=i.startIndex;if(u>0){var d=n.child(u-1),v=d.nodeSize,p=d.textContent;r.delete(s-v,s).split(r.mapping.map(l)).insert(r.mapping.map(l),createTextNode$1(o,p));t(r);return true}return false}};Paragraph.prototype.commands=function(){return{indent:this.indent(),outdent:this.outdent()}};Paragraph.prototype.keymaps=function(){return{Tab:this.indent(true)(),"Shift-Tab":this.outdent(true)(),"Mod-d":this.deleteLines(),"Mod-D":this.deleteLines(),"Alt-ArrowUp":this.moveUp(),"Alt-ArrowDown":this.moveDown()}};return Paragraph}(mt);var ar=function(e){__extends$1(Text,e);function Text(){return null!==e&&e.apply(this,arguments)||this}Object.defineProperty(Text.prototype,"name",{get:function(){return"text"},enumerable:false,configurable:true});Object.defineProperty(Text.prototype,"schema",{get:function(){return{group:"inline"}},enumerable:false,configurable:true});return Text}(mt);var or=/^#{1,6}\s/;var ir=function(e){__extends$1(Heading,e);function Heading(){return null!==e&&e.apply(this,arguments)||this}Object.defineProperty(Heading.prototype,"name",{get:function(){return"heading"},enumerable:false,configurable:true});Object.defineProperty(Heading.prototype,"schema",{get:function(){return{attrs:{level:{default:1},seText:{default:false}},toDOM:function(e){var t=e.attrs;var r=t.level,n=t.seText;var a="heading|heading"+r;n&&(a+="|delimiter|setext");return["span",{class:clsWithMdPrefix.apply(void 0,a.split("|"))},0]}}},enumerable:false,configurable:true});Heading.prototype.createHeadingText=function(e,t,r){var n=t.replace(r,"").trim();var a="";while(e>0){a+="#";e-=1}return a+" "+n};Heading.prototype.commands=function(){var e=this;return function(t){return function(r,n){var a=t.level;var o=getRangeInfo(r.selection),i=o.startFromOffset,s=o.endToOffset,l=o.startIndex,u=o.endIndex;var d=replaceTextNode({state:r,from:i,startIndex:l,endIndex:u,createText:function(t){var r=t.match(or);var n=r?r[0]:"";return e.createHeadingText(a,t,n)}});n(d.setSelection(createTextSelection(d,d.mapping.map(s))));return true}}};return Heading}(Wt);var sr="```";var lr=function(e){__extends$1(CodeBlock,e);function CodeBlock(){return null!==e&&e.apply(this,arguments)||this}Object.defineProperty(CodeBlock.prototype,"name",{get:function(){return"codeBlock"},enumerable:false,configurable:true});Object.defineProperty(CodeBlock.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:clsWithMdPrefix("code-block")},0]}}},enumerable:false,configurable:true});CodeBlock.prototype.commands=function(){return function(){return function(e,t){var r=e.selection,n=e.schema,a=e.tr;var o=getRangeInfo(r),i=o.startFromOffset,s=o.endToOffset;var l=createTextNode$1(n,sr);a.insert(i,l).split(i+sr.length);a.split(a.mapping.map(s)).insert(a.mapping.map(s),l);t(a.setSelection(createTextSelection(a,a.mapping.map(s)-(sr.length+2))));return true}}};CodeBlock.prototype.keepIndentation=function(){var e=this;return function(t,r){var n=t.selection,a=t.tr,o=t.doc,i=t.schema;var s=e.context.toastMark;var l=getRangeInfo(n),u=l.startFromOffset,d=l.endToOffset,v=l.endIndex,p=l.from,f=l.to;var m=getTextContent(o,v);if(p===f&&m.trim()){var g=m.match(/^\s+/);var y=s.findFirstNodeAtLine(v+1);if(isCodeBlockNode(y)&&g){var b=g[0];var w=m.slice(f-u);var T=createTextNode$1(i,b+w);splitAndExtendBlock(a,d,w,T);r(a);return true}}return false}};CodeBlock.prototype.keymaps=function(){var e=this.commands()();return{"Shift-Mod-p":e,"Shift-Mod-P":e,Enter:this.keepIndentation()}};return CodeBlock}(Wt);var ur=/\||\s/g;function createTableHeader(e){return[createTableRow(e),createTableRow(e,true)]}function createTableBody$1(e,t){var r=[];for(var n=0;n<t;n+=1)r.push(createTableRow(e));return r}function createTableRow(e,t){var r="|";for(var n=0;n<e;n+=1)r+=t?" --- |":"  |";return r}function createTargetTypes(e){return e?{type:"next",parentType:"tableHead",childType:"firstChild"}:{type:"prev",parentType:"tableBody",childType:"lastChild"}}var cr=function(e){__extends$1(Table,e);function Table(){return null!==e&&e.apply(this,arguments)||this}Object.defineProperty(Table.prototype,"name",{get:function(){return"table"},enumerable:false,configurable:true});Object.defineProperty(Table.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:clsWithMdPrefix("table")},0]}}},enumerable:false,configurable:true});Table.prototype.extendTable=function(){var e=this;return function(t,r){var n=t.selection,a=t.doc,o=t.tr,i=t.schema;if(!n.empty)return false;var s=getRangeInfo(n),l=s.endFromOffset,u=s.endToOffset,d=s.endIndex,v=s.to;var p=getTextContent(a,d);var f=[d+1,v-l+1];var m=e.context.toastMark.findNodeAtPosition(f);var g=findClosestNode(m,(function(e){return isTableCellNode(e)&&("tableDelimRow"===e.parent.type||"tableBody"===e.parent.parent.type)}));if(g){var y=!p.replace(ur,"").trim();var b=g.parent;var w=b.parent.parent.columns.length;var T=createTableRow(w);y?o.deleteRange(l,u).split(o.mapping.map(u)):o.split(u).insert(o.mapping.map(u),createTextNode$1(i,T)).setSelection(createTextSelection(o,o.mapping.map(u)-2));r(o);return true}return false}};Table.prototype.moveTableCell=function(e){var t=this;return function(r,n){var a=r.selection,o=r.tr;var i=getRangeInfo(a),s=i.endFromOffset,l=i.endIndex,u=i.to;var d=[l+1,u-s];var v=t.context.toastMark.findNodeAtPosition(d);var p=findClosestNode(v,(function(e){return isTableCellNode(e)}));if(p){var f=p.parent;var m=createTargetTypes(e),g=m.type,y=m.parentType,b=m.childType;var w=getMdEndCh(p);if(p[g])w=getMdEndCh(p[g])-1;else{var T=f[g]||f.parent.type!==y?f[g]:f.parent[g][b];if("next"===g){var C=T?getMdEndCh(T[b]):0;w+=C+2}else"prev"===g&&(w=T?-4:0)}n(o.setSelection(createTextSelection(o,s+w)));return true}return false}};Table.prototype.addTable=function(){return function(e){return function(t,r){var n=t.selection,a=t.tr,o=t.schema;var i=e,s=i.columnCount,l=i.rowCount;var u=getRangeInfo(n).endToOffset;var d=createTableHeader(s);var v=createTableBody$1(s,l-1);var p=__spreadArray$1(__spreadArray$1([],d),v);p.forEach((function(e){a.split(a.mapping.map(u)).insert(a.mapping.map(u),createTextNode$1(o,e))}));r(a.setSelection(createTextSelection(a,u+4)));return true}}};Table.prototype.commands=function(){return{addTable:this.addTable()}};Table.prototype.keymaps=function(){return{Enter:this.extendTable(),Tab:this.moveTableCell(true),"Shift-Tab":this.moveTableCell(false)}};return Table}(Wt);var dr="***";var vr=function(e){__extends$1(ThematicBreak,e);function ThematicBreak(){return null!==e&&e.apply(this,arguments)||this}Object.defineProperty(ThematicBreak.prototype,"name",{get:function(){return"thematicBreak"},enumerable:false,configurable:true});Object.defineProperty(ThematicBreak.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:clsWithMdPrefix("thematic-break")},0]}}},enumerable:false,configurable:true});ThematicBreak.prototype.hr=function(){return function(){return function(e,t){var r=e.selection,n=e.schema,a=e.tr;var o=getRangeInfo(r),i=o.from,s=o.to,l=o.endToOffset;var u=createTextNode$1(n,dr);a.split(i).replaceWith(a.mapping.map(i),a.mapping.map(s),u).split(a.mapping.map(s)).setSelection(createTextSelection(a,a.mapping.map(l)));t(a);return true}}};ThematicBreak.prototype.commands=function(){return{hr:this.hr()}};ThematicBreak.prototype.keymaps=function(){var e=this.hr()();return{"Mod-l":e,"Mod-L":e}};return ThematicBreak}(Wt);function cannotBeListNode(e,t){var r=e.type,n=e.sourcepos;var a=n[0][0];return t<=a&&("codeBlock"===r||"heading"===r||r.match("table"))}var pr=function(e){__extends$1(ListItem,e);function ListItem(){return null!==e&&e.apply(this,arguments)||this}Object.defineProperty(ListItem.prototype,"name",{get:function(){return"listItem"},enumerable:false,configurable:true});Object.defineProperty(ListItem.prototype,"schema",{get:function(){return{attrs:{odd:{default:false},even:{default:false},listStyle:{default:false}},toDOM:function(e){var t=e.attrs;var r=t.odd,n=t.even,a=t.listStyle;var o="list-item";a&&(o+="|list-item-style");r&&(o+="|list-item-odd");n&&(o+="|list-item-even");return["span",{class:clsWithMdPrefix.apply(void 0,o.split("|"))},0]}}},enumerable:false,configurable:true});ListItem.prototype.extendList=function(){var e=this;return function(t,r){var n=t.selection,a=t.doc,o=t.schema,i=t.tr;var s=e.context.toastMark;var l=getRangeInfo(n),u=l.to,d=l.startFromOffset,v=l.endFromOffset,p=l.endIndex,f=l.endToOffset;var m=getTextContent(a,p);var g=Vt.test(m);if(!g||n.from===d||!n.empty)return false;var y=!m.replace(Xt,"").trim();if(y)i.deleteRange(v,f).split(i.mapping.map(f));else{var b=getListType(m);var w=s.findFirstNodeAtLine(p+1);var T=m.slice(u-v);var C={toastMark:s,mdNode:w,doc:a,line:p+1};var k=tr[b](C),x=k.listSyntax,M=k.changedResults;if(null===M||void 0===M?void 0:M.length){i.split(u);M.unshift({text:x+T,line:p+1});e.changeToListPerLine(i,M,{from:u,startLine:M[0].line,endLine:last$1(M).line});var E=i.mapping.map(f)-T.length;i.setSelection(createTextSelection(i,E))}else{var L=createTextNode$1(o,x+T);splitAndExtendBlock(i,f,T,L)}}r(i);return true}};ListItem.prototype.toList=function(e){var t=this;return function(){return function(r,n){var a=r.doc,o=r.tr,i=r.selection;var s=t.context.toastMark;var l=getRangeInfo(i);var u=l.startIndex+1;var d=l.endIndex+1;var v=l.endToOffset;var p=[];for(var f=u;f<=d;f+=1){var m=s.findFirstNodeAtLine(f);if(m&&cannotBeListNode(m,f))break;if(-1===p.indexOf(f)){var g={toastMark:s,mdNode:m,doc:a,line:f,startLine:u};var y=(isListNode$1(m)?Jt[e](g):er[e](g)).changedResults;var b=t.changeToListPerLine(o,y,{from:getNodeContentOffsetRange(a,y[0].line-1).startOffset,startLine:y[0].line,endLine:last$1(y).line,indexDiff:1});v=Math.max(b,v);y&&(p=p.concat(y.map((function(e){return e.line}))))}}n(o.setSelection(createTextSelection(o,o.mapping.map(v))));return true}}};ListItem.prototype.changeToListPerLine=function(e,t,r){var n=r.from,a=r.startLine,o=r.endLine,i=r.indexDiff,s=void 0===i?0:i;var l=0;var _loop_1=function(r){var a=e.doc.child(r),o=a.nodeSize,i=a.content;var d=e.mapping.map(n);var v=d+i.size;var p=t.filter((function(e){return e.line-s===r}))[0];if(p){e.replaceWith(d,v,createTextNode$1(u.context.schema,p.text));l=Math.max(l,n+i.size)}n+=o};var u=this;for(var d=a-s;d<=o-s;d+=1)_loop_1(d);return l};ListItem.prototype.toggleTask=function(){var e=this;return function(t,r){var n=t.selection,a=t.tr,o=t.doc,i=t.schema;var s=e.context.toastMark;var l=getRangeInfo(n),u=l.startIndex,d=l.endIndex;var v=null;for(var p=u;p<=d;p+=1){var f=s.findFirstNodeAtLine(p+1);if(isListNode$1(f)&&f.listData.task){var m=f.listData,g=m.checked,y=m.padding;var b=g?" ":"x";var w=f.sourcepos[0];var T=getNodeContentOffsetRange(o,w[0]-1).startOffset;T+=w[1]+y;v=a.replaceWith(T,T+1,i.text(b))}}if(v){r(v);return true}return false}};ListItem.prototype.commands=function(){return{bulletList:this.toList("bullet"),orderedList:this.toList("ordered"),taskList:this.toList("task")}};ListItem.prototype.keymaps=function(){var e=this.toList("bullet")();var t=this.toList("ordered")();var r=this.toList("task")();var n=this.toggleTask();return{"Mod-u":e,"Mod-U":e,"Mod-o":t,"Mod-O":t,"alt-t":r,"alt-T":r,"Shift-Ctrl-x":n,"Shift-Ctrl-X":n,Enter:this.extendList()}};return ListItem}(Wt);function toggleMark(e,t){return function(){return function(r,n){var a=r.tr,o=r.selection;var i=bt(e)?e:function(t){return e.test(t)};var s=t.length;var l=a.doc;var u=resolveSelectionPos(o),d=u[0],v=u[1];var p=Math.max(d-s,1);var f=Math.min(v+s,l.content.size-1);var m=o.content();var g=m.content.textBetween(0,m.content.size,"\n");var y=l.textBetween(p,d,"\n");var b=l.textBetween(v,f,"\n");g=""+y+g+b;if(y&&b&&i(g))a.delete(f-s,f).delete(p,p+s);else{a.insertText(t,v).insertText(t,d);var w=o.empty?createTextSelection(a,d+s):createTextSelection(a,d+s,v+s);a.setSelection(w)}n(a);return true}}}var fr=/^(\*{2}|_{2}).*([\s\S]*)\1$/m;var hr="**";var mr=function(e){__extends$1(Strong,e);function Strong(){return null!==e&&e.apply(this,arguments)||this}Object.defineProperty(Strong.prototype,"name",{get:function(){return"strong"},enumerable:false,configurable:true});Object.defineProperty(Strong.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:clsWithMdPrefix("strong")},0]}}},enumerable:false,configurable:true});Strong.prototype.bold=function(){return toggleMark(fr,hr)};Strong.prototype.commands=function(){return{bold:this.bold()}};Strong.prototype.keymaps=function(){var e=this.bold()();return{"Mod-b":e,"Mod-B":e}};return Strong}(Wt);var gr=/^(~{2}).*([\s\S]*)\1$/m;var yr="~~";var br=function(e){__extends$1(Strike,e);function Strike(){return null!==e&&e.apply(this,arguments)||this}Object.defineProperty(Strike.prototype,"name",{get:function(){return"strike"},enumerable:false,configurable:true});Object.defineProperty(Strike.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:clsWithMdPrefix("strike")},0]}}},enumerable:false,configurable:true});Strike.prototype.commands=function(){return toggleMark(gr,yr)};Strike.prototype.keymaps=function(){var e=this.commands()();return{"Mod-s":e,"Mod-S":e}};return Strike}(Wt);var wr=/^(\*|_).*([\s\S]*)\1$/m;var Tr="*";var Cr=function(e){__extends$1(Emph,e);function Emph(){return null!==e&&e.apply(this,arguments)||this}Object.defineProperty(Emph.prototype,"name",{get:function(){return"emph"},enumerable:false,configurable:true});Object.defineProperty(Emph.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:clsWithMdPrefix("emph")},0]}}},enumerable:false,configurable:true});Emph.prototype.italic=function(){return toggleMark(wr,Tr)};Emph.prototype.commands=function(){return{italic:this.italic()}};Emph.prototype.keymaps=function(){var e=this.italic()();return{"Mod-i":e,"Mod-I":e}};return Emph}(Wt);var kr=/^(`).*([\s\S]*)\1$/m;var xr="`";var Mr=function(e){__extends$1(Code,e);function Code(){return null!==e&&e.apply(this,arguments)||this}Object.defineProperty(Code.prototype,"name",{get:function(){return"code"},enumerable:false,configurable:true});Object.defineProperty(Code.prototype,"schema",{get:function(){return{attrs:{start:{default:false},end:{default:false},marked:{default:false}},toDOM:function(e){var t=e.attrs,r=t.start,n=t.end,a=t.marked;var o="code";r&&(o+="|delimiter|start");n&&(o+="|delimiter|end");a&&(o+="|marked-text");return["span",{class:clsWithMdPrefix.apply(void 0,o.split("|"))},0]}}},enumerable:false,configurable:true});Code.prototype.commands=function(){return toggleMark(kr,xr)};Code.prototype.keymaps=function(){var e=this.commands()();return{"Shift-Mod-c":e,"Shift-Mod-C":e}};return Code}(Wt);var Er=function(e){__extends$1(Link,e);function Link(){return null!==e&&e.apply(this,arguments)||this}Object.defineProperty(Link.prototype,"name",{get:function(){return"link"},enumerable:false,configurable:true});Object.defineProperty(Link.prototype,"schema",{get:function(){return{attrs:{url:{default:false},desc:{default:false}},toDOM:function(e){var t=e.attrs;var r=t.url,n=t.desc;var a="link";r&&(a+="|link-url|marked-text");n&&(a+="|link-desc|marked-text");return["span",{class:clsWithMdPrefix.apply(void 0,a.split("|"))},0]}}},enumerable:false,configurable:true});Link.prototype.addLinkOrImage=function(e){return function(t){return function(r,n){var a=r.selection,o=r.tr,i=r.schema;var s=resolveSelectionPos(a),l=s[0],u=s[1];var d=t,v=d.linkText,p=d.altText,f=d.linkUrl,m=d.imageUrl;var g=v;var y=f;var b="";if("image"===e){g=p;y=m;b="!"}g=escapeTextForLink(g);b+="["+g+"]("+y+")";n(o.replaceWith(l,u,createTextNode$1(i,b)));return true}}};Link.prototype.commands=function(){return{addImage:this.addLinkOrImage("image"),addLink:this.addLinkOrImage("link")}};return Link}(Wt);var Lr=function(e){__extends$1(TaskDelimiter,e);function TaskDelimiter(){return null!==e&&e.apply(this,arguments)||this}Object.defineProperty(TaskDelimiter.prototype,"name",{get:function(){return"taskDelimiter"},enumerable:false,configurable:true});Object.defineProperty(TaskDelimiter.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:clsWithMdPrefix("delimiter","list-item")},0]}}},enumerable:false,configurable:true});return TaskDelimiter}(Wt);var Nr=function(e){__extends$1(Delimiter,e);function Delimiter(){return null!==e&&e.apply(this,arguments)||this}Object.defineProperty(Delimiter.prototype,"name",{get:function(){return"delimiter"},enumerable:false,configurable:true});Object.defineProperty(Delimiter.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:clsWithMdPrefix("delimiter")},0]}}},enumerable:false,configurable:true});return Delimiter}(Wt);var Ir=function(e){__extends$1(Meta,e);function Meta(){return null!==e&&e.apply(this,arguments)||this}Object.defineProperty(Meta.prototype,"name",{get:function(){return"meta"},enumerable:false,configurable:true});Object.defineProperty(Meta.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:clsWithMdPrefix("meta")},0]}}},enumerable:false,configurable:true});return Meta}(Wt);var Sr=function(e){__extends$1(MarkedText,e);function MarkedText(){return null!==e&&e.apply(this,arguments)||this}Object.defineProperty(MarkedText.prototype,"name",{get:function(){return"markedText"},enumerable:false,configurable:true});Object.defineProperty(MarkedText.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:clsWithMdPrefix("marked-text")},0]}}},enumerable:false,configurable:true});return MarkedText}(Wt);var Or=function(e){__extends$1(TableCell,e);function TableCell(){return null!==e&&e.apply(this,arguments)||this}Object.defineProperty(TableCell.prototype,"name",{get:function(){return"tableCell"},enumerable:false,configurable:true});Object.defineProperty(TableCell.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:clsWithMdPrefix("table-cell")},0]}}},enumerable:false,configurable:true});return TableCell}(Wt);var Ar=function(e){__extends$1(Html,e);function Html(){return null!==e&&e.apply(this,arguments)||this}Object.defineProperty(Html.prototype,"name",{get:function(){return"html"},enumerable:false,configurable:true});Object.defineProperty(Html.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:clsWithMdPrefix("html")},0]}}},enumerable:false,configurable:true});return Html}(Wt);var Pr="$$";var Dr=function(e){__extends$1(CustomBlock,e);function CustomBlock(){return null!==e&&e.apply(this,arguments)||this}Object.defineProperty(CustomBlock.prototype,"name",{get:function(){return"customBlock"},enumerable:false,configurable:true});Object.defineProperty(CustomBlock.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:clsWithMdPrefix("custom-block")},0]}}},enumerable:false,configurable:true});CustomBlock.prototype.commands=function(){return function(e){return function(t,r){var n=t.selection,a=t.schema,o=t.tr;var i=getRangeInfo(n),s=i.startFromOffset,l=i.endToOffset;if(!(null===e||void 0===e?void 0:e.info))return false;var u=""+Pr+e.info;var d=createTextNode$1(a,u);var v=createTextNode$1(a,Pr);o.insert(s,d).split(s+u.length);o.split(o.mapping.map(l)).insert(o.mapping.map(l),v);r(o.setSelection(createTextSelection(o,o.mapping.map(l)-(Pr.length+2))));return true}}};return CustomBlock}(Wt);var Br=/x|backspace/i;var Rr=/^\[(\s*)(x?)(\s*)\](?:\s+)/i;function smartTask(e){var t=e.schema,r=e.toastMark;return new g({props:{handleDOMEvents:{keyup:function(e,n){var a;var o=e.state,i=o.doc,s=o.tr,l=o.selection;if(l.empty&&Br.test(n.key)){var u=getRangeInfo(l),d=u.startIndex,v=u.startFromOffset,p=u.from;var f=[d+1,p-v+1];var m=r.findNodeAtPosition(f);var g=findClosestNode(m,(function(e){var t;return"paragraph"===e.type&&"item"===(null===(t=e.parent)||void 0===t?void 0:t.type)}));if(null===(a=null===g||void 0===g?void 0:g.firstChild)||void 0===a?void 0:a.literal){var y=g.firstChild;var b=y.literal.match(Rr);if(b){var w=y.sourcepos[0];var T=b[1],C=b[2],k=b[3];var x=T.length+k.length;var M=getNodeContentOffsetRange(i,w[0]-1).startOffset;var E=w[1]+M;if(C){var L=x?x+1:0;s.replaceWith(E,L+E,t.text(C));e.dispatch(s)}else if(!x){s.insertText(" ",E);e.dispatch(s)}}}}return false}}}})}var Hr="cut";var _r=/\r\n|\n|\r/;var $r=function(t){__extends$1(MdEditor,t);function MdEditor(e,r){var n=t.call(this,e)||this;var a=r.toastMark,o=r.useCommandShortcut,i=void 0===o||o,s=r.mdPlugins,l=void 0===s?[]:s;n.editorType="markdown";n.el.classList.add("md-mode");n.toastMark=a;n.extraPlugins=l;n.specs=n.createSpecs();n.schema=n.createSchema();n.context=n.createContext();n.keymaps=n.createKeymaps(i);n.view=n.createView();n.commands=n.createCommands();n.specs.setContext(__assign$1(__assign$1({},n.context),{view:n.view}));n.createClipboard();n.eventEmitter.listen("changePreviewTabWrite",(function(e){return n.toggleActive(true,e)}));n.eventEmitter.listen("changePreviewTabPreview",(function(){return n.toggleActive(false)}));n.initEvent();return n}MdEditor.prototype.toggleActive=function(e,t){toggleClass(this.el,"active",e);e?t||this.focus():this.blur()};MdEditor.prototype.createClipboard=function(){var e=this;this.clipboard=document.createElement("textarea");this.clipboard.className=cls("pseudo-clipboard");this.clipboard.addEventListener("paste",(function(t){var r=t.clipboardData||window.clipboardData;var n=r&&r.items;if(n){var a=$e(n).some((function(e){return"string"===e.kind&&"text/rtf"===e.type}));if(!a){var o=pasteImageOnly(n);if(o){t.preventDefault();emitImageBlobHook(e.eventEmitter,o,t.type)}}}}));this.clipboard.addEventListener("input",(function(t){var r=t.target.value;e.replaceSelection(r);t.preventDefault();t.target.value=""}));this.el.insertBefore(this.clipboard,this.view.dom)};MdEditor.prototype.createContext=function(){return{toastMark:this.toastMark,schema:this.schema,eventEmitter:this.eventEmitter}};MdEditor.prototype.createSpecs=function(){return new Tt([new Ut,new nr,new gt,new ar,new ir,new zt,new lr,new Dr,new cr,new Or,new vr,new pr,new mr,new br,new Cr,new Mr,new Er,new Nr,new Lr,new Sr,new Ir,new Ar])};MdEditor.prototype.createPlugins=function(){return __spreadArray$1([syntaxHighlight(this.context),previewHighlight(this.context),smartTask(this.context)],this.createPluginProps()).concat(this.defaultPlugins)};MdEditor.prototype.createView=function(){var e=this;return new u(this.el,{state:this.createState(),dispatchTransaction:function(t){e.updateMarkdown(t);var r=e.view.state.applyTransaction(t).state;e.view.updateState(r);e.emitChangeEvent(t)},handleKeyDown:function(t,r){(r.metaKey||r.ctrlKey)&&"V"===r.key.toUpperCase()&&e.clipboard.focus();e.eventEmitter.emit("keydown",e.editorType,r);return false},handleDOMEvents:{copy:function(t,r){return e.captureCopy(r)},cut:function(t,r){return e.captureCopy(r,Hr)},scroll:function(){e.eventEmitter.emit("scroll","editor");return true},keyup:function(t,r){e.eventEmitter.emit("keyup",e.editorType,r);return false}},nodeViews:{widget:widgetNodeView}})};MdEditor.prototype.createCommands=function(){return this.specs.commands(this.view)};MdEditor.prototype.captureCopy=function(e,t){e.preventDefault();var r=this.view.state,n=r.selection,a=r.tr;if(n.empty)return true;var o=this.getChanged(n.content());e.clipboardData?e.clipboardData.setData("text/plain",o):window.clipboardData.setData("Text",o);t===Hr&&this.view.dispatch(a.deleteSelection().scrollIntoView().setMeta("uiEvent",Hr));return true};MdEditor.prototype.updateMarkdown=function(e){var t=this;e.docChanged&&e.steps.forEach((function(r,n){if(r.slice&&!(r instanceof d)){var a=e.docs[n];var o=[r.from,r.to],i=o[0],s=o[1];var l=getEditorToMdPos(a,i,s),u=l[0],v=l[1];var p=t.getChanged(r.slice);u[0]===v[0]&&u[1]===v[1]&&""===p&&(p="\n");var f=t.toastMark.editMarkdown(u,v,p);t.eventEmitter.emit("updatePreview",f);e.setMeta("editResult",f).scrollIntoView()}}))};MdEditor.prototype.getChanged=function(e){var t="";var r=0;var n=e.content.size;e.content.nodesBetween(r,n,(function(e,a){e.isText?t+=e.text.slice(Math.max(r,a)-a,n-a):e.isBlock&&a>0&&(t+="\n")}));return t};MdEditor.prototype.setSelection=function(e,t){void 0===t&&(t=e);var r=this.view.state.tr;var n=getMdToEditorPos(r.doc,e,t),a=n[0],o=n[1];this.view.dispatch(r.setSelection(createTextSelection(r,a,o)).scrollIntoView())};MdEditor.prototype.replaceSelection=function(t,n,a){var o;var i=this.view.state,s=i.tr,l=i.schema,u=i.doc;var d=t.split(_r);var v=d.map((function(e){return createParagraph(l,createNodesWithWidget(e,l))}));var p=new r(e.from(v),1,1);this.focus();if(n&&a){var f=getMdToEditorPos(u,n,a),m=f[0],g=f[1];o=s.replaceRange(m,g,p)}else o=s.replaceSelection(p);this.view.dispatch(o.scrollIntoView())};MdEditor.prototype.deleteSelection=function(e,t){var r;var n=this.view.state,a=n.tr,o=n.doc;if(e&&t){var i=getMdToEditorPos(o,e,t),s=i[0],l=i[1];r=a.deleteRange(s,l)}else r=a.deleteSelection();this.view.dispatch(r.scrollIntoView())};MdEditor.prototype.getSelectedText=function(e,t){var r=this.view.state,n=r.doc,a=r.selection;var o=a.from,i=a.to;if(e&&t){var s=getMdToEditorPos(n,e,t);o=s[0];i=s[1]}return n.textBetween(o,i,"\n")};MdEditor.prototype.getSelection=function(){var e=this.view.state.selection,t=e.from,r=e.to;return getEditorToMdPos(this.view.state.tr.doc,t,r)};MdEditor.prototype.setMarkdown=function(e,t){void 0===t&&(t=true);var r=e.split(_r);var n=this.view.state,a=n.tr,o=n.doc,i=n.schema;var s=r.map((function(e){return createParagraph(i,createNodesWithWidget(e,i))}));this.view.dispatch(a.replaceWith(0,o.content.size,s));t&&this.moveCursorToEnd(true)};MdEditor.prototype.addWidget=function(e,t,r){var n=this.view.state,a=n.tr,o=n.doc,i=n.selection;var s=r?getMdToEditorPos(o,r,r)[0]:i.to;this.view.dispatch(a.setMeta("widget",{pos:s,node:e,style:t}))};MdEditor.prototype.replaceWithWidget=function(e,t,r){var n=this.view.state,a=n.tr,o=n.schema,i=n.doc;var s=getMdToEditorPos(i,e,t);var l=createNodesWithWidget(r,o);this.view.dispatch(a.replaceWith(s[0],s[1],l))};MdEditor.prototype.getRangeInfoOfNode=function(e){var t=this.view.state,r=t.doc,n=t.selection;var a=e||getEditorToMdPos(r,n.from)[0];var o=this.toastMark.findNodeAtPosition(a);"text"===o.type&&"paragraph"!==o.parent.type&&(o=o.parent);o.sourcepos[1][1]+=1;return{range:o.sourcepos,type:o.type}};MdEditor.prototype.getMarkdown=function(){return this.toastMark.getLineTexts().map((function(e){return unwrapWidgetSyntax(e)})).join("\n")};MdEditor.prototype.getToastMark=function(){return this.toastMark};return MdEditor}(yt);var Fr="_feEventKey";
/**
 * Get event collection for specific HTML element
 * @param {HTMLElement} element - HTML element
 * @param {string} type - event type
 * @returns {array}
 * @private
 */function safeEvent$2(e,t){var r=e[Fr];var n;r||(r=e[Fr]={});n=r[t];n||(n=r[t]=[]);return n}var jr=safeEvent$2;var Ur=q;var Wr=Z;var qr=jr;
/**
 * Unbind DOM events
 * If a handler function is not passed, remove all events of that type.
 * @param {HTMLElement} element - element to unbind events
 * @param {(string|object)} types - Space splitted events names or eventName:handler object
 * @param {function} [handler] - handler function
 * @memberof module:domEvent
 * @example
 * // Following the example of domEvent#on
 * 
 * // Unbind one event from an element.
 * off(div, 'click', toggle);
 * 
 * // Unbind multiple events with a same handler from multiple elements at once.
 * // Use event names splitted by a space.
 * off(element, 'mouseenter mouseleave', changeColor);
 * 
 * // Unbind multiple events with different handlers from an element at once.
 * // Use an object which of key is an event name and value is a handler function.
 * off(div, {
 *   keydown: highlight,
 *   keyup: dehighlight
 * });
 * 
 * // Unbind events without handlers.
 * off(div, 'drag');
 */function off(e,t,r){Ur(t)?Wr(t.split(/\s+/g),(function(t){unbindEvent(e,t,r)})):Wr(t,(function(t,r){unbindEvent(e,r,t)}))}
/**
 * Unbind DOM events
 * If a handler function is not passed, remove all events of that type.
 * @param {HTMLElement} element - element to unbind events
 * @param {string} type - events name
 * @param {function} [handler] - handler function
 * @private
 */function unbindEvent(e,t,r){var n=qr(e,t);var a;if(r){Wr(n,(function(n,o){if(r===n.handler){removeHandler(e,t,n.wrappedHandler);a=o;return false}return true}));n.splice(a,1)}else{Wr(n,(function(r){removeHandler(e,t,r.wrappedHandler)}));n.splice(0,n.length)}}
/**
 * Remove an event handler
 * @param {HTMLElement} element - An element to remove an event
 * @param {string} type - event type
 * @param {function} handler - event handler
 * @private
 */function removeHandler(e,t,r){"removeEventListener"in e?e.removeEventListener(t,r):"detachEvent"in e&&e.detachEvent("on"+t,r)}var zr=off;var Vr=q;var Gr=Z;var Qr=jr;
/**
 * Bind DOM events.
 * @param {HTMLElement} element - element to bind events
 * @param {(string|object)} types - Space splitted events names or eventName:handler object
 * @param {(function|object)} handler - handler function or context for handler method
 * @param {object} [context] context - context for handler method.
 * @memberof module:domEvent
 * @example
 * const div = document.querySelector('div');
 * 
 * // Bind one event to an element.
 * on(div, 'click', toggle);
 * 
 * // Bind multiple events with a same handler to multiple elements at once.
 * // Use event names splitted by a space.
 * on(div, 'mouseenter mouseleave', changeColor);
 * 
 * // Bind multiple events with different handlers to an element at once.
 * // Use an object which of key is an event name and value is a handler function.
 * on(div, {
 *   keydown: highlight,
 *   keyup: dehighlight
 * });
 * 
 * // Set a context for handler method.
 * const name = 'global';
 * const repository = {name: 'CodeSnippet'};
 * on(div, 'drag', function() {
 *   console.log(this.name);
 * }, repository);
 * // Result when you drag a div: "CodeSnippet"
 */function on(e,t,r,n){Vr(t)?Gr(t.split(/\s+/g),(function(t){bindEvent(e,t,r,n)})):Gr(t,(function(t,n){bindEvent(e,n,t,r)}))}
/**
 * Bind DOM events
 * @param {HTMLElement} element - element to bind events
 * @param {string} type - events name
 * @param {function} handler - handler function or context for handler method
 * @param {object} [context] context - context for handler method.
 * @private
 */function bindEvent(e,t,r,n){
/**
     * Event handler
     * @param {Event} e - event object
     */
function eventHandler(t){r.call(n||e,t||window.event)}"addEventListener"in e?e.addEventListener(t,eventHandler):"attachEvent"in e&&e.attachEvent("on"+t,eventHandler);memorizeHandler(e,t,r,eventHandler)}
/**
 * Memorize DOM event handler for unbinding.
 * @param {HTMLElement} element - element to bind events
 * @param {string} type - events name
 * @param {function} handler - handler function that user passed at on() use
 * @param {function} wrappedHandler - handler function that wrapped by domevent for implementing some features
 * @private
 */function memorizeHandler(e,t,r,n){var a=Qr(e,t);var o=false;Gr(a,(function(e){if(e.handler===r){o=true;return false}return true}));o||a.push({handler:r,wrappedHandler:n})}var Xr=on;var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])};return extendStatics(e,t)};function __extends(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");extendStatics(e,t);function __(){this.constructor=e}e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}var __assign=function(){__assign=Object.assign||function __assign(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e};return __assign.apply(this,arguments)};function __spreadArray(e,t,r){if(r||2===arguments.length)for(var n,a=0,o=t.length;a<o;a++)if(n||!(a in t)){n||(n=Array.prototype.slice.call(t,0,a));n[a]=t[a]}return e.concat(n||Array.prototype.slice.call(t))}var Zr="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};var Kr={};function getEncodeCache(e){var t,r,n=Kr[e];if(n)return n;n=Kr[e]=[];for(t=0;t<128;t++){r=String.fromCharCode(t);/^[0-9a-z]$/i.test(r)?n.push(r):n.push("%"+("0"+t.toString(16).toUpperCase()).slice(-2))}for(t=0;t<e.length;t++)n[e.charCodeAt(t)]=e[t];return n}function encode$1(e,t,r){var n,a,o,i,s,l="";if("string"!==typeof t){r=t;t=encode$1.defaultChars}"undefined"===typeof r&&(r=true);s=getEncodeCache(t);for(n=0,a=e.length;n<a;n++){o=e.charCodeAt(n);if(r&&37===o&&n+2<a&&/^[0-9a-f]{2}$/i.test(e.slice(n+1,n+3))){l+=e.slice(n,n+3);n+=2}else if(o<128)l+=s[o];else if(o>=55296&&o<=57343){if(o>=55296&&o<=56319&&n+1<a){i=e.charCodeAt(n+1);if(i>=56320&&i<=57343){l+=encodeURIComponent(e[n]+e[n+1]);n++;continue}}l+="%EF%BF%BD"}else l+=encodeURIComponent(e[n])}return l}encode$1.defaultChars=";/?:@&=+$,-_.!~*'()#";encode$1.componentChars="-_.!~*'()";var Yr=encode$1;var Jr={};var en={};var tn="";var rn="";var nn="";var an="";var sn="";var ln="";var un="";var cn="";var dn="";var vn="";var pn="";var fn="";var hn="";var mn="";var gn="";var yn="";var bn="";var wn="";var Tn="";var Cn="";var kn="";var xn="";var Mn="";var En="";var Ln="";var Nn="";var In="&";var Sn="&";var On="";var An="";var Pn="";var Dn="";var Bn="";var Rn="";var Hn="";var _n="";var $n="";var Fn="";var jn="";var Un="";var Wn="";var qn="";var zn="";var Vn="";var Gn="";var Qn="";var Xn="";var Zn="";var Kn="";var Yn="";var Jn="";var ea="";var ta="";var ra="";var na="";var aa="";var oa="";var ia="";var sa="";var la="";var ua="";var ca="'";var da="";var va="";var pa="";var fa="";var ha="";var ma="";var ga="";var ya="";var ba="*";var wa="";var Ta="";var Ca="";var ka="";var xa="";var Ma="";var Ea="";var La="";var Na="";var Ia="";var Sa="";var Oa="";var Aa="";var Pa="";var Da="";var Ba="";var Ra="";var Ha="";var _a="";var $a="";var Fa="";var ja="";var Ua="";var Wa="";var qa="";var za="";var Va="";var Ga="";var Qa="";var Xa="";var Za="";var Ka="";var Ya="";var Ja="";var eo="";var to="";var ro="";var no="";var ao="";var oo="";var io="";var so="";var lo="";var uo="";var co="";var vo="";var po="";var fo="";var ho="";var mo="";var go="";var yo="";var bo="";var wo="";var To="";var Co="";var ko="";var xo="";var Mo="";var Eo="";var Lo="";var No="";var Io="";var So="=";var Oo="";var Ao="";var Po="";var Do="";var Bo="";var Ro="";var Ho="";var _o="";var $o="";var Fo="";var jo="";var Uo="";var Wo="";var qo="";var zo="";var Vo="";var Go="";var Qo="";var Xo="";var Zo="";var Ko="";var Yo="";var Jo="";var ei="";var ti="";var ri="";var ni="";var ai="";var oi="";var ii="";var si="";var li="";var ui="";var ci="";var di="";var vi="";var pi="";var fi="";var hi="";var mi="";var gi="";var yi="";var bi="";var wi="";var Ti="";var Ci="";var ki="";var xi="";var Mi="";var Ei="";var Li="";var Ni="";var Ii="";var Si="";var Oi="";var Ai="";var Pi="";var Di="";var Bi="";var Ri="";var Hi="";var _i="";var $i="\\";var Fi="";var ji="";var Ui="";var Wi="";var qi="";var zi="";var Vi="";var Gi="";var Qi="";var Xi="";var Zi="";var Ki="";var Yi="";var Ji="";var es="";var ts="";var rs="";var ns="";var as="";var os="";var is="";var ss="";var ls="";var us="";var cs="";var ds="";var vs="";var ps="";var fs="";var hs="";var ms="";var gs="";var ys="";var bs="";var ws="";var Ts="";var Cs="";var ks="";var xs="";var Ms="";var Es="";var Ls="";var Ns="";var Is="";var Ss="";var Os="";var As="";var Ps="";var Ds="";var Bs="";var Rs="";var Hs="";var _s="";var $s="";var Fs="";var js="";var Us="";var Ws="";var qs="";var zs="";var Vs="";var Gs="";var Qs="";var Xs="";var Zs="";var Ks="";var Ys="";var Js="";var el="";var tl="";var rl="";var nl="";var al=":";var ol="";var il="";var sl="";var ll="";var ul=",";var cl="@";var dl="";var vl="";var pl="";var fl="";var hl="";var ml="";var gl="";var yl="";var bl="";var wl="";var Tl="";var Cl="";var kl="";var xl="";var Ml="";var El="";var Ll="";var Nl="";var Il="";var Sl="";var Ol="";var Al="";var Pl="";var Dl="";var Bl="";var Rl="";var Hl="";var _l="";var $l="";var Fl="";var jl="";var Ul="";var Wl="";var ql="";var zl="";var Vl="";var Gl="";var Ql="";var Xl="";var Zl="";var Kl="";var Yl="";var Jl="";var eu="";var tu="";var ru="";var nu="";var au="";var ou="";var iu="";var su="";var lu="";var uu="";var cu="";var du="";var vu="";var pu="";var fu="";var hu="";var mu="";var gu="";var yu="";var bu="";var wu="";var Tu="";var Cu="";var ku="";var xu="";var Mu="";var Eu="";var Lu="";var Nu="";var Iu="";var Su="";var Ou="";var Au="";var Pu="";var Du="";var Bu="";var Ru="";var Hu="";var _u="";var $u="";var Fu="";var ju="";var Uu="";var Wu="";var qu="";var zu="";var Vu="";var Gu="";var Qu="";var Xu="`";var Zu="";var Ku="";var Yu="";var Ju="";var ec="";var tc="";var rc="";var nc="";var ac="";var oc="";var ic="";var sc="";var lc="";var uc="";var cc="";var dc="";var vc="";var pc="";var fc="$";var hc="";var mc="";var gc="";var yc="";var bc="";var wc="";var Tc="";var Cc="";var kc="";var xc="";var Mc="";var Ec="";var Lc="";var Nc="";var Ic="";var Sc="";var Oc="";var Ac="";var Pc="";var Dc="";var Bc="";var Rc="";var Hc="";var _c="";var $c="";var Fc="";var jc="";var Uc="";var Wc="";var qc="";var zc="";var Vc="";var Gc="";var Qc="";var Xc="";var Zc="";var Kc="";var Yc="";var Jc="";var ed="";var td="";var rd="";var nd="";var ad="";var od="";var id="";var sd="";var ld="";var ud="";var cd="";var dd="";var vd="";var pd="";var fd="";var hd="";var md="";var gd="";var yd="";var bd="";var wd="";var Td="";var Cd="";var kd="";var xd="";var Md="";var Ed="";var Ld="";var Nd="";var Id="";var Sd="";var Od="";var Ad="";var Pd="";var Dd="";var Bd="";var Rd="";var Hd="";var _d="";var $d="";var Fd="";var jd="";var Ud="";var Wd="";var qd="";var zd="";var Vd="";var Gd="";var Qd="";var Xd="";var Zd="";var Kd="";var Yd="";var Jd="";var ev="";var tv="";var rv="";var nv="";var av="";var ov="";var iv="";var sv="";var lv="";var uv="";var cv="";var dv="";var vv="";var pv="";var fv="";var hv="";var mv="";var gv="";var yv="";var bv="";var wv="";var Tv="";var Cv="";var kv="";var xv="";var Mv="";var Ev="";var Lv="";var Nv="";var Iv="";var Sv="=";var Ov="";var Av="";var Pv="";var Dv="";var Bv="";var Rv="";var Hv="";var _v="";var $v="";var Fv="";var jv="";var Uv="";var Wv="";var qv="";var zv="";var Vv="";var Gv="";var Qv="";var Xv="";var Zv="";var Kv="!";var Yv="";var Jv="";var ep="";var tp="";var rp="";var np="";var ap="";var op="";var ip="";var sp="";var lp="";var up="";var cp="";var dp="";var vp="";var pp="";var fp="";var hp="fj";var mp="";var gp="";var yp="";var bp="";var wp="";var Tp="";var Cp="";var kp="";var xp="";var Mp="";var Ep="";var Lp="";var Np="";var Ip="";var Sp="";var Op="";var Ap="";var Pp="";var Dp="";var Bp="";var Rp="";var Hp="";var _p="";var $p="";var Fp="";var jp="";var Up="";var Wp="";var qp="";var zp="";var Vp="";var Gp="";var Qp="";var Xp="";var Zp="";var Kp="";var Yp="";var Jp="";var ef="";var tf="";var rf="";var nf="";var af="";var of="";var sf="";var lf="";var uf="";var cf="";var df="";var vf="";var pf="";var ff="";var hf="";var mf="";var gf="";var yf="";var bf="";var wf="";var Tf="";var Cf="";var kf="";var xf="";var Mf="";var Ef="";var Lf="";var Nf="";var If="";var Sf="";var Of="";var Af="";var Pf="";var Df="";var Bf="";var Rf="";var Hf="";var _f="";var $f="";var Ff="";var jf="";var Uf="";var Wf="";var qf="`";var zf="";var Vf="";var Gf="";var Qf="";var Xf="";var Zf="";var Kf="";var Yf="";var Jf="";var eh="";var th="";var rh="";var nh="";var ah="";var oh=">";var ih=">";var sh="";var lh="";var uh="";var ch="";var dh="";var vh="";var ph="";var fh="";var hh="";var mh="";var gh="";var yh="";var bh="";var wh="";var Th="";var Ch="";var kh="";var xh="";var Mh="";var Eh="";var Lh="";var Nh="";var Ih="";var Sh="^";var Oh="";var Ah="";var Ph="";var Dh="";var Bh="";var Rh="";var Hh="";var _h="";var $h="";var Fh="";var jh="";var Uh="";var Wh="";var qh="";var zh="";var Vh="";var Gh="";var Qh="";var Xh="";var Zh="";var Kh="";var Yh="";var Jh="";var em="";var tm="";var rm="";var nm="";var am="";var om="";var im="";var sm="";var lm="";var um="";var cm="";var dm="";var vm="";var pm="";var fm="";var hm="";var mm="";var gm="";var ym="";var bm="";var wm="";var Tm="";var Cm="";var km="";var xm="";var Mm="";var Em="";var Lm="";var Nm="";var Im="";var Sm="";var Om="";var Am="";var Pm="";var Dm="";var Bm="";var Rm="";var Hm="";var _m="";var $m="";var Fm="";var jm="";var Um="";var Wm="";var qm="";var zm="";var Vm="";var Gm="";var Qm="";var Xm="";var Zm="";var Km="";var Ym="";var Jm="";var eg="";var tg="";var rg="";var ng="";var ag="";var og="";var ig="";var sg="";var lg="";var ug="";var cg="";var dg="";var vg="";var pg="";var fg="";var hg="";var mg="";var gg="";var yg="";var bg="";var wg="";var Tg="";var Cg="";var kg="";var xg="";var Mg="";var Eg="";var Lg="";var Ng="";var Ig="";var Sg="";var Og="";var Ag="";var Pg="";var Dg="";var Bg="";var Rg="";var Hg="";var _g="";var $g="";var Fg="";var jg="";var Ug="";var Wg="";var qg="";var zg="";var Vg="";var Gg="";var Qg="";var Xg="";var Zg="";var Kg="";var Yg="";var Jg="";var ey="";var ty="";var ry="";var ny="";var ay="";var oy="";var iy="";var sy="";var ly="";var uy="";var cy="";var dy="";var vy="";var py="";var fy="";var hy="";var my="";var gy="";var yy="";var by="";var wy="";var Ty="";var Cy="";var ky="";var xy="";var My="";var Ey="";var Ly="";var Ny="";var Iy="";var Sy="";var Oy="";var Ay="";var Py="";var Dy="";var By="";var Ry="";var Hy="";var _y="{";var $y="[";var Fy="";var jy="";var Uy="";var Wy="";var qy="";var zy="";var Vy="";var Gy="";var Qy="{";var Xy="";var Zy="";var Ky="";var Yy="";var Jy="";var eb="";var tb="";var rb="";var nb="";var ab="";var ob="";var ib="";var sb="";var lb="";var ub="";var cb="";var db="";var vb="";var pb="";var fb="";var hb="";var mb="";var gb="";var yb="";var bb="";var wb="";var Tb="";var Cb="";var kb="";var xb="";var Mb="";var Eb="";var Lb="";var Nb="";var Ib="";var Sb="";var Ob="";var Ab="";var Pb="";var Db="";var Bb="";var Rb="";var Hb="";var _b="";var $b="";var Fb="";var jb="";var Ub="";var Wb="";var qb="";var zb="";var Vb="";var Gb="";var Qb="";var Xb="";var Zb="";var Kb="";var Yb="";var Jb="";var ew="";var tw="";var rw="";var nw="";var aw="";var ow="";var iw="";var sw="";var lw="";var uw="";var cw="";var dw="";var vw="";var pw="";var fw="";var hw="";var mw="";var gw="";var yw="";var bw="";var ww="";var Tw="";var Cw="";var kw="";var xw="";var Mw="";var Ew="";var Lw="";var Nw="";var Iw="";var Sw="";var Ow="";var Aw="";var Pw="";var Dw="";var Bw="";var Rw="";var Hw="";var _w="";var $w="";var Fw="";var jw="";var Uw="";var Ww="";var qw="";var zw="";var Vw="";var Gw="";var Qw="";var Xw="";var Zw="";var Kw="";var Yw="";var Jw="";var eT="";var tT="";var rT="";var nT="";var aT="";var oT="";var iT="";var sT="";var lT="";var uT="_";var cT="";var dT="";var vT="";var pT="";var fT="";var hT="(";var mT="";var gT="";var yT="";var bT="";var wT="";var TT="";var CT="";var kT="";var xT="";var MT="";var ET="";var LT="";var NT="";var IT="";var ST="";var OT="[";var AT="";var PT="";var DT="";var BT="";var RT="";var HT="";var _T="<";var $T="<";var FT="";var jT="";var UT="";var WT="";var qT="";var zT="";var VT="";var GT="";var QT="";var XT="";var ZT="";var KT="";var YT="";var JT="";var eC="";var tC="";var rC="";var nC="";var aC="";var oC="";var iC="";var sC="";var lC="";var uC="";var cC="";var dC="";var vC="";var pC="";var fC="";var hC="";var mC="";var gC="";var yC="";var bC="";var wC="";var TC="";var CC="*";var kC="";var xC="";var MC="";var EC="";var LC="";var NC="";var IC="";var SC="";var OC="";var AC="";var PC="";var DC="";var BC="";var RC="";var HC="";var _C="";var $C="";var FC="";var jC="";var UC="";var WC="";var qC="";var zC="";var VC="";var GC="";var QC="";var XC="";var ZC="";var KC="";var YC="";var JC="";var ek="";var tk="";var rk="";var nk="";var ak="";var ok="";var ik="";var sk="";var lk="";var uk="";var ck="";var dk="";var vk="";var pk="";var fk="";var hk="";var mk="";var gk="";var yk="";var bk="";var wk="";var Tk="";var Ck="";var kk="";var xk="";var Mk="";var Ek="";var Lk="";var Nk="";var Ik="";var Sk="";var Ok="";var Ak="\n";var Pk="";var Dk="";var Bk="";var Rk="";var Hk="";var _k="";var $k="";var Fk="";var jk="";var Uk="";var Wk="";var qk="";var zk="";var Vk="";var Gk="";var Qk="";var Xk="";var Zk="";var Kk="";var Yk="";var Jk="";var ex="";var tx="";var rx="";var nx="";var ax="";var ox="";var ix="";var sx="";var lx="";var ux="";var cx="";var dx="";var vx="";var px="";var fx="";var hx="";var mx="";var gx="";var yx="";var bx="";var wx="";var Tx="";var Cx="";var kx="";var xx="";var Mx="";var Ex="";var Lx="";var Nx="";var Ix="";var Sx="";var Ox="";var Ax="";var Px="";var Dx="";var Bx="";var Rx="";var Hx="";var _x="";var $x="";var Fx="";var jx="";var Ux="";var Wx="";var qx="";var zx="";var Vx="";var Gx="";var Qx="";var Xx="";var Zx="";var Kx="";var Yx="";var Jx="";var eM="";var tM="";var rM="";var nM="";var aM="";var oM="";var iM="";var sM="";var lM="";var uM="";var cM="";var dM="";var vM="";var pM="";var fM="";var hM="";var mM="";var gM="";var yM="";var bM="";var wM="";var TM="";var CM="";var kM="";var xM="";var MM="";var EM="";var LM="";var NM="";var IM="";var SM="";var OM="";var AM="";var PM="";var DM="";var BM="";var RM="";var HM="";var _M="";var $M="";var FM="";var jM="";var UM="";var WM="";var qM="";var zM="";var VM="";var GM="";var QM="";var XM="";var ZM="";var KM="";var YM="";var JM="";var eE="";var tE="";var rE="";var nE="";var aE="";var oE="";var iE="";var sE="";var lE="";var uE="";var cE="";var dE="";var vE="";var pE="";var fE="";var hE="";var mE="";var gE="";var yE="";var bE="";var wE="";var TE="";var CE="";var kE="";var xE="";var ME="";var EE="";var LE="";var NE="";var IE="";var SE="";var OE="";var AE="";var PE="";var DE="";var BE="";var RE="";var HE="";var _E="";var $E="";var FE="";var jE="#";var UE="";var WE="";var qE="";var zE="";var VE="";var GE="";var QE="";var XE="";var ZE=">";var KE="";var YE="";var JE="";var eL="";var tL="<";var rL="";var nL="";var aL="";var oL="";var iL="";var sL="";var lL="";var uL="";var cL="";var dL="";var vL="";var pL="";var fL="";var hL="";var mL="";var gL="";var yL="";var bL="";var wL="";var TL="";var CL="";var kL="";var xL="";var ML="";var EL="";var LL="";var NL="";var IL="";var SL="";var OL="";var AL="";var PL="";var DL="";var BL="";var RL="";var HL="";var _L="";var $L="";var FL="";var jL="";var UL="";var WL="";var qL="";var zL="";var VL="";var GL="";var QL="";var XL="";var ZL="";var KL="";var YL="";var JL="";var eN="";var tN="";var rN="";var nN="";var aN="";var oN="";var iN="";var sN="";var lN="";var uN="";var cN="";var dN="";var vN="";var pN="";var fN="";var hN="";var mN="";var gN="";var yN="";var bN="";var wN="";var TN="";var CN="";var kN="";var xN="";var MN="";var EN="";var LN="";var NN="";var IN="";var SN="";var ON="";var AN="";var PN="";var DN="";var BN="";var RN="";var HN="";var _N="";var $N="";var FN="";var jN="";var UN="%";var WN=".";var qN="";var zN="";var VN="";var GN="";var QN="";var XN="";var ZN="";var KN="";var YN="";var JN="";var eI="";var tI="";var rI="";var nI="";var aI="";var oI="";var iI="";var sI="";var lI="";var uI="";var cI="+";var dI="";var vI="";var pI="";var fI="";var hI="";var mI="";var gI="";var yI="";var bI="";var wI="";var TI="";var CI="";var kI="";var xI="";var MI="";var EI="";var LI="";var NI="";var II="";var SI="";var OI="";var AI="";var PI="";var DI="";var BI="";var RI="";var HI="";var _I="";var $I="";var FI="";var jI="";var UI="";var WI="";var qI="";var zI="";var VI="";var GI="";var QI="";var XI="";var ZI="";var KI="";var YI="";var JI="";var eS="";var tS="";var rS="";var nS="";var aS="";var oS="";var iS="";var sS="";var lS="";var uS="";var cS="";var dS="";var vS="";var pS="";var fS="";var hS="";var mS="";var gS="";var yS="";var bS="";var wS="?";var TS="";var CS='"';var kS='"';var xS="";var MS="";var ES="";var LS="";var NS="";var IS="";var SS="";var OS="";var AS="";var PS="";var DS="";var BS="";var RS="";var HS="";var _S="";var $S="";var FS="";var jS="";var US="";var WS="";var qS="";var zS="";var VS="";var GS="";var QS="";var XS="";var ZS="";var KS="";var YS="";var JS="";var eO="";var tO="";var rO="";var nO="";var aO="";var oO="}";var iO="]";var sO="";var lO="";var uO="";var cO="";var dO="";var vO="";var pO="";var fO="";var hO="}";var mO="";var gO="";var yO="";var bO="";var wO="";var TO="";var CO="";var kO="";var xO="";var MO="";var EO="";var LO="";var NO="";var IO="";var SO="";var OO="";var AO="";var PO="";var DO="";var BO="";var RO="";var HO="";var _O="";var $O="";var FO="";var jO="";var UO="";var WO="";var qO="";var zO="";var VO="";var GO="";var QO="";var XO="";var ZO="";var KO="";var YO="";var JO="";var eA="";var tA="";var rA="";var nA="";var aA="";var oA="";var iA="";var sA="";var lA="";var uA="";var cA="";var dA="";var vA="";var pA="";var fA="";var hA="";var mA="";var gA="";var yA="";var bA="";var wA="";var TA="";var CA="";var kA="";var xA="";var MA="";var EA="";var LA="";var NA="";var IA="";var SA="";var OA="";var AA="";var PA="";var DA="";var BA="";var RA="";var HA="";var _A="";var $A="";var FA=")";var jA="";var UA="";var WA="";var qA="";var zA="";var VA="";var GA="";var QA="";var XA="";var ZA="]";var KA="";var YA="";var JA="";var eP="";var tP="";var rP="";var nP="";var aP="";var oP="";var iP="";var sP="";var lP="";var uP="";var cP="";var dP="";var vP="";var pP="";var fP="";var hP="";var mP="";var gP="";var yP="";var bP="";var wP="";var TP="";var CP="";var kP="";var xP="";var MP="";var EP="";var LP="";var NP="";var IP="";var SP="";var OP="";var AP="";var PP="";var DP="";var BP="";var RP="";var HP="";var _P=";";var $P="";var FP="";var jP="";var UP="";var WP="";var qP="";var zP="";var VP="";var GP="";var QP="";var XP="";var ZP="";var KP="";var YP="";var JP="";var eD="";var tD="";var rD="";var nD="";var aD="";var oD="";var iD="";var sD="";var lD="";var uD="";var cD="";var dD="";var vD="";var pD="";var fD="";var hD="";var mD="";var gD="";var yD="";var bD="";var wD="";var TD="";var CD="";var kD="";var xD="";var MD="";var ED="";var LD="";var ND="";var ID="";var SD="";var OD="";var AD="";var PD="/";var DD="";var BD="";var RD="";var HD="";var _D="";var $D="";var FD="";var jD="";var UD="";var WD="";var qD="";var zD="";var VD="";var GD="";var QD="";var XD="";var ZD="";var KD="";var YD="";var JD="";var eB="";var tB="";var rB="";var nB="";var aB="";var oB="";var iB="";var sB="";var lB="";var uB="";var cB="";var dB="";var vB="";var pB="";var fB="";var hB="";var mB="";var gB="";var yB="";var bB="";var wB="";var TB="";var CB="";var kB="";var xB="";var MB="";var EB="";var LB="";var NB="";var IB="";var SB="";var OB="";var AB="";var PB="";var DB="";var BB="";var RB="";var HB="";var _B="";var $B="";var FB="";var jB="";var UB="";var WB="";var qB="";var zB="";var VB="";var GB="";var QB="";var XB="";var ZB="";var KB="";var YB="";var JB="";var eR="";var tR="";var rR="";var nR="";var aR="";var oR="";var iR="";var sR="";var lR="";var uR="";var cR="";var dR="";var vR="";var pR="";var fR="";var hR="";var mR="";var gR="";var yR="";var bR="";var wR="";var TR="";var CR="";var kR="";var xR="";var MR="";var ER="";var LR="";var NR="";var IR="";var SR="";var OR="";var AR="";var PR="";var DR="";var BR="";var RR="";var HR="";var _R="\t";var $R="";var FR="";var jR="";var UR="";var WR="";var qR="";var zR="";var VR="";var GR="";var QR="";var XR="";var ZR="";var KR="";var YR="";var JR="";var eH="";var tH="";var rH="";var nH="";var aH="";var oH="";var iH="";var sH="";var lH="";var uH="";var cH="";var dH="";var vH="";var pH="";var fH="";var hH="";var mH="";var gH="";var yH="";var bH="";var wH="";var TH="";var CH="";var kH="";var xH="";var MH="";var EH="";var LH="";var NH="";var IH="";var SH="";var OH="";var AH="";var PH="";var DH="";var BH="";var RH="";var HH="";var _H="";var $H="";var FH="";var jH="";var UH="";var WH="";var qH="";var zH="";var VH="";var GH="";var QH="";var XH="";var ZH="";var KH="";var YH="";var JH="";var e_="";var t_="";var r_="";var n_="";var a_="";var o_="";var i_="";var s_="";var l_="";var u_="";var c_="";var d_="";var v_="";var p_="";var f_="";var h_="";var m_="";var g_="";var y_="";var b_="";var w_="";var T_="";var C_="";var k_="";var x_="";var M_="";var E_="";var L_="";var N_="";var I_="";var S_="";var O_="";var A_="";var P_="";var D_="";var B_="";var R_="";var H_="";var $_="";var F_="";var j_="";var U_="";var W_="_";var q_="";var z_="";var V_="";var G_="";var Q_="";var X_="";var Z_="";var K_="";var Y_="";var J_="";var e$="";var t$="";var r$="";var n$="";var a$="";var o$="";var i$="";var s$="";var l$="";var u$="";var c$="";var d$="";var v$="";var p$="";var f$="";var h$="";var m$="";var g$="";var y$="";var b$="";var w$="";var T$="";var C$="";var k$="";var x$="";var M$="";var E$="";var L$="";var N$="";var I$="";var S$="";var O$="";var A$="";var P$="";var D$="";var B$="";var R$="";var H$="";var _$="";var $$="";var F$="";var j$="";var U$="";var W$="";var q$="";var z$="";var V$="";var G$="";var Q$="";var X$="";var Z$="";var K$="";var Y$="";var J$="";var eF="";var tF="";var rF="";var nF="";var aF="";var oF="";var iF="";var sF="";var lF="";var uF="";var cF="";var dF="";var vF="";var pF="";var fF="";var hF="";var mF="";var gF="|";var yF="";var bF="|";var wF="";var TF="";var CF="|";var kF="";var xF="";var MF="";var EF="";var LF="";var NF="";var IF="";var SF="";var OF="";var AF="";var PF="";var DF="";var BF="";var RF="";var HF="";var _F="";var $F="";var FF="";var jF="";var UF="";var WF="";var qF="";var zF="";var VF="";var GF="";var QF="";var XF="";var ZF="";var KF="";var YF="";var JF="";var ej="";var tj="";var rj="";var nj="";var aj="";var oj="";var ij="";var sj="";var lj="";var uj="";var cj="";var dj="";var vj="";var pj="";var fj="";var hj="";var mj="";var gj="";var yj="";var bj="";var wj="";var Tj="";var Cj="";var kj="";var xj="";var Mj="";var Ej="";var Lj="";var Nj="";var Ij="";var Sj="";var Oj="";var Aj="";var Pj="";var Dj="";var Bj="";var Rj="";var Hj="";var _j="";var $j="";var Fj="";var jj="";var Uj="";var Wj="";var qj="";var zj="";var Vj="";var Gj="";var Qj="";var Xj="";var Zj="";var Kj="";var Yj="";var Jj="";var eU="";var tU="";var rU="";var nU="";var aU="";var oU="";var iU="";var sU="";var lU="";var uU="";var cU="";var dU="";var vU="";var pU="";var fU="";var hU="";var mU="";var gU="";var yU="";var bU="";var wU="";var TU="";var CU="";var kU={Aacute:tn,aacute:rn,Abreve:nn,abreve:an,ac:sn,acd:ln,acE:un,Acirc:cn,acirc:dn,acute:vn,Acy:pn,acy:fn,AElig:hn,aelig:mn,af:gn,Afr:yn,afr:bn,Agrave:wn,agrave:Tn,alefsym:Cn,aleph:kn,Alpha:xn,alpha:Mn,Amacr:En,amacr:Ln,amalg:Nn,amp:In,AMP:Sn,andand:On,And:An,and:Pn,andd:Dn,andslope:Bn,andv:Rn,ang:Hn,ange:_n,angle:$n,angmsdaa:Fn,angmsdab:jn,angmsdac:Un,angmsdad:Wn,angmsdae:qn,angmsdaf:zn,angmsdag:Vn,angmsdah:Gn,angmsd:Qn,angrt:Xn,angrtvb:Zn,angrtvbd:Kn,angsph:Yn,angst:Jn,angzarr:ea,Aogon:ta,aogon:ra,Aopf:na,aopf:aa,apacir:oa,ap:ia,apE:sa,ape:la,apid:ua,apos:ca,ApplyFunction:da,approx:va,approxeq:pa,Aring:fa,aring:ha,Ascr:ma,ascr:ga,Assign:ya,ast:ba,asymp:wa,asympeq:Ta,Atilde:Ca,atilde:ka,Auml:xa,auml:Ma,awconint:Ea,awint:La,backcong:Na,backepsilon:Ia,backprime:Sa,backsim:Oa,backsimeq:Aa,Backslash:Pa,Barv:Da,barvee:Ba,barwed:Ra,Barwed:Ha,barwedge:_a,bbrk:$a,bbrktbrk:Fa,bcong:ja,Bcy:Ua,bcy:Wa,bdquo:qa,becaus:za,because:Va,Because:Ga,bemptyv:Qa,bepsi:Xa,bernou:Za,Bernoullis:Ka,Beta:Ya,beta:Ja,beth:eo,between:to,Bfr:ro,bfr:no,bigcap:ao,bigcirc:oo,bigcup:io,bigodot:so,bigoplus:lo,bigotimes:uo,bigsqcup:co,bigstar:vo,bigtriangledown:po,bigtriangleup:fo,biguplus:ho,bigvee:mo,bigwedge:go,bkarow:yo,blacklozenge:bo,blacksquare:wo,blacktriangle:To,blacktriangledown:Co,blacktriangleleft:ko,blacktriangleright:xo,blank:Mo,blk12:Eo,blk14:Lo,blk34:No,block:Io,bne:So,bnequiv:Oo,bNot:Ao,bnot:Po,Bopf:Do,bopf:Bo,bot:Ro,bottom:Ho,bowtie:_o,boxbox:$o,boxdl:Fo,boxdL:jo,boxDl:Uo,boxDL:Wo,boxdr:qo,boxdR:zo,boxDr:Vo,boxDR:Go,boxh:Qo,boxH:Xo,boxhd:Zo,boxHd:Ko,boxhD:Yo,boxHD:Jo,boxhu:ei,boxHu:ti,boxhU:ri,boxHU:ni,boxminus:ai,boxplus:oi,boxtimes:ii,boxul:si,boxuL:li,boxUl:ui,boxUL:ci,boxur:di,boxuR:vi,boxUr:pi,boxUR:fi,boxv:hi,boxV:mi,boxvh:gi,boxvH:yi,boxVh:bi,boxVH:wi,boxvl:Ti,boxvL:Ci,boxVl:ki,boxVL:xi,boxvr:Mi,boxvR:Ei,boxVr:Li,boxVR:Ni,bprime:Ii,breve:Si,Breve:Oi,brvbar:Ai,bscr:Pi,Bscr:Di,bsemi:Bi,bsim:Ri,bsime:Hi,bsolb:_i,bsol:$i,bsolhsub:Fi,bull:ji,bullet:Ui,bump:Wi,bumpE:qi,bumpe:zi,Bumpeq:Vi,bumpeq:Gi,Cacute:Qi,cacute:Xi,capand:Zi,capbrcup:Ki,capcap:Yi,cap:Ji,Cap:es,capcup:ts,capdot:rs,CapitalDifferentialD:ns,caps:as,caret:os,caron:is,Cayleys:ss,ccaps:ls,Ccaron:us,ccaron:cs,Ccedil:ds,ccedil:vs,Ccirc:ps,ccirc:fs,Cconint:hs,ccups:ms,ccupssm:gs,Cdot:ys,cdot:bs,cedil:ws,Cedilla:Ts,cemptyv:Cs,cent:ks,centerdot:xs,CenterDot:Ms,cfr:Es,Cfr:Ls,CHcy:Ns,chcy:Is,check:Ss,checkmark:Os,Chi:As,chi:Ps,circ:Ds,circeq:Bs,circlearrowleft:Rs,circlearrowright:Hs,circledast:_s,circledcirc:$s,circleddash:Fs,CircleDot:js,circledR:Us,circledS:Ws,CircleMinus:qs,CirclePlus:zs,CircleTimes:Vs,cir:Gs,cirE:Qs,cire:Xs,cirfnint:Zs,cirmid:Ks,cirscir:Ys,ClockwiseContourIntegral:Js,CloseCurlyDoubleQuote:el,CloseCurlyQuote:tl,clubs:rl,clubsuit:nl,colon:al,Colon:ol,Colone:il,colone:sl,coloneq:ll,comma:ul,commat:cl,comp:dl,compfn:vl,complement:pl,complexes:fl,cong:hl,congdot:ml,Congruent:gl,conint:yl,Conint:bl,ContourIntegral:wl,copf:Tl,Copf:Cl,coprod:kl,Coproduct:xl,copy:Ml,COPY:El,copysr:Ll,CounterClockwiseContourIntegral:Nl,crarr:Il,cross:Sl,Cross:Ol,Cscr:Al,cscr:Pl,csub:Dl,csube:Bl,csup:Rl,csupe:Hl,ctdot:_l,cudarrl:$l,cudarrr:Fl,cuepr:jl,cuesc:Ul,cularr:Wl,cularrp:ql,cupbrcap:zl,cupcap:Vl,CupCap:Gl,cup:Ql,Cup:Xl,cupcup:Zl,cupdot:Kl,cupor:Yl,cups:Jl,curarr:eu,curarrm:tu,curlyeqprec:ru,curlyeqsucc:nu,curlyvee:au,curlywedge:ou,curren:iu,curvearrowleft:su,curvearrowright:lu,cuvee:uu,cuwed:cu,cwconint:du,cwint:vu,cylcty:pu,dagger:fu,Dagger:hu,daleth:mu,darr:gu,Darr:yu,dArr:bu,dash:wu,Dashv:Tu,dashv:Cu,dbkarow:ku,dblac:xu,Dcaron:Mu,dcaron:Eu,Dcy:Lu,dcy:Nu,ddagger:Iu,ddarr:Su,DD:Ou,dd:Au,DDotrahd:Pu,ddotseq:Du,deg:Bu,Del:Ru,Delta:Hu,delta:_u,demptyv:$u,dfisht:Fu,Dfr:ju,dfr:Uu,dHar:Wu,dharl:qu,dharr:zu,DiacriticalAcute:Vu,DiacriticalDot:Gu,DiacriticalDoubleAcute:Qu,DiacriticalGrave:Xu,DiacriticalTilde:Zu,diam:Ku,diamond:Yu,Diamond:Ju,diamondsuit:ec,diams:tc,die:rc,DifferentialD:nc,digamma:ac,disin:oc,div:ic,divide:sc,divideontimes:lc,divonx:uc,DJcy:cc,djcy:dc,dlcorn:vc,dlcrop:pc,dollar:fc,Dopf:hc,dopf:mc,Dot:gc,dot:yc,DotDot:bc,doteq:wc,doteqdot:Tc,DotEqual:Cc,dotminus:kc,dotplus:xc,dotsquare:Mc,doublebarwedge:Ec,DoubleContourIntegral:Lc,DoubleDot:Nc,DoubleDownArrow:Ic,DoubleLeftArrow:Sc,DoubleLeftRightArrow:Oc,DoubleLeftTee:Ac,DoubleLongLeftArrow:Pc,DoubleLongLeftRightArrow:Dc,DoubleLongRightArrow:Bc,DoubleRightArrow:Rc,DoubleRightTee:Hc,DoubleUpArrow:_c,DoubleUpDownArrow:$c,DoubleVerticalBar:Fc,DownArrowBar:jc,downarrow:Uc,DownArrow:Wc,Downarrow:qc,DownArrowUpArrow:zc,DownBreve:Vc,downdownarrows:Gc,downharpoonleft:Qc,downharpoonright:Xc,DownLeftRightVector:Zc,DownLeftTeeVector:Kc,DownLeftVectorBar:Yc,DownLeftVector:Jc,DownRightTeeVector:ed,DownRightVectorBar:td,DownRightVector:rd,DownTeeArrow:nd,DownTee:ad,drbkarow:od,drcorn:id,drcrop:sd,Dscr:ld,dscr:ud,DScy:cd,dscy:dd,dsol:vd,Dstrok:pd,dstrok:fd,dtdot:hd,dtri:md,dtrif:gd,duarr:yd,duhar:bd,dwangle:wd,DZcy:Td,dzcy:Cd,dzigrarr:kd,Eacute:xd,eacute:Md,easter:Ed,Ecaron:Ld,ecaron:Nd,Ecirc:Id,ecirc:Sd,ecir:Od,ecolon:Ad,Ecy:Pd,ecy:Dd,eDDot:Bd,Edot:Rd,edot:Hd,eDot:_d,ee:$d,efDot:Fd,Efr:jd,efr:Ud,eg:Wd,Egrave:qd,egrave:zd,egs:Vd,egsdot:Gd,el:Qd,Element:Xd,elinters:Zd,ell:Kd,els:Yd,elsdot:Jd,Emacr:ev,emacr:tv,empty:rv,emptyset:nv,EmptySmallSquare:av,emptyv:ov,EmptyVerySmallSquare:iv,emsp13:sv,emsp14:lv,emsp:uv,ENG:cv,eng:dv,ensp:vv,Eogon:pv,eogon:fv,Eopf:hv,eopf:mv,epar:gv,eparsl:yv,eplus:bv,epsi:wv,Epsilon:Tv,epsilon:Cv,epsiv:kv,eqcirc:xv,eqcolon:Mv,eqsim:Ev,eqslantgtr:Lv,eqslantless:Nv,Equal:Iv,equals:Sv,EqualTilde:Ov,equest:Av,Equilibrium:Pv,equiv:Dv,equivDD:Bv,eqvparsl:Rv,erarr:Hv,erDot:_v,escr:$v,Escr:Fv,esdot:jv,Esim:Uv,esim:Wv,Eta:qv,eta:zv,ETH:Vv,eth:Gv,Euml:Qv,euml:Xv,euro:Zv,excl:Kv,exist:Yv,Exists:Jv,expectation:ep,exponentiale:tp,ExponentialE:rp,fallingdotseq:np,Fcy:ap,fcy:op,female:ip,ffilig:sp,fflig:lp,ffllig:up,Ffr:cp,ffr:dp,filig:vp,FilledSmallSquare:pp,FilledVerySmallSquare:fp,fjlig:hp,flat:mp,fllig:gp,fltns:yp,fnof:bp,Fopf:wp,fopf:Tp,forall:Cp,ForAll:kp,fork:xp,forkv:Mp,Fouriertrf:Ep,fpartint:Lp,frac12:Np,frac13:Ip,frac14:Sp,frac15:Op,frac16:Ap,frac18:Pp,frac23:Dp,frac25:Bp,frac34:Rp,frac35:Hp,frac38:_p,frac45:$p,frac56:Fp,frac58:jp,frac78:Up,frasl:Wp,frown:qp,fscr:zp,Fscr:Vp,gacute:Gp,Gamma:Qp,gamma:Xp,Gammad:Zp,gammad:Kp,gap:Yp,Gbreve:Jp,gbreve:ef,Gcedil:tf,Gcirc:rf,gcirc:nf,Gcy:af,gcy:of,Gdot:sf,gdot:lf,ge:uf,gE:cf,gEl:df,gel:vf,geq:pf,geqq:ff,geqslant:hf,gescc:mf,ges:gf,gesdot:yf,gesdoto:bf,gesdotol:wf,gesl:Tf,gesles:Cf,Gfr:kf,gfr:xf,gg:Mf,Gg:Ef,ggg:Lf,gimel:Nf,GJcy:If,gjcy:Sf,gla:Of,gl:Af,glE:Pf,glj:Df,gnap:Bf,gnapprox:Rf,gne:Hf,gnE:_f,gneq:$f,gneqq:Ff,gnsim:jf,Gopf:Uf,gopf:Wf,grave:qf,GreaterEqual:zf,GreaterEqualLess:Vf,GreaterFullEqual:Gf,GreaterGreater:Qf,GreaterLess:Xf,GreaterSlantEqual:Zf,GreaterTilde:Kf,Gscr:Yf,gscr:Jf,gsim:eh,gsime:th,gsiml:rh,gtcc:nh,gtcir:ah,gt:oh,GT:ih,Gt:sh,gtdot:lh,gtlPar:uh,gtquest:ch,gtrapprox:dh,gtrarr:vh,gtrdot:ph,gtreqless:fh,gtreqqless:hh,gtrless:mh,gtrsim:gh,gvertneqq:yh,gvnE:bh,Hacek:wh,hairsp:Th,half:Ch,hamilt:kh,HARDcy:xh,hardcy:Mh,harrcir:Eh,harr:Lh,hArr:Nh,harrw:Ih,Hat:Sh,hbar:Oh,Hcirc:Ah,hcirc:Ph,hearts:Dh,heartsuit:Bh,hellip:Rh,hercon:Hh,hfr:_h,Hfr:$h,HilbertSpace:Fh,hksearow:jh,hkswarow:Uh,hoarr:Wh,homtht:qh,hookleftarrow:zh,hookrightarrow:Vh,hopf:Gh,Hopf:Qh,horbar:Xh,HorizontalLine:Zh,hscr:Kh,Hscr:Yh,hslash:Jh,Hstrok:em,hstrok:tm,HumpDownHump:rm,HumpEqual:nm,hybull:am,hyphen:om,Iacute:im,iacute:sm,ic:lm,Icirc:um,icirc:cm,Icy:dm,icy:vm,Idot:pm,IEcy:fm,iecy:hm,iexcl:mm,iff:gm,ifr:ym,Ifr:bm,Igrave:wm,igrave:Tm,ii:Cm,iiiint:km,iiint:xm,iinfin:Mm,iiota:Em,IJlig:Lm,ijlig:Nm,Imacr:Im,imacr:Sm,image:Om,ImaginaryI:Am,imagline:Pm,imagpart:Dm,imath:Bm,Im:Rm,imof:Hm,imped:_m,Implies:$m,incare:Fm,in:"",infin:jm,infintie:Um,inodot:Wm,intcal:qm,int:zm,Int:Vm,integers:Gm,Integral:Qm,intercal:Xm,Intersection:Zm,intlarhk:Km,intprod:Ym,InvisibleComma:Jm,InvisibleTimes:eg,IOcy:tg,iocy:rg,Iogon:ng,iogon:ag,Iopf:og,iopf:ig,Iota:sg,iota:lg,iprod:ug,iquest:cg,iscr:dg,Iscr:vg,isin:pg,isindot:fg,isinE:hg,isins:mg,isinsv:gg,isinv:yg,it:bg,Itilde:wg,itilde:Tg,Iukcy:Cg,iukcy:kg,Iuml:xg,iuml:Mg,Jcirc:Eg,jcirc:Lg,Jcy:Ng,jcy:Ig,Jfr:Sg,jfr:Og,jmath:Ag,Jopf:Pg,jopf:Dg,Jscr:Bg,jscr:Rg,Jsercy:Hg,jsercy:_g,Jukcy:$g,jukcy:Fg,Kappa:jg,kappa:Ug,kappav:Wg,Kcedil:qg,kcedil:zg,Kcy:Vg,kcy:Gg,Kfr:Qg,kfr:Xg,kgreen:Zg,KHcy:Kg,khcy:Yg,KJcy:Jg,kjcy:ey,Kopf:ty,kopf:ry,Kscr:ny,kscr:ay,lAarr:oy,Lacute:iy,lacute:sy,laemptyv:ly,lagran:uy,Lambda:cy,lambda:dy,lang:vy,Lang:py,langd:fy,langle:hy,lap:my,Laplacetrf:gy,laquo:yy,larrb:by,larrbfs:wy,larr:Ty,Larr:Cy,lArr:ky,larrfs:xy,larrhk:My,larrlp:Ey,larrpl:Ly,larrsim:Ny,larrtl:Iy,latail:Sy,lAtail:Oy,lat:Ay,late:Py,lates:Dy,lbarr:By,lBarr:Ry,lbbrk:Hy,lbrace:_y,lbrack:$y,lbrke:Fy,lbrksld:jy,lbrkslu:Uy,Lcaron:Wy,lcaron:qy,Lcedil:zy,lcedil:Vy,lceil:Gy,lcub:Qy,Lcy:Xy,lcy:Zy,ldca:Ky,ldquo:Yy,ldquor:Jy,ldrdhar:eb,ldrushar:tb,ldsh:rb,le:nb,lE:ab,LeftAngleBracket:ob,LeftArrowBar:ib,leftarrow:sb,LeftArrow:lb,Leftarrow:ub,LeftArrowRightArrow:cb,leftarrowtail:db,LeftCeiling:vb,LeftDoubleBracket:pb,LeftDownTeeVector:fb,LeftDownVectorBar:hb,LeftDownVector:mb,LeftFloor:gb,leftharpoondown:yb,leftharpoonup:bb,leftleftarrows:wb,leftrightarrow:Tb,LeftRightArrow:Cb,Leftrightarrow:kb,leftrightarrows:xb,leftrightharpoons:Mb,leftrightsquigarrow:Eb,LeftRightVector:Lb,LeftTeeArrow:Nb,LeftTee:Ib,LeftTeeVector:Sb,leftthreetimes:Ob,LeftTriangleBar:Ab,LeftTriangle:Pb,LeftTriangleEqual:Db,LeftUpDownVector:Bb,LeftUpTeeVector:Rb,LeftUpVectorBar:Hb,LeftUpVector:_b,LeftVectorBar:$b,LeftVector:Fb,lEg:jb,leg:Ub,leq:Wb,leqq:qb,leqslant:zb,lescc:Vb,les:Gb,lesdot:Qb,lesdoto:Xb,lesdotor:Zb,lesg:Kb,lesges:Yb,lessapprox:Jb,lessdot:ew,lesseqgtr:tw,lesseqqgtr:rw,LessEqualGreater:nw,LessFullEqual:aw,LessGreater:ow,lessgtr:iw,LessLess:sw,lesssim:lw,LessSlantEqual:uw,LessTilde:cw,lfisht:dw,lfloor:vw,Lfr:pw,lfr:fw,lg:hw,lgE:mw,lHar:gw,lhard:yw,lharu:bw,lharul:ww,lhblk:Tw,LJcy:Cw,ljcy:kw,llarr:xw,ll:Mw,Ll:Ew,llcorner:Lw,Lleftarrow:Nw,llhard:Iw,lltri:Sw,Lmidot:Ow,lmidot:Aw,lmoustache:Pw,lmoust:Dw,lnap:Bw,lnapprox:Rw,lne:Hw,lnE:_w,lneq:$w,lneqq:Fw,lnsim:jw,loang:Uw,loarr:Ww,lobrk:qw,longleftarrow:zw,LongLeftArrow:Vw,Longleftarrow:Gw,longleftrightarrow:Qw,LongLeftRightArrow:Xw,Longleftrightarrow:Zw,longmapsto:Kw,longrightarrow:Yw,LongRightArrow:Jw,Longrightarrow:eT,looparrowleft:tT,looparrowright:rT,lopar:nT,Lopf:aT,lopf:oT,loplus:iT,lotimes:sT,lowast:lT,lowbar:uT,LowerLeftArrow:cT,LowerRightArrow:dT,loz:vT,lozenge:pT,lozf:fT,lpar:hT,lparlt:mT,lrarr:gT,lrcorner:yT,lrhar:bT,lrhard:wT,lrm:TT,lrtri:CT,lsaquo:kT,lscr:xT,Lscr:MT,lsh:ET,Lsh:LT,lsim:NT,lsime:IT,lsimg:ST,lsqb:OT,lsquo:AT,lsquor:PT,Lstrok:DT,lstrok:BT,ltcc:RT,ltcir:HT,lt:_T,LT:$T,Lt:FT,ltdot:jT,lthree:UT,ltimes:WT,ltlarr:qT,ltquest:zT,ltri:VT,ltrie:GT,ltrif:QT,ltrPar:XT,lurdshar:ZT,luruhar:KT,lvertneqq:YT,lvnE:JT,macr:eC,male:tC,malt:rC,maltese:nC,Map:"",map:aC,mapsto:oC,mapstodown:iC,mapstoleft:sC,mapstoup:lC,marker:uC,mcomma:cC,Mcy:dC,mcy:vC,mdash:pC,mDDot:fC,measuredangle:hC,MediumSpace:mC,Mellintrf:gC,Mfr:yC,mfr:bC,mho:wC,micro:TC,midast:CC,midcir:kC,mid:xC,middot:MC,minusb:EC,minus:LC,minusd:NC,minusdu:IC,MinusPlus:SC,mlcp:OC,mldr:AC,mnplus:PC,models:DC,Mopf:BC,mopf:RC,mp:HC,mscr:_C,Mscr:$C,mstpos:FC,Mu:jC,mu:UC,multimap:WC,mumap:qC,nabla:zC,Nacute:VC,nacute:GC,nang:QC,nap:XC,napE:ZC,napid:KC,napos:YC,napprox:JC,natural:ek,naturals:tk,natur:rk,nbsp:nk,nbump:ak,nbumpe:ok,ncap:ik,Ncaron:sk,ncaron:lk,Ncedil:uk,ncedil:ck,ncong:dk,ncongdot:vk,ncup:pk,Ncy:fk,ncy:hk,ndash:mk,nearhk:gk,nearr:yk,neArr:bk,nearrow:wk,ne:Tk,nedot:Ck,NegativeMediumSpace:kk,NegativeThickSpace:xk,NegativeThinSpace:Mk,NegativeVeryThinSpace:Ek,nequiv:Lk,nesear:Nk,nesim:Ik,NestedGreaterGreater:Sk,NestedLessLess:Ok,NewLine:Ak,nexist:Pk,nexists:Dk,Nfr:Bk,nfr:Rk,ngE:Hk,nge:_k,ngeq:$k,ngeqq:Fk,ngeqslant:jk,nges:Uk,nGg:Wk,ngsim:qk,nGt:zk,ngt:Vk,ngtr:Gk,nGtv:Qk,nharr:Xk,nhArr:Zk,nhpar:Kk,ni:Yk,nis:Jk,nisd:ex,niv:tx,NJcy:rx,njcy:nx,nlarr:ax,nlArr:ox,nldr:ix,nlE:sx,nle:lx,nleftarrow:ux,nLeftarrow:cx,nleftrightarrow:dx,nLeftrightarrow:vx,nleq:px,nleqq:fx,nleqslant:hx,nles:mx,nless:gx,nLl:yx,nlsim:bx,nLt:wx,nlt:Tx,nltri:Cx,nltrie:kx,nLtv:xx,nmid:Mx,NoBreak:Ex,NonBreakingSpace:Lx,nopf:Nx,Nopf:Ix,Not:Sx,not:Ox,NotCongruent:Ax,NotCupCap:Px,NotDoubleVerticalBar:Dx,NotElement:Bx,NotEqual:Rx,NotEqualTilde:Hx,NotExists:_x,NotGreater:$x,NotGreaterEqual:Fx,NotGreaterFullEqual:jx,NotGreaterGreater:Ux,NotGreaterLess:Wx,NotGreaterSlantEqual:qx,NotGreaterTilde:zx,NotHumpDownHump:Vx,NotHumpEqual:Gx,notin:Qx,notindot:Xx,notinE:Zx,notinva:Kx,notinvb:Yx,notinvc:Jx,NotLeftTriangleBar:eM,NotLeftTriangle:tM,NotLeftTriangleEqual:rM,NotLess:nM,NotLessEqual:aM,NotLessGreater:oM,NotLessLess:iM,NotLessSlantEqual:sM,NotLessTilde:lM,NotNestedGreaterGreater:uM,NotNestedLessLess:cM,notni:dM,notniva:vM,notnivb:pM,notnivc:fM,NotPrecedes:hM,NotPrecedesEqual:mM,NotPrecedesSlantEqual:gM,NotReverseElement:yM,NotRightTriangleBar:bM,NotRightTriangle:wM,NotRightTriangleEqual:TM,NotSquareSubset:CM,NotSquareSubsetEqual:kM,NotSquareSuperset:xM,NotSquareSupersetEqual:MM,NotSubset:EM,NotSubsetEqual:LM,NotSucceeds:NM,NotSucceedsEqual:IM,NotSucceedsSlantEqual:SM,NotSucceedsTilde:OM,NotSuperset:AM,NotSupersetEqual:PM,NotTilde:DM,NotTildeEqual:BM,NotTildeFullEqual:RM,NotTildeTilde:HM,NotVerticalBar:_M,nparallel:$M,npar:FM,nparsl:jM,npart:UM,npolint:WM,npr:qM,nprcue:zM,nprec:VM,npreceq:GM,npre:QM,nrarrc:XM,nrarr:ZM,nrArr:KM,nrarrw:YM,nrightarrow:JM,nRightarrow:eE,nrtri:tE,nrtrie:rE,nsc:nE,nsccue:aE,nsce:oE,Nscr:iE,nscr:sE,nshortmid:lE,nshortparallel:uE,nsim:cE,nsime:dE,nsimeq:vE,nsmid:pE,nspar:fE,nsqsube:hE,nsqsupe:mE,nsub:gE,nsubE:yE,nsube:bE,nsubset:wE,nsubseteq:TE,nsubseteqq:CE,nsucc:kE,nsucceq:xE,nsup:ME,nsupE:EE,nsupe:LE,nsupset:NE,nsupseteq:IE,nsupseteqq:SE,ntgl:OE,Ntilde:AE,ntilde:PE,ntlg:DE,ntriangleleft:BE,ntrianglelefteq:RE,ntriangleright:HE,ntrianglerighteq:_E,Nu:$E,nu:FE,num:jE,numero:UE,numsp:WE,nvap:qE,nvdash:zE,nvDash:VE,nVdash:GE,nVDash:QE,nvge:XE,nvgt:ZE,nvHarr:KE,nvinfin:YE,nvlArr:JE,nvle:eL,nvlt:tL,nvltrie:rL,nvrArr:nL,nvrtrie:aL,nvsim:oL,nwarhk:iL,nwarr:sL,nwArr:lL,nwarrow:uL,nwnear:cL,Oacute:dL,oacute:vL,oast:pL,Ocirc:fL,ocirc:hL,ocir:mL,Ocy:gL,ocy:yL,odash:bL,Odblac:wL,odblac:TL,odiv:CL,odot:kL,odsold:xL,OElig:ML,oelig:EL,ofcir:LL,Ofr:NL,ofr:IL,ogon:SL,Ograve:OL,ograve:AL,ogt:PL,ohbar:DL,ohm:BL,oint:RL,olarr:HL,olcir:_L,olcross:$L,oline:FL,olt:jL,Omacr:UL,omacr:WL,Omega:qL,omega:zL,Omicron:VL,omicron:GL,omid:QL,ominus:XL,Oopf:ZL,oopf:KL,opar:YL,OpenCurlyDoubleQuote:JL,OpenCurlyQuote:eN,operp:tN,oplus:rN,orarr:nN,Or:aN,or:oN,ord:iN,order:sN,orderof:lN,ordf:uN,ordm:cN,origof:dN,oror:vN,orslope:pN,orv:fN,oS:hN,Oscr:mN,oscr:gN,Oslash:yN,oslash:bN,osol:wN,Otilde:TN,otilde:CN,otimesas:kN,Otimes:xN,otimes:MN,Ouml:EN,ouml:LN,ovbar:NN,OverBar:IN,OverBrace:SN,OverBracket:ON,OverParenthesis:AN,para:PN,parallel:DN,par:BN,parsim:RN,parsl:HN,part:_N,PartialD:$N,Pcy:FN,pcy:jN,percnt:UN,period:WN,permil:qN,perp:zN,pertenk:VN,Pfr:GN,pfr:QN,Phi:XN,phi:ZN,phiv:KN,phmmat:YN,phone:JN,Pi:eI,pi:tI,pitchfork:rI,piv:nI,planck:aI,planckh:oI,plankv:iI,plusacir:sI,plusb:lI,pluscir:uI,plus:cI,plusdo:dI,plusdu:vI,pluse:pI,PlusMinus:fI,plusmn:hI,plussim:mI,plustwo:gI,pm:yI,Poincareplane:bI,pointint:wI,popf:TI,Popf:CI,pound:kI,prap:xI,Pr:MI,pr:EI,prcue:LI,precapprox:NI,prec:II,preccurlyeq:SI,Precedes:OI,PrecedesEqual:AI,PrecedesSlantEqual:PI,PrecedesTilde:DI,preceq:BI,precnapprox:RI,precneqq:HI,precnsim:_I,pre:$I,prE:FI,precsim:jI,prime:UI,Prime:WI,primes:qI,prnap:zI,prnE:VI,prnsim:GI,prod:QI,Product:XI,profalar:ZI,profline:KI,profsurf:YI,prop:JI,Proportional:eS,Proportion:tS,propto:rS,prsim:nS,prurel:aS,Pscr:oS,pscr:iS,Psi:sS,psi:lS,puncsp:uS,Qfr:cS,qfr:dS,qint:vS,qopf:pS,Qopf:fS,qprime:hS,Qscr:mS,qscr:gS,quaternions:yS,quatint:bS,quest:wS,questeq:TS,quot:CS,QUOT:kS,rAarr:xS,race:MS,Racute:ES,racute:LS,radic:NS,raemptyv:IS,rang:SS,Rang:OS,rangd:AS,range:PS,rangle:DS,raquo:BS,rarrap:RS,rarrb:HS,rarrbfs:_S,rarrc:$S,rarr:FS,Rarr:jS,rArr:US,rarrfs:WS,rarrhk:qS,rarrlp:zS,rarrpl:VS,rarrsim:GS,Rarrtl:QS,rarrtl:XS,rarrw:ZS,ratail:KS,rAtail:YS,ratio:JS,rationals:eO,rbarr:tO,rBarr:rO,RBarr:nO,rbbrk:aO,rbrace:oO,rbrack:iO,rbrke:sO,rbrksld:lO,rbrkslu:uO,Rcaron:cO,rcaron:dO,Rcedil:vO,rcedil:pO,rceil:fO,rcub:hO,Rcy:mO,rcy:gO,rdca:yO,rdldhar:bO,rdquo:wO,rdquor:TO,rdsh:CO,real:kO,realine:xO,realpart:MO,reals:EO,Re:LO,rect:NO,reg:IO,REG:SO,ReverseElement:OO,ReverseEquilibrium:AO,ReverseUpEquilibrium:PO,rfisht:DO,rfloor:BO,rfr:RO,Rfr:HO,rHar:_O,rhard:$O,rharu:FO,rharul:jO,Rho:UO,rho:WO,rhov:qO,RightAngleBracket:zO,RightArrowBar:VO,rightarrow:GO,RightArrow:QO,Rightarrow:XO,RightArrowLeftArrow:ZO,rightarrowtail:KO,RightCeiling:YO,RightDoubleBracket:JO,RightDownTeeVector:eA,RightDownVectorBar:tA,RightDownVector:rA,RightFloor:nA,rightharpoondown:aA,rightharpoonup:oA,rightleftarrows:iA,rightleftharpoons:sA,rightrightarrows:lA,rightsquigarrow:uA,RightTeeArrow:cA,RightTee:dA,RightTeeVector:vA,rightthreetimes:pA,RightTriangleBar:fA,RightTriangle:hA,RightTriangleEqual:mA,RightUpDownVector:gA,RightUpTeeVector:yA,RightUpVectorBar:bA,RightUpVector:wA,RightVectorBar:TA,RightVector:CA,ring:kA,risingdotseq:xA,rlarr:MA,rlhar:EA,rlm:LA,rmoustache:NA,rmoust:IA,rnmid:SA,roang:OA,roarr:AA,robrk:PA,ropar:DA,ropf:BA,Ropf:RA,roplus:HA,rotimes:_A,RoundImplies:$A,rpar:FA,rpargt:jA,rppolint:UA,rrarr:WA,Rrightarrow:qA,rsaquo:zA,rscr:VA,Rscr:GA,rsh:QA,Rsh:XA,rsqb:ZA,rsquo:KA,rsquor:YA,rthree:JA,rtimes:eP,rtri:tP,rtrie:rP,rtrif:nP,rtriltri:aP,RuleDelayed:oP,ruluhar:iP,rx:sP,Sacute:lP,sacute:uP,sbquo:cP,scap:dP,Scaron:vP,scaron:pP,Sc:fP,sc:hP,sccue:mP,sce:gP,scE:yP,Scedil:bP,scedil:wP,Scirc:TP,scirc:CP,scnap:kP,scnE:xP,scnsim:MP,scpolint:EP,scsim:LP,Scy:NP,scy:IP,sdotb:SP,sdot:OP,sdote:AP,searhk:PP,searr:DP,seArr:BP,searrow:RP,sect:HP,semi:_P,seswar:$P,setminus:FP,setmn:jP,sext:UP,Sfr:WP,sfr:qP,sfrown:zP,sharp:VP,SHCHcy:GP,shchcy:QP,SHcy:XP,shcy:ZP,ShortDownArrow:KP,ShortLeftArrow:YP,shortmid:JP,shortparallel:eD,ShortRightArrow:tD,ShortUpArrow:rD,shy:nD,Sigma:aD,sigma:oD,sigmaf:iD,sigmav:sD,sim:lD,simdot:uD,sime:cD,simeq:dD,simg:vD,simgE:pD,siml:fD,simlE:hD,simne:mD,simplus:gD,simrarr:yD,slarr:bD,SmallCircle:wD,smallsetminus:TD,smashp:CD,smeparsl:kD,smid:xD,smile:MD,smt:ED,smte:LD,smtes:ND,SOFTcy:ID,softcy:SD,solbar:OD,solb:AD,sol:PD,Sopf:DD,sopf:BD,spades:RD,spadesuit:HD,spar:_D,sqcap:$D,sqcaps:FD,sqcup:jD,sqcups:UD,Sqrt:WD,sqsub:qD,sqsube:zD,sqsubset:VD,sqsubseteq:GD,sqsup:QD,sqsupe:XD,sqsupset:ZD,sqsupseteq:KD,square:YD,Square:JD,SquareIntersection:eB,SquareSubset:tB,SquareSubsetEqual:rB,SquareSuperset:nB,SquareSupersetEqual:aB,SquareUnion:oB,squarf:iB,squ:sB,squf:lB,srarr:uB,Sscr:cB,sscr:dB,ssetmn:vB,ssmile:pB,sstarf:fB,Star:hB,star:mB,starf:gB,straightepsilon:yB,straightphi:bB,strns:wB,sub:TB,Sub:CB,subdot:kB,subE:xB,sube:MB,subedot:EB,submult:LB,subnE:NB,subne:IB,subplus:SB,subrarr:OB,subset:AB,Subset:PB,subseteq:DB,subseteqq:BB,SubsetEqual:RB,subsetneq:HB,subsetneqq:_B,subsim:$B,subsub:FB,subsup:jB,succapprox:UB,succ:WB,succcurlyeq:qB,Succeeds:zB,SucceedsEqual:VB,SucceedsSlantEqual:GB,SucceedsTilde:QB,succeq:XB,succnapprox:ZB,succneqq:KB,succnsim:YB,succsim:JB,SuchThat:eR,sum:tR,Sum:rR,sung:nR,sup1:aR,sup2:oR,sup3:iR,sup:sR,Sup:lR,supdot:uR,supdsub:cR,supE:dR,supe:vR,supedot:pR,Superset:fR,SupersetEqual:hR,suphsol:mR,suphsub:gR,suplarr:yR,supmult:bR,supnE:wR,supne:TR,supplus:CR,supset:kR,Supset:xR,supseteq:MR,supseteqq:ER,supsetneq:LR,supsetneqq:NR,supsim:IR,supsub:SR,supsup:OR,swarhk:AR,swarr:PR,swArr:DR,swarrow:BR,swnwar:RR,szlig:HR,Tab:_R,target:$R,Tau:FR,tau:jR,tbrk:UR,Tcaron:WR,tcaron:qR,Tcedil:zR,tcedil:VR,Tcy:GR,tcy:QR,tdot:XR,telrec:ZR,Tfr:KR,tfr:YR,there4:JR,therefore:eH,Therefore:tH,Theta:rH,theta:nH,thetasym:aH,thetav:oH,thickapprox:iH,thicksim:sH,ThickSpace:lH,ThinSpace:uH,thinsp:cH,thkap:dH,thksim:vH,THORN:pH,thorn:fH,tilde:hH,Tilde:mH,TildeEqual:gH,TildeFullEqual:yH,TildeTilde:bH,timesbar:wH,timesb:TH,times:CH,timesd:kH,tint:xH,toea:MH,topbot:EH,topcir:LH,top:NH,Topf:IH,topf:SH,topfork:OH,tosa:AH,tprime:PH,trade:DH,TRADE:BH,triangle:RH,triangledown:HH,triangleleft:_H,trianglelefteq:$H,triangleq:FH,triangleright:jH,trianglerighteq:UH,tridot:WH,trie:qH,triminus:zH,TripleDot:VH,triplus:GH,trisb:QH,tritime:XH,trpezium:ZH,Tscr:KH,tscr:YH,TScy:JH,tscy:e_,TSHcy:t_,tshcy:r_,Tstrok:n_,tstrok:a_,twixt:o_,twoheadleftarrow:i_,twoheadrightarrow:s_,Uacute:l_,uacute:u_,uarr:c_,Uarr:d_,uArr:v_,Uarrocir:p_,Ubrcy:f_,ubrcy:h_,Ubreve:m_,ubreve:g_,Ucirc:y_,ucirc:b_,Ucy:w_,ucy:T_,udarr:C_,Udblac:k_,udblac:x_,udhar:M_,ufisht:E_,Ufr:L_,ufr:N_,Ugrave:I_,ugrave:S_,uHar:O_,uharl:A_,uharr:P_,uhblk:D_,ulcorn:B_,ulcorner:R_,ulcrop:H_,ultri:$_,Umacr:F_,umacr:j_,uml:U_,UnderBar:W_,UnderBrace:q_,UnderBracket:z_,UnderParenthesis:V_,Union:G_,UnionPlus:Q_,Uogon:X_,uogon:Z_,Uopf:K_,uopf:Y_,UpArrowBar:J_,uparrow:e$,UpArrow:t$,Uparrow:r$,UpArrowDownArrow:n$,updownarrow:a$,UpDownArrow:o$,Updownarrow:i$,UpEquilibrium:s$,upharpoonleft:l$,upharpoonright:u$,uplus:c$,UpperLeftArrow:d$,UpperRightArrow:v$,upsi:p$,Upsi:f$,upsih:h$,Upsilon:m$,upsilon:g$,UpTeeArrow:y$,UpTee:b$,upuparrows:w$,urcorn:T$,urcorner:C$,urcrop:k$,Uring:x$,uring:M$,urtri:E$,Uscr:L$,uscr:N$,utdot:I$,Utilde:S$,utilde:O$,utri:A$,utrif:P$,uuarr:D$,Uuml:B$,uuml:R$,uwangle:H$,vangrt:_$,varepsilon:$$,varkappa:F$,varnothing:j$,varphi:U$,varpi:W$,varpropto:q$,varr:z$,vArr:V$,varrho:G$,varsigma:Q$,varsubsetneq:X$,varsubsetneqq:Z$,varsupsetneq:K$,varsupsetneqq:Y$,vartheta:J$,vartriangleleft:eF,vartriangleright:tF,vBar:rF,Vbar:nF,vBarv:aF,Vcy:oF,vcy:iF,vdash:sF,vDash:lF,Vdash:uF,VDash:cF,Vdashl:dF,veebar:vF,vee:pF,Vee:fF,veeeq:hF,vellip:mF,verbar:gF,Verbar:yF,vert:bF,Vert:wF,VerticalBar:TF,VerticalLine:CF,VerticalSeparator:kF,VerticalTilde:xF,VeryThinSpace:MF,Vfr:EF,vfr:LF,vltri:NF,vnsub:IF,vnsup:SF,Vopf:OF,vopf:AF,vprop:PF,vrtri:DF,Vscr:BF,vscr:RF,vsubnE:HF,vsubne:_F,vsupnE:$F,vsupne:FF,Vvdash:jF,vzigzag:UF,Wcirc:WF,wcirc:qF,wedbar:zF,wedge:VF,Wedge:GF,wedgeq:QF,weierp:XF,Wfr:ZF,wfr:KF,Wopf:YF,wopf:JF,wp:ej,wr:tj,wreath:rj,Wscr:nj,wscr:aj,xcap:oj,xcirc:ij,xcup:sj,xdtri:lj,Xfr:uj,xfr:cj,xharr:dj,xhArr:vj,Xi:pj,xi:fj,xlarr:hj,xlArr:mj,xmap:gj,xnis:yj,xodot:bj,Xopf:wj,xopf:Tj,xoplus:Cj,xotime:kj,xrarr:xj,xrArr:Mj,Xscr:Ej,xscr:Lj,xsqcup:Nj,xuplus:Ij,xutri:Sj,xvee:Oj,xwedge:Aj,Yacute:Pj,yacute:Dj,YAcy:Bj,yacy:Rj,Ycirc:Hj,ycirc:_j,Ycy:$j,ycy:Fj,yen:jj,Yfr:Uj,yfr:Wj,YIcy:qj,yicy:zj,Yopf:Vj,yopf:Gj,Yscr:Qj,yscr:Xj,YUcy:Zj,yucy:Kj,yuml:Yj,Yuml:Jj,Zacute:eU,zacute:tU,Zcaron:rU,zcaron:nU,Zcy:aU,zcy:oU,Zdot:iU,zdot:sU,zeetrf:lU,ZeroWidthSpace:uU,Zeta:cU,zeta:dU,zfr:vU,Zfr:pU,ZHcy:fU,zhcy:hU,zigrarr:mU,zopf:gU,Zopf:yU,Zscr:bU,zscr:wU,zwj:TU,zwnj:CU};var xU="";var MU="";var EU="";var LU="";var NU="";var IU="";var SU="";var OU="";var AU="";var PU="&";var DU="&";var BU="";var RU="";var HU="";var _U="";var $U="";var FU="";var jU="";var UU="";var WU="";var qU="";var zU="";var VU="";var GU="";var QU="";var XU="";var ZU="";var KU="";var YU="";var JU="";var eW="";var tW="";var rW="";var nW="";var aW="";var oW="";var iW="";var sW="";var lW="";var uW="";var cW=">";var dW=">";var vW="";var pW="";var fW="";var hW="";var mW="";var gW="";var yW="";var bW="";var wW="";var TW="";var CW="";var kW="<";var xW="<";var MW="";var EW="";var LW="";var NW="";var IW="";var SW="";var OW="";var AW="";var PW="";var DW="";var BW="";var RW="";var HW="";var _W="";var $W="";var FW="";var jW="";var UW="";var WW="";var qW="";var zW="";var VW="";var GW="";var QW="";var XW='"';var ZW='"';var KW="";var YW="";var JW="";var eq="";var tq="";var rq="";var nq="";var aq="";var oq="";var iq="";var sq="";var lq="";var uq="";var cq="";var dq="";var vq="";var pq="";var fq="";var hq="";var mq="";var gq="";var yq="";var bq="";var wq="";var Tq="";var Cq={Aacute:xU,aacute:MU,Acirc:EU,acirc:LU,acute:NU,AElig:IU,aelig:SU,Agrave:OU,agrave:AU,amp:PU,AMP:DU,Aring:BU,aring:RU,Atilde:HU,atilde:_U,Auml:$U,auml:FU,brvbar:jU,Ccedil:UU,ccedil:WU,cedil:qU,cent:zU,copy:VU,COPY:GU,curren:QU,deg:XU,divide:ZU,Eacute:KU,eacute:YU,Ecirc:JU,ecirc:eW,Egrave:tW,egrave:rW,ETH:nW,eth:aW,Euml:oW,euml:iW,frac12:sW,frac14:lW,frac34:uW,gt:cW,GT:dW,Iacute:vW,iacute:pW,Icirc:fW,icirc:hW,iexcl:mW,Igrave:gW,igrave:yW,iquest:bW,Iuml:wW,iuml:TW,laquo:CW,lt:kW,LT:xW,macr:MW,micro:EW,middot:LW,nbsp:NW,not:IW,Ntilde:SW,ntilde:OW,Oacute:AW,oacute:PW,Ocirc:DW,ocirc:BW,Ograve:RW,ograve:HW,ordf:_W,ordm:$W,Oslash:FW,oslash:jW,Otilde:UW,otilde:WW,Ouml:qW,ouml:zW,para:VW,plusmn:GW,pound:QW,quot:XW,QUOT:ZW,raquo:KW,reg:YW,REG:JW,sect:eq,shy:tq,sup1:rq,sup2:nq,sup3:aq,szlig:oq,THORN:iq,thorn:sq,times:lq,Uacute:uq,uacute:cq,Ucirc:dq,ucirc:vq,Ugrave:pq,ugrave:fq,uml:hq,Uuml:mq,uuml:gq,Yacute:yq,yacute:bq,yen:wq,yuml:Tq};var kq="&";var xq="'";var Mq=">";var Eq="<";var Lq='"';var Nq={amp:kq,apos:xq,gt:Mq,lt:Eq,quot:Lq};var Iq={};var Sq={0:65533,128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376};var Oq=Zr&&Zr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Iq,"__esModule",{value:true});var Aq=Oq(Sq);var Pq=String.fromCodePoint||function(e){var t="";if(e>65535){e-=65536;t+=String.fromCharCode(e>>>10&1023|55296);e=56320|1023&e}t+=String.fromCharCode(e);return t};function decodeCodePoint(e){if(e>=55296&&e<=57343||e>1114111)return"";e in Aq.default&&(e=Aq.default[e]);return Pq(e)}Iq.default=decodeCodePoint;var Dq=Zr&&Zr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(en,"__esModule",{value:true});en.decodeHTML=en.decodeHTMLStrict=en.decodeXML=void 0;var Bq=Dq(kU);var Rq=Dq(Cq);var Hq=Dq(Nq);var _q=Dq(Iq);var $q=/&(?:[a-zA-Z0-9]+|#[xX][\da-fA-F]+|#\d+);/g;en.decodeXML=getStrictDecoder(Hq.default);en.decodeHTMLStrict=getStrictDecoder(Bq.default);function getStrictDecoder(e){var t=getReplacer(e);return function(e){return String(e).replace($q,t)}}var sorter=function(e,t){return e<t?1:-1};en.decodeHTML=function(){var e=Object.keys(Rq.default).sort(sorter);var t=Object.keys(Bq.default).sort(sorter);for(var r=0,n=0;r<t.length;r++)if(e[n]===t[r]){t[r]+=";?";n++}else t[r]+=";";var a=new RegExp("&(?:"+t.join("|")+"|#[xX][\\da-fA-F]+;?|#\\d+;?)","g");var o=getReplacer(Bq.default);function replacer(e){";"!==e.substr(-1)&&(e+=";");return o(e)}return function(e){return String(e).replace(a,replacer)}}();function getReplacer(e){return function replace(t){if("#"===t.charAt(1)){var r=t.charAt(2);return"X"===r||"x"===r?_q.default(parseInt(t.substr(3),16)):_q.default(parseInt(t.substr(2),10))}return e[t.slice(1,-1)]||t}}var Fq={};var jq=Zr&&Zr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Fq,"__esModule",{value:true});Fq.escapeUTF8=Fq.escape=Fq.encodeNonAsciiHTML=Fq.encodeHTML=Fq.encodeXML=void 0;var Uq=jq(Nq);var Wq=getInverseObj(Uq.default);var qq=getInverseReplacer(Wq);Fq.encodeXML=getASCIIEncoder(Wq);var zq=jq(kU);var Vq=getInverseObj(zq.default);var Gq=getInverseReplacer(Vq);Fq.encodeHTML=getInverse(Vq,Gq);Fq.encodeNonAsciiHTML=getASCIIEncoder(Vq);function getInverseObj(e){return Object.keys(e).sort().reduce((function(t,r){t[e[r]]="&"+r+";";return t}),{})}function getInverseReplacer(e){var t=[];var r=[];for(var n=0,a=Object.keys(e);n<a.length;n++){var o=a[n];1===o.length?t.push("\\"+o):r.push(o)}t.sort();for(var i=0;i<t.length-1;i++){var s=i;while(s<t.length-1&&t[s].charCodeAt(1)+1===t[s+1].charCodeAt(1))s+=1;var l=1+s-i;l<3||t.splice(i,l,t[i]+"-"+t[s])}r.unshift("["+t.join("")+"]");return new RegExp(r.join("|"),"g")}var Qq=/(?:[\x80-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g;var Xq=null!=String.prototype.codePointAt?function(e){return e.codePointAt(0)}:function(e){return 1024*(e.charCodeAt(0)-55296)+e.charCodeAt(1)-56320+65536};function singleCharReplacer(e){return"&#x"+(e.length>1?Xq(e):e.charCodeAt(0)).toString(16).toUpperCase()+";"}function getInverse(e,t){return function(r){return r.replace(t,(function(t){return e[t]})).replace(Qq,singleCharReplacer)}}var Zq=new RegExp(qq.source+"|"+Qq.source,"g");
/**
 * Encodes all non-ASCII characters, as well as characters not valid in XML
 * documents using numeric hexadecimal reference (eg. `&#xfc;`).
 *
 * Have a look at `escapeUTF8` if you want a more concise output at the expense
 * of reduced transportability.
 *
 * @param data String to escape.
 */function escape(e){return e.replace(Zq,singleCharReplacer)}Fq.escape=escape;
/**
 * Encodes all characters not valid in XML documents using numeric hexadecimal
 * reference (eg. `&#xfc;`).
 *
 * Note that the output will be character-set dependent.
 *
 * @param data String to escape.
 */function escapeUTF8(e){return e.replace(qq,singleCharReplacer)}Fq.escapeUTF8=escapeUTF8;function getASCIIEncoder(e){return function(t){return t.replace(Zq,(function(t){return e[t]||singleCharReplacer(t)}))}}(function(e){Object.defineProperty(e,"__esModule",{value:true});e.decodeXMLStrict=e.decodeHTML5Strict=e.decodeHTML4Strict=e.decodeHTML5=e.decodeHTML4=e.decodeHTMLStrict=e.decodeHTML=e.decodeXML=e.encodeHTML5=e.encodeHTML4=e.escapeUTF8=e.escape=e.encodeNonAsciiHTML=e.encodeHTML=e.encodeXML=e.encode=e.decodeStrict=e.decode=void 0;var t=en;var r=Fq;
/**
 * Decodes a string with entities.
 *
 * @param data String to decode.
 * @param level Optional level to decode at. 0 = XML, 1 = HTML. Default is 0.
 * @deprecated Use `decodeXML` or `decodeHTML` directly.
 */function decode$1(e,r){return(!r||r<=0?t.decodeXML:t.decodeHTML)(e)}e.decode=decode$1;
/**
 * Decodes a string with entities. Does not allow missing trailing semicolons for entities.
 *
 * @param data String to decode.
 * @param level Optional level to decode at. 0 = XML, 1 = HTML. Default is 0.
 * @deprecated Use `decodeHTMLStrict` or `decodeXML` directly.
 */function decodeStrict(e,r){return(!r||r<=0?t.decodeXML:t.decodeHTMLStrict)(e)}e.decodeStrict=decodeStrict;
/**
 * Encodes a string with entities.
 *
 * @param data String to encode.
 * @param level Optional level to encode at. 0 = XML, 1 = HTML. Default is 0.
 * @deprecated Use `encodeHTML`, `encodeXML` or `encodeNonAsciiHTML` directly.
 */function encode$1(e,t){return(!t||t<=0?r.encodeXML:r.encodeHTML)(e)}e.encode=encode$1;var n=Fq;Object.defineProperty(e,"encodeXML",{enumerable:true,get:function(){return n.encodeXML}});Object.defineProperty(e,"encodeHTML",{enumerable:true,get:function(){return n.encodeHTML}});Object.defineProperty(e,"encodeNonAsciiHTML",{enumerable:true,get:function(){return n.encodeNonAsciiHTML}});Object.defineProperty(e,"escape",{enumerable:true,get:function(){return n.escape}});Object.defineProperty(e,"escapeUTF8",{enumerable:true,get:function(){return n.escapeUTF8}});Object.defineProperty(e,"encodeHTML4",{enumerable:true,get:function(){return n.encodeHTML}});Object.defineProperty(e,"encodeHTML5",{enumerable:true,get:function(){return n.encodeHTML}});var a=en;Object.defineProperty(e,"decodeXML",{enumerable:true,get:function(){return a.decodeXML}});Object.defineProperty(e,"decodeHTML",{enumerable:true,get:function(){return a.decodeHTML}});Object.defineProperty(e,"decodeHTMLStrict",{enumerable:true,get:function(){return a.decodeHTMLStrict}});Object.defineProperty(e,"decodeHTML4",{enumerable:true,get:function(){return a.decodeHTML}});Object.defineProperty(e,"decodeHTML5",{enumerable:true,get:function(){return a.decodeHTML}});Object.defineProperty(e,"decodeHTML4Strict",{enumerable:true,get:function(){return a.decodeHTMLStrict}});Object.defineProperty(e,"decodeHTML5Strict",{enumerable:true,get:function(){return a.decodeHTMLStrict}});Object.defineProperty(e,"decodeXMLStrict",{enumerable:true,get:function(){return a.decodeXML}})})(Jr);var Kq="&(?:#x[a-f0-9]{1,6}|#[0-9]{1,7}|[a-z][a-z0-9]{1,31});";var Yq=92;var Jq=/[\\&]/;var ez="[!\"#$%&'()*+,./:;<=>?@[\\\\\\]^_`{|}~-]";var tz=new RegExp("\\\\"+ez+"|"+Kq,"gi");var rz='[&<>"]';var nz=new RegExp(rz,"g");var unescapeChar=function(e){return e.charCodeAt(0)===Yq?e.charAt(1):Jr.decodeHTML(e)};function unescapeString(e){return Jq.test(e)?e.replace(tz,unescapeChar):e}function normalizeURI(e){try{return Yr(e)}catch(t){return e}}function replaceUnsafeChar(e){switch(e){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";default:return e}}function escapeXml(e){return nz.test(e)?e.replace(nz,replaceUnsafeChar):e}function repeat(e,t){var r=[];for(var n=0;n<t;n++)r.push(e);return r.join("")}function isEmpty(e){return!e||!/[^ \t]+/.test(e)}var az=function(){function NodeWalker(e){this.current=e;this.root=e;this.entering=true}NodeWalker.prototype.next=function(){var e=this.current;var t=this.entering;if(null===e)return null;var r=isContainer$1(e);if(t&&r)if(e.firstChild){this.current=e.firstChild;this.entering=true}else this.entering=false;else if(e===this.root)this.current=null;else if(null===e.next){this.current=e.parent;this.entering=false}else{this.current=e.next;this.entering=true}return{entering:t,node:e}};NodeWalker.prototype.resumeAt=function(e,t){this.current=e;this.entering=true===t};return NodeWalker}();function isContainer$1(e){switch(e.type){case"document":case"blockQuote":case"list":case"item":case"paragraph":case"heading":case"emph":case"strong":case"strike":case"link":case"image":case"table":case"tableHead":case"tableBody":case"tableRow":case"tableCell":case"tableDelimRow":case"customInline":return true;default:return false}}var oz=1;var iz={};function getNodeById(e){return iz[e]}function removeNodeById(e){delete iz[e]}function removeAllNode(){iz={}}var sz=function(){function Node(e,t){this.parent=null;this.prev=null;this.next=null;this.firstChild=null;this.lastChild=null;this.literal=null;this.id="document"===e?-1:oz++;this.type=e;this.sourcepos=t;iz[this.id]=this}Node.prototype.isContainer=function(){return isContainer$1(this)};Node.prototype.unlink=function(){this.prev?this.prev.next=this.next:this.parent&&(this.parent.firstChild=this.next);this.next?this.next.prev=this.prev:this.parent&&(this.parent.lastChild=this.prev);this.parent=null;this.next=null;this.prev=null};Node.prototype.replaceWith=function(e){this.insertBefore(e);this.unlink()};Node.prototype.insertAfter=function(e){e.unlink();e.next=this.next;e.next&&(e.next.prev=e);e.prev=this;this.next=e;if(this.parent){e.parent=this.parent;e.next||(e.parent.lastChild=e)}};Node.prototype.insertBefore=function(e){e.unlink();e.prev=this.prev;e.prev&&(e.prev.next=e);e.next=this;this.prev=e;e.parent=this.parent;e.prev||(e.parent.firstChild=e)};Node.prototype.appendChild=function(e){e.unlink();e.parent=this;if(this.lastChild){this.lastChild.next=e;e.prev=this.lastChild;this.lastChild=e}else{this.firstChild=e;this.lastChild=e}};Node.prototype.prependChild=function(e){e.unlink();e.parent=this;if(this.firstChild){this.firstChild.prev=e;e.next=this.firstChild;this.firstChild=e}else{this.firstChild=e;this.lastChild=e}};Node.prototype.walker=function(){return new az(this)};return Node}();var lz=function(e){__extends(BlockNode,e);function BlockNode(t,r){var n=e.call(this,t,r)||this;n.open=true;n.lineOffsets=null;n.stringContent=null;n.lastLineBlank=false;n.lastLineChecked=false;n.type=t;return n}return BlockNode}(sz);var uz=function(e){__extends(ListNode,e);function ListNode(){var t=null!==e&&e.apply(this,arguments)||this;t.listData=null;return t}return ListNode}(lz);var cz=function(e){__extends(HeadingNode,e);function HeadingNode(){var t=null!==e&&e.apply(this,arguments)||this;t.level=0;t.headingType="atx";return t}return HeadingNode}(lz);var dz=function(e){__extends(CodeBlockNode,e);function CodeBlockNode(){var t=null!==e&&e.apply(this,arguments)||this;t.isFenced=false;t.fenceChar=null;t.fenceLength=0;t.fenceOffset=-1;t.info=null;t.infoPadding=0;return t}return CodeBlockNode}(lz);var vz=function(e){__extends(TableNode,e);function TableNode(){var t=null!==e&&e.apply(this,arguments)||this;t.columns=[];return t}return TableNode}(lz);var pz=function(e){__extends(TableCellNode,e);function TableCellNode(){var t=null!==e&&e.apply(this,arguments)||this;t.startIdx=0;t.endIdx=0;t.paddingLeft=0;t.paddingRight=0;t.ignored=false;return t}return TableCellNode}(lz);var fz=function(e){__extends(RefDefNode,e);function RefDefNode(){var t=null!==e&&e.apply(this,arguments)||this;t.title="";t.dest="";t.label="";return t}return RefDefNode}(lz);var hz=function(e){__extends(CustomBlockNode,e);function CustomBlockNode(){var t=null!==e&&e.apply(this,arguments)||this;t.syntaxLength=0;t.offset=-1;t.info="";return t}return CustomBlockNode}(lz);var mz=function(e){__extends(HtmlBlockNode,e);function HtmlBlockNode(){var t=null!==e&&e.apply(this,arguments)||this;t.htmlBlockType=-1;return t}return HtmlBlockNode}(lz);var gz=function(e){__extends(LinkNode,e);function LinkNode(){var t=null!==e&&e.apply(this,arguments)||this;t.destination=null;t.title=null;t.extendedAutolink=false;return t}return LinkNode}(sz);var yz=function(e){__extends(CodeNode,e);function CodeNode(){var t=null!==e&&e.apply(this,arguments)||this;t.tickCount=0;return t}return CodeNode}(sz);var bz=function(e){__extends(CustomInlineNode,e);function CustomInlineNode(){var t=null!==e&&e.apply(this,arguments)||this;t.info="";return t}return CustomInlineNode}(sz);function createNode$1(e,t){switch(e){case"heading":return new cz(e,t);case"list":case"item":return new uz(e,t);case"link":case"image":return new gz(e,t);case"codeBlock":return new dz(e,t);case"htmlBlock":return new mz(e,t);case"table":return new vz(e,t);case"tableCell":return new pz(e,t);case"document":case"paragraph":case"blockQuote":case"thematicBreak":case"tableRow":case"tableBody":case"tableHead":case"frontMatter":return new lz(e,t);case"code":return new yz(e,t);case"refDef":return new fz(e,t);case"customBlock":return new hz(e,t);case"customInline":return new bz(e,t);default:return new sz(e,t)}}function isCodeBlock(e){return"codeBlock"===e.type}function isHtmlBlock(e){return"htmlBlock"===e.type}function isHeading(e){return"heading"===e.type}function isList(e){return"list"===e.type}function isTable(e){return"table"===e.type}function isRefDef(e){return"refDef"===e.type}function isCustomBlock(e){return"customBlock"===e.type}function isCustomInline(e){return"customInline"===e.type}function text$1(e,t){var r=createNode$1("text",t);r.literal=e;return r}var wz="[A-Za-z][A-Za-z0-9-]*";var Tz="[a-zA-Z_:][a-zA-Z0-9:._-]*";var Cz="[^\"'=<>`\\x00-\\x20]+";var kz="'[^']*'";var xz='"[^"]*"';var Mz="(?:"+Cz+"|"+kz+"|"+xz+")";var Ez="(?:\\s*=\\s*"+Mz+")";var Lz="(?:\\s+"+Tz+Ez+"?)";var Nz="<"+wz+Lz+"*\\s*/?>";var Iz="</"+wz+"\\s*[>]";var Sz="\x3c!----\x3e|\x3c!--(?:-?[^>-])(?:-?[^-])*--\x3e";var Oz="[<][?].*?[?][>]";var Az="<![A-Z]+\\s+[^>]*>";var Pz="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>";var Dz="(?:"+Nz+"|"+Iz+"|"+Sz+"|"+Oz+"|"+Az+"|"+Pz+")";var Bz=new RegExp("^"+Dz,"i");var Rz;if(String.fromCodePoint)Rz=function(e){try{return String.fromCodePoint(e)}catch(e){if(e instanceof RangeError)return String.fromCharCode(65533);throw e}};else{var Hz=String.fromCharCode;var _z=Math.floor;Rz=function(){var e=[];for(var t=0;t<arguments.length;t++)e[t]=arguments[t];var r=16384;var n=[];var a;var o;var i=-1;var s=e.length;if(!s)return"";var l="";while(++i<s){var u=Number(e[i]);if(!isFinite(u)||u<0||u>1114111||_z(u)!==u)return String.fromCharCode(65533);if(u<=65535)n.push(u);else{u-=65536;a=55296+(u>>10);o=u%1024+56320;n.push(a,o)}if(i+1===s||n.length>r){l+=Hz.apply(void 0,n);n.length=0}}return l}}var $z=Rz;var Fz="(?:[w-]+.)*[A-Za-z0-9-]+.[A-Za-z0-9-]+";var jz="[^<\\s]*[^<?!.,:*_?~\\s]";var Uz="[\\w.+-]+@(?:[\\w-]+\\.)+[\\w-]+";function trimUnmatchedTrailingParens(e){var t=/\)+$/.exec(e);if(t){var r=0;for(var n=0,a=e;n<a.length;n++){var o=a[n];"("===o?r<0?r=1:r+=1:")"===o&&(r-=1)}if(r<0){var i=Math.min(-r,t[0].length);return e.substring(0,e.length-i)}}return e}function trimTrailingEntity(e){return e.replace(/&[A-Za-z0-9]+;$/,"")}function parseEmailLink(e){var t=new RegExp(Uz,"g");var r=[];var n;while(n=t.exec(e)){var a=n[0];/[_-]+$/.test(a)||r.push({text:a,range:[n.index,n.index+a.length-1],url:"mailto:"+a})}return r}function parseUrlLink(e){var t=new RegExp("(www|https?://)."+Fz+jz,"g");var r=[];var n;while(n=t.exec(e)){var a=trimTrailingEntity(trimUnmatchedTrailingParens(n[0]));var o="www"===n[1]?"http://":"";r.push({text:a,range:[n.index,n.index+a.length-1],url:""+o+a})}return r}function baseAutolinkParser(e){return __spreadArray(__spreadArray([],parseUrlLink(e)),parseEmailLink(e)).sort((function(e,t){return e.range[0]-t.range[0]}))}function convertExtAutoLinks(e,t){"boolean"===typeof t&&(t=baseAutolinkParser);var r;var _loop_1=function(){var e=r.entering,n=r.node;if(e&&"text"===n.type&&"link"!==n.parent.type){var a=n.literal;var o=t(a);if(!o||!o.length)return"continue";var i=0;var s=n.sourcepos[0],l=s[0],u=s[1];var sourcepos=function(e,t){return[[l,u+e],[l,u+t]]};var d=[];for(var v=0,p=o;v<p.length;v++){var f=p[v],m=f.range,g=f.url,y=f.text;m[0]>i&&d.push(text$1(a.substring(i,m[0]),sourcepos(i,m[0]-1)));var b=createNode$1("link",sourcepos.apply(void 0,m));b.appendChild(text$1(y,sourcepos.apply(void 0,m)));b.destination=g;b.extendedAutolink=true;d.push(b);i=m[1]+1}i<a.length&&d.push(text$1(a.substring(i),sourcepos(i,a.length-1)));for(var w=0,T=d;w<T.length;w++){var C=T[w];n.insertBefore(C)}n.unlink()}};while(r=e.next())_loop_1()}function last(e){return e[e.length-1]}function normalizeReference(e){return e.slice(1,e.length-1).trim().replace(/[ \t\r\n]+/," ").toLowerCase().toUpperCase()}function iterateObject(e,t){Object.keys(e).forEach((function(r){t(r,e[r])}))}function omit(e){var t=[];for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=__assign({},e);t.forEach((function(e){delete n[e]}));return n}function isEmptyObj(e){return!Object.keys(e).length}function clearObj(e){Object.keys(e).forEach((function(t){delete e[t]}))}var Wz=10;var qz=42;var zz=95;var Vz=96;var Gz=91;var Qz=93;var Xz=126;var Zz=60;var Kz=33;var Yz=92;var Jz=38;var eV=40;var tV=41;var rV=58;var nV=39;var aV=34;var oV=36;var iV="\\\\"+ez;var sV=new RegExp(/[!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/);var lV=new RegExp('^(?:"('+iV+'|[^"\\x00])*"|\'('+iV+"|[^'\\x00])*'|\\(("+iV+"|[^()\\x00])*\\))");var uV=/^(?:<(?:[^<>\n\\\x00]|\\.)*>)/;var cV=new RegExp("^"+ez);var dV=new RegExp("^"+Kq,"i");var vV=/`+/;var pV=/^`+/;var fV=/\.\.\./g;var hV=/--+/g;var mV=/^<([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)>/;var gV=/^<[A-Za-z][A-Za-z0-9.+-]{1,31}:[^<>\x00-\x20]*>/i;var yV=/^ *(?:\n *)?/;var bV=/^[ \t\n\x0b\x0c\x0d]/;var wV=/^\s/;var TV=/ *$/;var CV=/^ */;var kV=/^ *(?:\n|$)/;var xV=/^\[(?:[^\\\[\]]|\\.){0,1000}\]/;var MV=/^[^\n`\[\]\\!<&*_'"~$]+/m;var EV=function(){function InlineParser(e){this.subject="";this.delimiters=null;this.brackets=null;this.pos=0;this.lineStartNum=0;this.lineIdx=0;this.lineOffsets=[0];this.linePosOffset=0;this.refMap={};this.refLinkCandidateMap={};this.refDefCandidateMap={};this.options=e}InlineParser.prototype.sourcepos=function(e,t){var r=this.linePosOffset+this.lineOffsets[this.lineIdx];var n=this.lineStartNum+this.lineIdx;var a=[n,e+r];return"number"===typeof t?[a,[n,t+r]]:a};InlineParser.prototype.nextLine=function(){this.lineIdx+=1;this.linePosOffset=-this.pos};InlineParser.prototype.match=function(e){var t=e.exec(this.subject.slice(this.pos));if(null===t)return null;this.pos+=t.index+t[0].length;return t[0]};InlineParser.prototype.peek=function(){return this.pos<this.subject.length?this.subject.charCodeAt(this.pos):-1};InlineParser.prototype.spnl=function(){this.match(yV);return true};InlineParser.prototype.parseBackticks=function(e){var t=this.pos+1;var r=this.match(pV);if(null===r)return false;var n=this.pos;var a;while(null!==(a=this.match(vV)))if(a===r){var o=this.subject.slice(n,this.pos-r.length);var i=this.sourcepos(t,this.pos);var s=o.split("\n");if(s.length>1){var l=last(s);this.lineIdx+=s.length-1;this.linePosOffset=-(this.pos-l.length-r.length);i[1]=this.sourcepos(this.pos);o=s.join(" ")}var u=createNode$1("code",i);o.length>0&&null!==o.match(/[^ ]/)&&" "==o[0]&&" "==o[o.length-1]?u.literal=o.slice(1,o.length-1):u.literal=o;u.tickCount=r.length;e.appendChild(u);return true}this.pos=n;e.appendChild(text$1(r,this.sourcepos(t,this.pos-1)));return true};InlineParser.prototype.parseBackslash=function(e){var t=this.subject;var r;this.pos+=1;var n=this.pos;if(this.peek()===Wz){this.pos+=1;r=createNode$1("linebreak",this.sourcepos(this.pos-1,this.pos));e.appendChild(r);this.nextLine()}else if(cV.test(t.charAt(this.pos))){e.appendChild(text$1(t.charAt(this.pos),this.sourcepos(n,this.pos)));this.pos+=1}else e.appendChild(text$1("\\",this.sourcepos(n,n)));return true};InlineParser.prototype.parseAutolink=function(e){var t;var r;var n;var a=this.pos+1;if(t=this.match(mV)){r=t.slice(1,t.length-1);n=createNode$1("link",this.sourcepos(a,this.pos));n.destination=normalizeURI("mailto:"+r);n.title="";n.appendChild(text$1(r,this.sourcepos(a+1,this.pos-1)));e.appendChild(n);return true}if(t=this.match(gV)){r=t.slice(1,t.length-1);n=createNode$1("link",this.sourcepos(a,this.pos));n.destination=normalizeURI(r);n.title="";n.appendChild(text$1(r,this.sourcepos(a+1,this.pos-1)));e.appendChild(n);return true}return false};InlineParser.prototype.parseHtmlTag=function(e){var t=this.pos+1;var r=this.match(Bz);if(null===r)return false;var n=createNode$1("htmlInline",this.sourcepos(t,this.pos));n.literal=r;e.appendChild(n);return true};InlineParser.prototype.scanDelims=function(e){var t=0;var r=this.pos;if(e===nV||e===aV){t++;this.pos++}else while(this.peek()===e){t++;this.pos++}if(0===t||t<2&&(e===Xz||e===oV)){this.pos=r;return null}var n=0===r?"\n":this.subject.charAt(r-1);var a=this.peek();var o;o=-1===a?"\n":$z(a);var i=wV.test(o);var s=sV.test(o);var l=wV.test(n);var u=sV.test(n);var d=!i&&(!s||l||u);var v=!l&&(!u||i||s);var p;var f;if(e===zz){p=d&&(!v||u);f=v&&(!d||s)}else if(e===nV||e===aV){p=d&&!v;f=v}else if(e===oV){p=!i;f=!l}else{p=d;f=v}this.pos=r;return{numdelims:t,canOpen:p,canClose:f}};InlineParser.prototype.handleDelim=function(e,t){var r=this.scanDelims(e);if(!r)return false;var n=r.numdelims;var a=this.pos+1;var o;this.pos+=n;o=e===nV?"":e===aV?"":this.subject.slice(a-1,this.pos);var i=text$1(o,this.sourcepos(a,this.pos));t.appendChild(i);if((r.canOpen||r.canClose)&&(this.options.smart||e!==nV&&e!==aV)){this.delimiters={cc:e,numdelims:n,origdelims:n,node:i,previous:this.delimiters,next:null,canOpen:r.canOpen,canClose:r.canClose};this.delimiters.previous&&(this.delimiters.previous.next=this.delimiters)}return true};InlineParser.prototype.removeDelimiter=function(e){null!==e.previous&&(e.previous.next=e.next);null===e.next?this.delimiters=e.previous:e.next.previous=e.previous};InlineParser.prototype.removeDelimitersBetween=function(e,t){if(e.next!==t){e.next=t;t.previous=e}};InlineParser.prototype.processEmphasis=function(e){var t;var r;var n;var a;var o,i;var s;var l=false;var u=(t={},t[zz]=[e,e,e],t[qz]=[e,e,e],t[nV]=[e],t[aV]=[e],t[Xz]=[e],t[oV]=[e],t);n=this.delimiters;while(null!==n&&n.previous!==e)n=n.previous;while(null!==n){var d=n.cc;var v=d===zz||d===qz;if(n.canClose){r=n.previous;s=false;while(null!==r&&r!==e&&r!==u[d][v?n.origdelims%3:0]){l=v&&(n.canOpen||r.canClose)&&n.origdelims%3!==0&&(r.origdelims+n.origdelims)%3===0;if(r.cc===n.cc&&r.canOpen&&!l){s=true;break}r=r.previous}a=n;if(v||d===Xz||d===oV)if(s){if(r){var p=n.numdelims>=2&&r.numdelims>=2?2:1;var f=v?0:1;o=r.node;i=n.node;var m=v?1===p?"emph":"strong":"strike";d===oV&&(m="customInline");var g=createNode$1(m);var y=o.sourcepos[1];var b=i.sourcepos[0];g.sourcepos=[[y[0],y[1]-p+1],[b[0],b[1]+p-1]];o.sourcepos[1][1]-=p;i.sourcepos[0][1]+=p;o.literal=o.literal.slice(p);i.literal=i.literal.slice(p);r.numdelims-=p;n.numdelims-=p;var w=o.next;var T=void 0;while(w&&w!==i){T=w.next;w.unlink();g.appendChild(w);w=T}if(d===oV){var C=g.firstChild;var k=C.literal||"";var x=k.split(/\s/)[0];g.info=x;if(k.length<=x.length)C.unlink();else{C.sourcepos[0][1]+=x.length;C.literal=k.replace(x+" ","")}}o.insertAfter(g);this.removeDelimitersBetween(r,n);if(r.numdelims<=f){0===r.numdelims&&o.unlink();this.removeDelimiter(r)}if(n.numdelims<=f){0===n.numdelims&&i.unlink();var M=n.next;this.removeDelimiter(n);n=M}}}else n=n.next;else if(d===nV){n.node.literal="";s&&(r.node.literal="");n=n.next}else if(d===aV){n.node.literal="";s&&(r.node.literal="");n=n.next}if(!s){u[d][v?a.origdelims%3:0]=a.previous;a.canOpen||this.removeDelimiter(a)}}else n=n.next}while(null!==this.delimiters&&this.delimiters!==e)this.removeDelimiter(this.delimiters)};InlineParser.prototype.parseLinkTitle=function(){var e=this.match(lV);return null===e?null:unescapeString(e.substr(1,e.length-2))};InlineParser.prototype.parseLinkDestination=function(){var e=this.match(uV);if(null===e){if(this.peek()===Zz)return null;var t=this.pos;var r=0;var n=void 0;while(-1!==(n=this.peek()))if(n===Yz&&cV.test(this.subject.charAt(this.pos+1))){this.pos+=1;-1!==this.peek()&&(this.pos+=1)}else if(n===eV){this.pos+=1;r+=1}else if(n===tV){if(r<1)break;this.pos+=1;r-=1}else{if(null!==bV.exec($z(n)))break;this.pos+=1}if(this.pos===t&&n!==tV)return null;if(0!==r)return null;e=this.subject.substr(t,this.pos-t);return normalizeURI(unescapeString(e))}return normalizeURI(unescapeString(e.substr(1,e.length-2)))};InlineParser.prototype.parseLinkLabel=function(){var e=this.match(xV);return null===e||e.length>1001?0:e.length};InlineParser.prototype.parseOpenBracket=function(e){var t=this.pos;this.pos+=1;var r=text$1("[",this.sourcepos(this.pos,this.pos));e.appendChild(r);this.addBracket(r,t,false);return true};InlineParser.prototype.parseBang=function(e){var t=this.pos;this.pos+=1;if(this.peek()===Gz){this.pos+=1;var r=text$1("![",this.sourcepos(this.pos-1,this.pos));e.appendChild(r);this.addBracket(r,t+1,true)}else{r=text$1("!",this.sourcepos(this.pos,this.pos));e.appendChild(r)}return true};InlineParser.prototype.parseCloseBracket=function(e){var t=null;var r=null;var n=false;this.pos+=1;var a=this.pos;var o=this.brackets;if(null===o){e.appendChild(text$1("]",this.sourcepos(a,a)));return true}if(!o.active){e.appendChild(text$1("]",this.sourcepos(a,a)));this.removeBracket();return true}var i=o.image;var s=this.pos;if(this.peek()===eV){this.pos++;if(this.spnl()&&null!==(t=this.parseLinkDestination())&&this.spnl()&&(bV.test(this.subject.charAt(this.pos-1))&&(r=this.parseLinkTitle())||true)&&this.spnl()&&this.peek()===tV){this.pos+=1;n=true}else this.pos=s}var l="";if(!n){var u=this.pos;var d=this.parseLinkLabel();d>2?l=this.subject.slice(u,u+d):o.bracketAfter||(l=this.subject.slice(o.index,a));0===d&&(this.pos=s);if(l){l=normalizeReference(l);var v=this.refMap[l];if(v){t=v.destination;r=v.title;n=true}}}if(n){var p=createNode$1(i?"image":"link");p.destination=t;p.title=r||"";p.sourcepos=[o.startpos,this.sourcepos(this.pos)];var f=o.node.next;var m=void 0;while(f){m=f.next;f.unlink();p.appendChild(f);f=m}e.appendChild(p);this.processEmphasis(o.previousDelimiter);this.removeBracket();o.node.unlink();if(!i){o=this.brackets;while(null!==o){o.image||(o.active=false);o=o.previous}}this.options.referenceDefinition&&(this.refLinkCandidateMap[e.id]={node:e,refLabel:l});return true}this.removeBracket();this.pos=a;e.appendChild(text$1("]",this.sourcepos(a,a)));this.options.referenceDefinition&&(this.refLinkCandidateMap[e.id]={node:e,refLabel:l});return true};InlineParser.prototype.addBracket=function(e,t,r){null!==this.brackets&&(this.brackets.bracketAfter=true);this.brackets={node:e,startpos:this.sourcepos(t+(r?0:1)),previous:this.brackets,previousDelimiter:this.delimiters,index:t,image:r,active:true}};InlineParser.prototype.removeBracket=function(){this.brackets&&(this.brackets=this.brackets.previous)};InlineParser.prototype.parseEntity=function(e){var t;var r=this.pos+1;if(t=this.match(dV)){e.appendChild(text$1(Jr.decodeHTML(t),this.sourcepos(r,this.pos)));return true}return false};InlineParser.prototype.parseString=function(e){var t;var r=this.pos+1;if(t=this.match(MV)){if(this.options.smart){var n=t.replace(fV,"").replace(hV,(function(e){var t=0;var r=0;if(e.length%3===0)r=e.length/3;else if(e.length%2===0)t=e.length/2;else if(e.length%3===2){t=1;r=(e.length-2)/3}else{t=2;r=(e.length-4)/3}return repeat("",r)+repeat("",t)}));e.appendChild(text$1(n,this.sourcepos(r,this.pos)))}else{var a=text$1(t,this.sourcepos(r,this.pos));e.appendChild(a)}return true}return false};InlineParser.prototype.parseNewline=function(e){this.pos+=1;var t=e.lastChild;if(t&&"text"===t.type&&" "===t.literal[t.literal.length-1]){var r=" "===t.literal[t.literal.length-2];var n=t.literal.length;t.literal=t.literal.replace(TV,"");var a=n-t.literal.length;t.sourcepos[1][1]-=a;e.appendChild(createNode$1(r?"linebreak":"softbreak",this.sourcepos(this.pos-a,this.pos)))}else e.appendChild(createNode$1("softbreak",this.sourcepos(this.pos,this.pos)));this.nextLine();this.match(CV);return true};InlineParser.prototype.parseReference=function(e,t){if(!this.options.referenceDefinition)return 0;this.subject=e.stringContent;this.pos=0;var r=null;var n=this.pos;var a=this.parseLinkLabel();if(0===a)return 0;var o=this.subject.substr(0,a);if(this.peek()!==rV){this.pos=n;return 0}this.pos++;this.spnl();var i=this.parseLinkDestination();if(null===i){this.pos=n;return 0}var s=this.pos;this.spnl();this.pos!==s&&(r=this.parseLinkTitle());if(null===r){r="";this.pos=s}var l=true;if(null===this.match(kV))if(""===r)l=false;else{r="";this.pos=s;l=null!==this.match(kV)}if(!l){this.pos=n;return 0}var u=normalizeReference(o);if(""===u){this.pos=n;return 0}var d=this.getReferenceDefSourcepos(e);e.sourcepos[0][0]=d[1][0]+1;var v=createNode$1("refDef",d);v.title=r;v.dest=i;v.label=u;e.insertBefore(v);t[u]?this.refDefCandidateMap[v.id]=v:t[u]=createRefDefState(v);return this.pos-n};InlineParser.prototype.mergeTextNodes=function(e){var t;var r=[];while(t=e.next()){var n=t.entering,a=t.node;if(n&&"text"===a.type)r.push(a);else if(1===r.length)r=[];else if(r.length>1){var o=r[0];var i=r[r.length-1];o.sourcepos&&i.sourcepos&&(o.sourcepos[1]=i.sourcepos[1]);o.next=i.next;o.next&&(o.next.prev=o);for(var s=1;s<r.length;s+=1){o.literal+=r[s].literal;r[s].unlink()}r=[]}}};InlineParser.prototype.getReferenceDefSourcepos=function(e){var t=e.stringContent.split(/\n|\r\n/);var r=false;var n=0;var a={line:0,ch:0};for(var o=0;o<t.length;o+=1){var i=t[o];if(bV.test(i))break;if(/\:/.test(i)&&0===n){if(r)break;var s=i.indexOf(":")===i.length-1?o+1:o;a={line:s,ch:t[s].length};r=true}var l=i.match(/'|"/g);l&&(n+=l.length);if(2===n){a={line:o,ch:i.length};break}}return[[e.sourcepos[0][0],e.sourcepos[0][1]],[e.sourcepos[0][0]+a.line,a.ch]]};InlineParser.prototype.parseInline=function(e){var t;var r=false;var n=this.peek();if(-1===n)return false;switch(n){case Wz:r=this.parseNewline(e);break;case Yz:r=this.parseBackslash(e);break;case Vz:r=this.parseBackticks(e);break;case qz:case zz:case Xz:case oV:r=this.handleDelim(n,e);break;case nV:case aV:r=!!(null===(t=this.options)||void 0===t?void 0:t.smart)&&this.handleDelim(n,e);break;case Gz:r=this.parseOpenBracket(e);break;case Kz:r=this.parseBang(e);break;case Qz:r=this.parseCloseBracket(e);break;case Zz:r=this.parseAutolink(e)||this.parseHtmlTag(e);break;case Jz:e.disabledEntityParse||(r=this.parseEntity(e));break;default:r=this.parseString(e);break}if(!r){this.pos+=1;e.appendChild(text$1($z(n),this.sourcepos(this.pos,this.pos+1)))}return true};InlineParser.prototype.parse=function(e){this.subject=e.stringContent.trim();this.pos=0;this.delimiters=null;this.brackets=null;this.lineOffsets=e.lineOffsets||[0];this.lineIdx=0;this.linePosOffset=0;this.lineStartNum=e.sourcepos[0][0];isHeading(e)&&(this.lineOffsets[0]+=e.level+1);while(this.parseInline(e));e.stringContent=null;this.processEmphasis(null);this.mergeTextNodes(e.walker());var t=this.options,r=t.extendedAutolinks,n=t.customParser;r&&convertExtAutoLinks(e.walker(),r);if(n&&e.firstChild){var a;var o=e.firstChild.walker();while(a=o.next()){var i=a.node,s=a.entering;n[i.type]&&n[i.type](i,{entering:s,options:this.options})}}};return InlineParser}();var LV=/^\[([ \txX])\][ \t]+/;function taskListItemFinalize(e,t){if(t.firstChild&&"paragraph"===t.firstChild.type){var r=t.firstChild;var n=r.stringContent.match(LV);if(n){var a=n[0].length;r.stringContent=r.stringContent.substring(a-1);r.sourcepos[0][1]+=a;r.lineOffsets[0]+=a;t.listData.task=true;t.listData.checked=/[xX]/.test(n[1])}}}var NV={continue:function(){return 0},finalize:function(){},canContain:function(e){return"tableHead"===e||"tableBody"===e},acceptsLines:false};var IV={continue:function(){return 0},finalize:function(){},canContain:function(e){return"tableRow"===e},acceptsLines:false};var SV={continue:function(){return 1},finalize:function(){},canContain:function(e){return"tableRow"===e||"tableDelimRow"===e},acceptsLines:false};var OV={continue:function(){return 1},finalize:function(){},canContain:function(e){return"tableDelimCell"===e},acceptsLines:false};var AV={continue:function(){return 1},finalize:function(){},canContain:function(){return false},acceptsLines:false};var PV={continue:function(){return 1},finalize:function(){},canContain:function(e){return"tableCell"===e},acceptsLines:false};var DV={continue:function(){return 1},finalize:function(){},canContain:function(){return false},acceptsLines:false};var BV=4;var RV=9;var HV=62;var _V=60;var $V=32;var FV=91;var jV=/[^ \t\f\v\r\n]/;var UV=/^(?:`{3,}|~{3,})(?= *$)/;function endsWithBlankLine(e){var t=e;while(t){if(t.lastLineBlank)return true;var r=t.type;if(t.lastLineChecked||"list"!==r&&"item"!==r){t.lastLineChecked=true;break}t.lastLineChecked=true;t=t.lastChild}return false}function peek(e,t){return t<e.length?e.charCodeAt(t):-1}function isBlank(e){return!jV.test(e)}function isSpaceOrTab(e){return e===$V||e===RV}var WV=/^\$\$$/;var qV={continue:function(e,t){var r=e.currentLine;var n=r.match(WV);if(n){e.lastLineLength=n[0].length;e.finalize(t,e.lineNumber);return 2}var a=t.offset;while(a>0&&isSpaceOrTab(peek(r,e.offset))){e.advanceOffset(1,true);a--}return 0},finalize:function(e,t){if(null!==t.stringContent){var r=t.stringContent;var n=r.indexOf("\n");var a=r.slice(0,n);var o=r.slice(n+1);var i=a.match(/^(\s*)(.*)/);t.info=unescapeString(i[2].trim());t.literal=o;t.stringContent=null}},canContain:function(){return false},acceptsLines:true};var zV={continue:function(){return 1},finalize:function(){},canContain:function(){return false},acceptsLines:true};var VV={continue:function(){return 0},finalize:function(){},canContain:function(e){return"item"!==e},acceptsLines:false};var GV={continue:function(){return 0},finalize:function(e,t){var r=t.firstChild;while(r){if(endsWithBlankLine(r)&&r.next){t.listData.tight=false;break}var n=r.firstChild;while(n){if(endsWithBlankLine(n)&&(r.next||n.next)){t.listData.tight=false;break}n=n.next}r=r.next}},canContain:function(e){return"item"===e},acceptsLines:false};var QV={continue:function(e){var t=e.currentLine;if(e.indented||peek(t,e.nextNonspace)!==HV)return 1;e.advanceNextNonspace();e.advanceOffset(1,false);isSpaceOrTab(peek(t,e.offset))&&e.advanceOffset(1,true);return 0},finalize:function(){},canContain:function(e){return"item"!==e},acceptsLines:false};var XV={continue:function(e,t){if(e.blank){if(null===t.firstChild)return 1;e.advanceNextNonspace()}else{if(!(e.indent>=t.listData.markerOffset+t.listData.padding))return 1;e.advanceOffset(t.listData.markerOffset+t.listData.padding,true)}return 0},finalize:taskListItemFinalize,canContain:function(e){return"item"!==e},acceptsLines:false};var ZV={continue:function(){return 1},finalize:function(){},canContain:function(){return false},acceptsLines:false};var KV={continue:function(){return 1},finalize:function(){},canContain:function(){return false},acceptsLines:false};var YV={continue:function(e,t){var r=e.currentLine;var n=e.indent;if(t.isFenced){var a=n<=3&&r.charAt(e.nextNonspace)===t.fenceChar&&r.slice(e.nextNonspace).match(UV);if(a&&a[0].length>=t.fenceLength){e.lastLineLength=e.offset+n+a[0].length;e.finalize(t,e.lineNumber);return 2}var o=t.fenceOffset;while(o>0&&isSpaceOrTab(peek(r,e.offset))){e.advanceOffset(1,true);o--}}else if(n>=BV)e.advanceOffset(BV,true);else{if(!e.blank)return 1;e.advanceNextNonspace()}return 0},finalize:function(e,t){var r;if(null!==t.stringContent){if(t.isFenced){var n=t.stringContent;var a=n.indexOf("\n");var o=n.slice(0,a);var i=n.slice(a+1);var s=o.match(/^(\s*)(.*)/);t.infoPadding=s[1].length;t.info=unescapeString(s[2].trim());t.literal=i}else t.literal=null===(r=t.stringContent)||void 0===r?void 0:r.replace(/(\n *)+$/,"\n");t.stringContent=null}},canContain:function(){return false},acceptsLines:true};var JV={continue:function(e,t){return!e.blank||6!==t.htmlBlockType&&7!==t.htmlBlockType?0:1},finalize:function(e,t){var r;t.literal=(null===(r=t.stringContent)||void 0===r?void 0:r.replace(/(\n *)+$/,""))||null;t.stringContent=null},canContain:function(){return false},acceptsLines:true};var eG={continue:function(e){return e.blank?1:0},finalize:function(e,t){if(null!==t.stringContent){var r;var n=false;while(peek(t.stringContent,0)===FV&&(r=e.inlineParser.parseReference(t,e.refMap))){t.stringContent=t.stringContent.slice(r);n=true}n&&isBlank(t.stringContent)&&t.unlink()}},canContain:function(){return false},acceptsLines:true};var tG=zV;var rG=zV;var nG={document:VV,list:GV,blockQuote:QV,item:XV,heading:ZV,thematicBreak:KV,codeBlock:YV,htmlBlock:JV,paragraph:eG,table:NV,tableBody:IV,tableHead:SV,tableRow:PV,tableCell:DV,tableDelimRow:OV,tableDelimCell:AV,refDef:tG,customBlock:qV,frontMatter:rG};function parseRowContent(e){var t=0;var r=0;var n=[];for(var a=0;a<e.length;a+=1)if("|"===e[a]&&"\\"!==e[a-1]){var o=e.substring(t,a);0===t&&isEmpty(o)?r=a+1:n.push(o);t=a+1}if(t<e.length){o=e.substring(t,e.length);isEmpty(o)||n.push(o)}return[r,n]}function generateTableCells(e,t,r,n){var a=[];for(var o=0,i=t;o<i.length;o++){var s=i[o];var l=s.match(/^[ \t]+/);var u=l?l[0].length:0;var d=void 0,v=void 0;if(u===s.length){u=0;d=0;v=""}else{var p=s.match(/[ \t]+$/);d=p?p[0].length:0;v=s.slice(u,s.length-d)}var f=n+u;var m=createNode$1(e,[[r,n],[r,n+s.length-1]]);m.stringContent=v.replace(/\\\|/g,"|");m.startIdx=a.length;m.endIdx=a.length;m.lineOffsets=[f-1];m.paddingLeft=u;m.paddingRight=d;a.push(m);n+=s.length+1}return a}function getColumnFromDelimCell(e){var t=null;var r=e.stringContent;var n=r[0];var a=r[r.length-1];":"===a?t=":"===n?"center":"right":":"===n&&(t="left");return{align:t}}var tableHead=function(e,t){var r=t.stringContent;if("paragraph"===t.type&&!e.indented&&!e.blank){var n=r.length-1;var a=r.lastIndexOf("\n",n-1)+1;var o=r.slice(a,n);var i=e.currentLine.slice(e.nextNonspace);var s=parseRowContent(o),l=s[0],u=s[1];var d=parseRowContent(i),v=d[0],p=d[1];var f=/^[ \t]*:?-+:?[ \t]*$/;if(!u.length||!p.length||p.some((function(e){return!f.test(e)}))||1===p.length&&0!==i.indexOf("|"))return 0;var m=t.lineOffsets;var g=e.lineNumber-1;var y=last(m)+1;var b=createNode$1("table",[[g,y],[e.lineNumber,e.offset]]);b.columns=p.map((function(){return{align:null}}));t.insertAfter(b);if(1===m.length)t.unlink();else{t.stringContent=r.slice(0,a);var w=r.lastIndexOf("\n",a-2)+1;var T=a-w-1;e.lastLineLength=m[m.length-2]+T;e.finalize(t,g-1)}e.advanceOffset(e.currentLine.length-e.offset,false);var C=createNode$1("tableHead",[[g,y],[e.lineNumber,e.offset]]);b.appendChild(C);var k=createNode$1("tableRow",[[g,y],[g,y+o.length-1]]);var x=createNode$1("tableDelimRow",[[e.lineNumber,e.nextNonspace+1],[e.lineNumber,e.offset]]);C.appendChild(k);C.appendChild(x);generateTableCells("tableCell",u,g,y+l).forEach((function(e){k.appendChild(e)}));var M=generateTableCells("tableDelimCell",p,e.lineNumber,e.nextNonspace+1+v);M.forEach((function(e){x.appendChild(e)}));b.columns=M.map(getColumnFromDelimCell);e.tip=b;return 2}return 0};var tableBody=function(e,t){if("table"!==t.type&&"tableBody"!==t.type||!e.blank&&-1===e.currentLine.indexOf("|"))return 0;e.advanceOffset(e.currentLine.length-e.offset,false);if(e.blank){var r=t;if("tableBody"===t.type){r=t.parent;e.finalize(t,e.lineNumber-1)}e.finalize(r,e.lineNumber-1);return 0}var n=t;if("table"===t.type){n=e.addChild("tableBody",e.nextNonspace);n.stringContent=null}var a=createNode$1("tableRow",[[e.lineNumber,e.nextNonspace+1],[e.lineNumber,e.currentLine.length]]);n.appendChild(a);var o=n.parent;var i=e.currentLine.slice(e.nextNonspace);var s=parseRowContent(i),l=s[0],u=s[1];generateTableCells("tableCell",u,e.lineNumber,e.nextNonspace+1+l).forEach((function(e,t){t>=o.columns.length&&(e.ignored=true);a.appendChild(e)}));return 2};var aG=/^(\$\$)(\s*[a-zA-Z])+/;var oG=/^(\$\$)(\s*[a-zA-Z])+.*(\$\$)/;var customBlock=function(e){var t;if(!e.indented&&!oG.test(e.currentLine)&&(t=e.currentLine.match(aG))){var r=t[1].length;e.closeUnmatchedBlocks();var n=e.addChild("customBlock",e.nextNonspace);n.syntaxLength=r;n.offset=e.indent;e.advanceNextNonspace();e.advanceOffset(r,false);return 2}return 0};var iG=/^`{3,}(?!.*`)|^~{3,}/;var sG=[/./,/^<(?:script|pre|style)(?:\s|>|$)/i,/^<!--/,/^<[?]/,/^<![A-Z]/,/^<!\[CDATA\[/,/^<[/]?(?:address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[123456]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?:\s|[/]?[>]|$)/i,new RegExp("^(?:"+Nz+"|"+Iz+")\\s*$","i")];var lG=/^(?:=+|-+)[ \t]*$/;var uG=/^#{1,6}(?:[ \t]+|$)/;var cG=/^(?:(?:\*[ \t]*){3,}|(?:_[ \t]*){3,}|(?:-[ \t]*){3,})[ \t]*$/;var dG=/^[*+-]/;var vG=/^(\d{1,9})([.)])/;function parseListMarker(e,t){var r=e.currentLine.slice(e.nextNonspace);var n;var a;var o={type:"bullet",tight:true,bulletChar:"",start:0,delimiter:"",padding:0,markerOffset:e.indent,task:false,checked:false};if(e.indent>=4)return null;if(n=r.match(dG)){o.type="bullet";o.bulletChar=n[0][0]}else{if(!(n=r.match(vG))||"paragraph"===t.type&&"1"!==n[1])return null;o.type="ordered";o.start=parseInt(n[1],10);o.delimiter=n[2]}a=peek(e.currentLine,e.nextNonspace+n[0].length);if(!(-1===a||a===RV||a===$V))return null;if("paragraph"===t.type&&!e.currentLine.slice(e.nextNonspace+n[0].length).match(jV))return null;e.advanceNextNonspace();e.advanceOffset(n[0].length,true);var i=e.column;var s=e.offset;do{e.advanceOffset(1,true);a=peek(e.currentLine,e.offset)}while(e.column-i<5&&isSpaceOrTab(a));var l=-1===peek(e.currentLine,e.offset);var u=e.column-i;if(u>=5||u<1||l){o.padding=n[0].length+1;e.column=i;e.offset=s;isSpaceOrTab(peek(e.currentLine,e.offset))&&e.advanceOffset(1,true)}else o.padding=n[0].length+u;return o}function listsMatch(e,t){return e.type===t.type&&e.delimiter===t.delimiter&&e.bulletChar===t.bulletChar}function isDisallowedDeepHeading(e,t){return e.options.disallowDeepHeading&&("blockQuote"===t.type||"item"===t.type)}var blockQuote=function(e){if(!e.indented&&peek(e.currentLine,e.nextNonspace)===HV){e.advanceNextNonspace();e.advanceOffset(1,false);isSpaceOrTab(peek(e.currentLine,e.offset))&&e.advanceOffset(1,true);e.closeUnmatchedBlocks();e.addChild("blockQuote",e.nextNonspace);return 1}return 0};var atxHeading=function(e,t){var r;if(!e.indented&&!isDisallowedDeepHeading(e,t)&&(r=e.currentLine.slice(e.nextNonspace).match(uG))){e.advanceNextNonspace();e.advanceOffset(r[0].length,false);e.closeUnmatchedBlocks();var n=e.addChild("heading",e.nextNonspace);n.level=r[0].trim().length;n.headingType="atx";n.stringContent=e.currentLine.slice(e.offset).replace(/^[ \t]*#+[ \t]*$/,"").replace(/[ \t]+#+[ \t]*$/,"");e.advanceOffset(e.currentLine.length-e.offset);return 2}return 0};var fencedCodeBlock=function(e){var t;if(!e.indented&&(t=e.currentLine.slice(e.nextNonspace).match(iG))){var r=t[0].length;e.closeUnmatchedBlocks();var n=e.addChild("codeBlock",e.nextNonspace);n.isFenced=true;n.fenceLength=r;n.fenceChar=t[0][0];n.fenceOffset=e.indent;e.advanceNextNonspace();e.advanceOffset(r,false);return 2}return 0};var htmlBlock=function(e,t){if(!e.indented&&peek(e.currentLine,e.nextNonspace)===_V){var r=e.currentLine.slice(e.nextNonspace);var n=e.options.disallowedHtmlBlockTags;var a=void 0;for(a=1;a<=7;a++){var o=r.match(sG[a]);if(o){if(7===a){if("paragraph"===t.type)return 0;if(n.length>0){var i=new RegExp("</?(?:"+n.join("|")+")","i");if(i.test(o[0]))return 0}}e.closeUnmatchedBlocks();var s=e.addChild("htmlBlock",e.offset);s.htmlBlockType=a;return 2}}}return 0};var seTextHeading=function(e,t){var r;if(null!==t.stringContent&&!e.indented&&"paragraph"===t.type&&!isDisallowedDeepHeading(e,t.parent)&&(r=e.currentLine.slice(e.nextNonspace).match(lG))){e.closeUnmatchedBlocks();var n=void 0;while(peek(t.stringContent,0)===FV&&(n=e.inlineParser.parseReference(t,e.refMap)))t.stringContent=t.stringContent.slice(n);if(t.stringContent.length>0){var a=createNode$1("heading",t.sourcepos);a.level="="===r[0][0]?1:2;a.headingType="setext";a.stringContent=t.stringContent;t.insertAfter(a);t.unlink();e.tip=a;e.advanceOffset(e.currentLine.length-e.offset,false);return 2}return 0}return 0};var thematicBreak=function(e){if(!e.indented&&cG.test(e.currentLine.slice(e.nextNonspace))){e.closeUnmatchedBlocks();e.addChild("thematicBreak",e.nextNonspace);e.advanceOffset(e.currentLine.length-e.offset,false);return 2}return 0};var listItem=function(e,t){var r;var n=t;if((!e.indented||"list"===t.type)&&(r=parseListMarker(e,n))){e.closeUnmatchedBlocks();if("list"!==e.tip.type||!listsMatch(n.listData,r)){n=e.addChild("list",e.nextNonspace);n.listData=r}n=e.addChild("item",e.nextNonspace);n.listData=r;return 1}return 0};var indentedCodeBlock=function(e){if(e.indented&&"paragraph"!==e.tip.type&&!e.blank){e.advanceOffset(BV,true);e.closeUnmatchedBlocks();e.addChild("codeBlock",e.offset);return 2}return 0};var pG=[blockQuote,atxHeading,fencedCodeBlock,htmlBlock,seTextHeading,thematicBreak,listItem,indentedCodeBlock,tableHead,tableBody,customBlock];var fG=/^(-{3}|\+{3}|;{3})$/;var frontMatter$1=function(e,t){var r=e.currentLine,n=e.lineNumber,a=e.indented;if(1===n&&!a&&"document"===t.type&&fG.test(r)){e.closeUnmatchedBlocks();var o=e.addChild("frontMatter",e.nextNonspace);o.stringContent=r;e.advanceNextNonspace();e.advanceOffset(r.length,false);return 2}return 0};var hG={continue:function(e,t){var r=e.currentLine;var n=r.match(fG);if("frontMatter"===t.type&&n){t.stringContent+=r;e.lastLineLength=n[0].length;e.finalize(t,e.lineNumber);return 2}return 0},finalize:function(e,t){if(null!==t.stringContent){t.literal=t.stringContent;t.stringContent=null}},canContain:function(){return false},acceptsLines:true};var mG=[/./,/<\/(?:script|pre|style)>/i,/-->/,/\?>/,/>/,/\]\]>/];var gG=/^[#`~*+_=<>0-9-;$]/;var yG=/\r\n|\n|\r/;function document$2(){return createNode$1("document",[[1,1],[0,0]])}var bG={smart:false,tagFilter:false,extendedAutolinks:false,disallowedHtmlBlockTags:[],referenceDefinition:false,disallowDeepHeading:false,customParser:null,frontMatter:false};var wG=function(){function Parser(e){this.options=__assign(__assign({},bG),e);this.doc=document$2();this.tip=this.doc;this.oldtip=this.doc;this.lineNumber=0;this.offset=0;this.column=0;this.nextNonspace=0;this.nextNonspaceColumn=0;this.indent=0;this.currentLine="";this.indented=false;this.blank=false;this.partiallyConsumedTab=false;this.allClosed=true;this.lastMatchedContainer=this.doc;this.refMap={};this.refLinkCandidateMap={};this.refDefCandidateMap={};this.lastLineLength=0;this.lines=[];if(this.options.frontMatter){nG.frontMatter=hG;pG.unshift(frontMatter$1)}this.inlineParser=new EV(this.options)}Parser.prototype.advanceOffset=function(e,t){void 0===t&&(t=false);var r=this.currentLine;var n,a;var o;while(e>0&&(o=r[this.offset]))if("\t"===o){n=4-this.column%4;if(t){this.partiallyConsumedTab=n>e;a=n>e?e:n;this.column+=a;this.offset+=this.partiallyConsumedTab?0:1;e-=a}else{this.partiallyConsumedTab=false;this.column+=n;this.offset+=1;e-=1}}else{this.partiallyConsumedTab=false;this.offset+=1;this.column+=1;e-=1}};Parser.prototype.advanceNextNonspace=function(){this.offset=this.nextNonspace;this.column=this.nextNonspaceColumn;this.partiallyConsumedTab=false};Parser.prototype.findNextNonspace=function(){var e=this.currentLine;var t=this.offset;var r=this.column;var n;while(""!==(n=e.charAt(t)))if(" "===n){t++;r++}else{if("\t"!==n)break;t++;r+=4-r%4}this.blank="\n"===n||"\r"===n||""===n;this.nextNonspace=t;this.nextNonspaceColumn=r;this.indent=this.nextNonspaceColumn-this.column;this.indented=this.indent>=BV};Parser.prototype.addLine=function(){if(this.partiallyConsumedTab){this.offset+=1;var e=4-this.column%4;this.tip.stringContent+=repeat(" ",e)}this.tip.lineOffsets?this.tip.lineOffsets.push(this.offset):this.tip.lineOffsets=[this.offset];this.tip.stringContent+=this.currentLine.slice(this.offset)+"\n"};Parser.prototype.addChild=function(e,t){while(!nG[this.tip.type].canContain(e))this.finalize(this.tip,this.lineNumber-1);var r=t+1;var n=createNode$1(e,[[this.lineNumber,r],[0,0]]);n.stringContent="";this.tip.appendChild(n);this.tip=n;return n};Parser.prototype.closeUnmatchedBlocks=function(){if(!this.allClosed){while(this.oldtip!==this.lastMatchedContainer){var e=this.oldtip.parent;this.finalize(this.oldtip,this.lineNumber-1);this.oldtip=e}this.allClosed=true}};Parser.prototype.finalize=function(e,t){var r=e.parent;e.open=false;e.sourcepos[1]=[t,this.lastLineLength];nG[e.type].finalize(this,e);this.tip=r};Parser.prototype.processInlines=function(e){var t;var r=this.options.customParser;var n=e.walker();this.inlineParser.refMap=this.refMap;this.inlineParser.refLinkCandidateMap=this.refLinkCandidateMap;this.inlineParser.refDefCandidateMap=this.refDefCandidateMap;this.inlineParser.options=this.options;while(t=n.next()){var a=t.node,o=t.entering;var i=a.type;r&&r[i]&&r[i](a,{entering:o,options:this.options});o||"paragraph"!==i&&"heading"!==i&&("tableCell"!==i||a.ignored)||this.inlineParser.parse(a)}};Parser.prototype.incorporateLine=function(e){var t=this.doc;this.oldtip=this.tip;this.offset=0;this.column=0;this.blank=false;this.partiallyConsumedTab=false;this.lineNumber+=1;-1!==e.indexOf("\0")&&(e=e.replace(/\0/g,""));this.currentLine=e;var r=true;var n;while((n=t.lastChild)&&n.open){t=n;this.findNextNonspace();switch(nG[t.type].continue(this,t)){case 0:break;case 1:r=false;break;case 2:this.lastLineLength=e.length;return;default:throw new Error("continue returned illegal value, must be 0, 1, or 2")}if(!r){t=t.parent;break}}this.allClosed=t===this.oldtip;this.lastMatchedContainer=t;var a="paragraph"!==t.type&&nG[t.type].acceptsLines;var o=pG.length;while(!a){this.findNextNonspace();if("table"!==t.type&&"tableBody"!==t.type&&"paragraph"!==t.type&&!this.indented&&!gG.test(e.slice(this.nextNonspace))){this.advanceNextNonspace();break}var i=0;while(i<o){var s=pG[i](this,t);if(1===s){t=this.tip;break}if(2===s){t=this.tip;a=true;break}i++}if(i===o){this.advanceNextNonspace();break}}if(this.allClosed||this.blank||"paragraph"!==this.tip.type){this.closeUnmatchedBlocks();this.blank&&t.lastChild&&(t.lastChild.lastLineBlank=true);var l=t.type;var u=this.blank&&!("blockQuote"===l||isCodeBlock(t)&&t.isFenced||"item"===l&&!t.firstChild&&t.sourcepos[0][0]===this.lineNumber);var d=t;while(d){d.lastLineBlank=u;d=d.parent}if(nG[l].acceptsLines){this.addLine();if(isHtmlBlock(t)&&t.htmlBlockType>=1&&t.htmlBlockType<=5&&mG[t.htmlBlockType].test(this.currentLine.slice(this.offset))){this.lastLineLength=e.length;this.finalize(t,this.lineNumber)}}else if(this.offset<e.length&&!this.blank){t=this.addChild("paragraph",this.offset);this.advanceNextNonspace();this.addLine()}}else this.addLine();this.lastLineLength=e.length};Parser.prototype.parse=function(e,t){this.doc=document$2();this.tip=this.doc;this.lineNumber=0;this.lastLineLength=0;this.offset=0;this.column=0;this.lastMatchedContainer=this.doc;this.currentLine="";var r=e.split(yG);var n=r.length;this.lines=t||r;this.options.referenceDefinition&&this.clearRefMaps();e.charCodeAt(e.length-1)===Wz&&(n-=1);for(var a=0;a<n;a++)this.incorporateLine(r[a]);while(this.tip)this.finalize(this.tip,n);this.processInlines(this.doc);return this.doc};Parser.prototype.partialParseStart=function(e,t){this.doc=document$2();this.tip=this.doc;this.lineNumber=e-1;this.lastLineLength=0;this.offset=0;this.column=0;this.lastMatchedContainer=this.doc;this.currentLine="";var r=t.length;for(var n=0;n<r;n++)this.incorporateLine(t[n]);return this.doc};Parser.prototype.partialParseExtends=function(e){for(var t=0;t<e.length;t++)this.incorporateLine(e[t])};Parser.prototype.partialParseFinish=function(){while(this.tip)this.finalize(this.tip,this.lineNumber);this.processInlines(this.doc)};Parser.prototype.setRefMaps=function(e,t,r){this.refMap=e;this.refLinkCandidateMap=t;this.refDefCandidateMap=r};Parser.prototype.clearRefMaps=function(){[this.refMap,this.refLinkCandidateMap,this.refDefCandidateMap].forEach((function(e){clearObj(e)}))};return Parser}();function comparePos(e,t){return e[0]<t[0]?1:e[0]>t[0]?-1:e[1]<t[1]?1:e[1]>t[1]?-1:0}function compareRangeAndPos(e,t){var r=e[0],n=e[1];return 1===comparePos(n,t)?1:-1===comparePos(r,t)?-1:0}function removeNextUntil(e,t){if(e.parent===t.parent&&e!==t){var r=e.next;while(r&&r!==t){var n=r.next;for(var a=0,o=["parent","prev","next"];a<o.length;a++){var i=o[a];if(r[i]){removeNodeById(r[i].id);r[i]=null}}r=n}e.next=t.next;t.next?t.next.prev=e:e.parent.lastChild=e}}function getChildNodes(e){var t=[];var r=e.firstChild;while(r){t.push(r);r=r.next}return t}function insertNodesBefore(e,t){for(var r=0,n=t;r<n.length;r++){var a=n[r];e.insertBefore(a)}}function prependChildNodes(e,t){for(var r=t.length-1;r>=0;r-=1)e.prependChild(t[r])}function updateNextLineNumbers(e,t){if(e&&e.parent&&0!==t){var r=e.parent.walker();r.resumeAt(e,true);var n;while(n=r.next()){var a=n.node,o=n.entering;if(o){a.sourcepos[0][0]+=t;a.sourcepos[1][0]+=t}}}}function compareRangeAndLine(e,t){var r=e[0],n=e[1];return n[0]<t?1:r[0]>t?-1:0}function findChildNodeAtLine(e,t){var r=e.firstChild;while(r){var n=compareRangeAndLine(r.sourcepos,t);if(0===n)return r;if(-1===n)return r.prev||r;r=r.next}return e.lastChild}function lastLeafNode(e){while(e.lastChild)e=e.lastChild;return e}function sameLineTopAncestor(e){while(e.parent&&"document"!==e.parent.type&&e.parent.sourcepos[0][0]===e.sourcepos[0][0])e=e.parent;return e}function findFirstNodeAtLine(e,t){var r=e.firstChild;var n=null;while(r){var a=compareRangeAndLine(r.sourcepos,t);if(0===a){if(r.sourcepos[0][0]===t||!r.firstChild)return r;n=r;r=r.firstChild}else{if(-1===a)break;n=r;r=r.next}}return n?sameLineTopAncestor(lastLeafNode(n)):null}function findNodeAtPosition(e,t){var r=e;var n=null;while(r){var a=compareRangeAndPos(r.sourcepos,t);if(0===a){if(!r.firstChild)return r;n=r;r=r.firstChild}else{if(-1===a)return n;if(!r.next)return n;r=r.next}}return r}function findNodeById(e){return getNodeById(e)||null}function invokeNextUntil(e,t,r){void 0===r&&(r=null);if(t){var n=t.walker();while(t&&t!==r){e(t);var a=n.next();if(!a)break;t=a.node}}}function isUnlinked(e){var t=findNodeById(e);if(!t)return true;while(t&&"document"!==t.type){if(!t.parent&&!t.prev&&!t.next)return true;t=t.parent}return false}var TG=/\r\n|\n|\r/;function canBeContinuedListItem(e){var t=e.match(/^[ \t]+/);if(t&&(t[0].length>=2||/\t/.test(t[0])))return true;var r=t?e.slice(t.length):e;return dG.test(r)||vG.test(r)}function canBeContinuedTableBody(e){return!isBlank(e)&&-1!==e.indexOf("|")}function createRefDefState(e){var t=e.id,r=e.title,n=e.sourcepos,a=e.dest;return{id:t,title:r,sourcepos:n,unlinked:false,destination:a}}var CG=function(){function ToastMark(e,t){this.refMap={};this.refLinkCandidateMap={};this.refDefCandidateMap={};this.referenceDefinition=!!(null===t||void 0===t?void 0:t.referenceDefinition);this.parser=new wG(t);this.parser.setRefMaps(this.refMap,this.refLinkCandidateMap,this.refDefCandidateMap);this.eventHandlerMap={change:[]};e=e||"";this.lineTexts=e.split(TG);this.root=this.parser.parse(e,this.lineTexts)}ToastMark.prototype.updateLineTexts=function(e,t,r){var n;var a=e[0],o=e[1];var i=t[0],s=t[1];var l=r.split(TG);var u=l.length;var d=this.lineTexts[a-1];var v=this.lineTexts[i-1];l[0]=d.slice(0,o-1)+l[0];l[u-1]=l[u-1]+v.slice(s-1);var p=i-a+1;(n=this.lineTexts).splice.apply(n,__spreadArray([a-1,p],l));return u-p};ToastMark.prototype.updateRootNodeState=function(){if(1!==this.lineTexts.length||""!==this.lineTexts[0]){this.root.lastChild&&(this.root.lastLineBlank=this.root.lastChild.lastLineBlank);var e=this.lineTexts;var t=e.length-1;while(""===e[t])t-=1;e.length-2>t&&(t+=1);this.root.sourcepos[1]=[t+1,e[t].length]}else{this.root.lastLineBlank=true;this.root.sourcepos=[[1,1],[1,0]]}};ToastMark.prototype.replaceRangeNodes=function(e,t,r){if(e){insertNodesBefore(e,r);removeNextUntil(e,t);[e.id,t.id].forEach((function(e){return removeNodeById(e)}));e.unlink()}else if(t){insertNodesBefore(t,r);removeNodeById(t.id);t.unlink()}else prependChildNodes(this.root,r)};ToastMark.prototype.getNodeRange=function(e,t){var r=findChildNodeAtLine(this.root,e[0]);var n=findChildNodeAtLine(this.root,t[0]);n&&n.next&&t[0]+1===n.next.sourcepos[0][0]&&(n=n.next);return[r,n]};ToastMark.prototype.trigger=function(e,t){this.eventHandlerMap[e].forEach((function(e){e(t)}))};ToastMark.prototype.extendEndLine=function(e){while(""===this.lineTexts[e])e+=1;return e};ToastMark.prototype.parseRange=function(e,t,r,n){if(e&&e.prev&&(isList(e.prev)&&canBeContinuedListItem(this.lineTexts[r-1])||isTable(e.prev)&&canBeContinuedTableBody(this.lineTexts[r-1]))){e=e.prev;r=e.sourcepos[0][0]}var a=this.lineTexts.slice(r-1,n);var o=this.parser.partialParseStart(r,a);var i=t?t.next:this.root.firstChild;var s=o.lastChild;var l=s&&isCodeBlock(s)&&s.open;var u=s&&isCustomBlock(s)&&s.open;var d=s&&isList(s);while((l||u)&&i||d&&i&&("list"===i.type||i.sourcepos[0][1]>=2)){var v=this.extendEndLine(i.sourcepos[1][0]);this.parser.partialParseExtends(this.lineTexts.slice(n,v));e||(e=t);t=i;n=v;i=i.next}this.parser.partialParseFinish();var p=getChildNodes(o);return{newNodes:p,extStartNode:e,extEndNode:t}};ToastMark.prototype.getRemovedNodeRange=function(e,t){return!e||e&&isRefDef(e)||t&&isRefDef(t)?null:{id:[e.id,t.id],line:[e.sourcepos[0][0]-1,t.sourcepos[1][0]-1]}};ToastMark.prototype.markDeletedRefMap=function(e,t){var r=this;if(!isEmptyObj(this.refMap)){var markDeleted=function(e){if(isRefDef(e)){var t=r.refMap[e.label];t&&e.id===t.id&&(t.unlinked=true)}};e&&invokeNextUntil(markDeleted,e.parent,t);t&&invokeNextUntil(markDeleted,t)}};ToastMark.prototype.replaceWithNewRefDefState=function(e){var t=this;if(!isEmptyObj(this.refMap)){var replaceWith_1=function(e){if(isRefDef(e)){var r=e.label;var n=t.refMap[r];n&&!n.unlinked||(t.refMap[r]=createRefDefState(e))}};e.forEach((function(e){invokeNextUntil(replaceWith_1,e)}))}};ToastMark.prototype.replaceWithRefDefCandidate=function(){var e=this;isEmptyObj(this.refDefCandidateMap)||iterateObject(this.refDefCandidateMap,(function(t,r){var n=r.label,a=r.sourcepos;var o=e.refMap[n];(!o||o.unlinked||o.sourcepos[0][0]>a[0][0])&&(e.refMap[n]=createRefDefState(r))}))};ToastMark.prototype.getRangeWithRefDef=function(e,t,r,n,a){if(this.referenceDefinition&&!isEmptyObj(this.refMap)){var o=findChildNodeAtLine(this.root,e-1);var i=findChildNodeAtLine(this.root,t+1);if(o&&isRefDef(o)&&o!==r&&o!==n){r=o;e=r.sourcepos[0][0]}if(i&&isRefDef(i)&&i!==r&&i!==n){n=i;t=this.extendEndLine(n.sourcepos[1][0]+a)}}return[r,n,e,t]};ToastMark.prototype.parse=function(e,t,r){void 0===r&&(r=0);var n=this.getNodeRange(e,t);var a=n[0],o=n[1];var i=a?Math.min(a.sourcepos[0][0],e[0]):e[0];var s=this.extendEndLine((o?Math.max(o.sourcepos[1][0],t[0]):t[0])+r);var l=this.parseRange.apply(this,this.getRangeWithRefDef(i,s,a,o,r));var u=l.newNodes,d=l.extStartNode,v=l.extEndNode;var p=this.getRemovedNodeRange(d,v);var f=v?v.next:this.root.firstChild;if(this.referenceDefinition){this.markDeletedRefMap(d,v);this.replaceRangeNodes(d,v,u);this.replaceWithNewRefDefState(u)}else this.replaceRangeNodes(d,v,u);return{nodes:u,removedNodeRange:p,nextNode:f}};ToastMark.prototype.parseRefLink=function(){var e=this;var t=[];isEmptyObj(this.refMap)||iterateObject(this.refMap,(function(r,n){n.unlinked&&delete e.refMap[r];iterateObject(e.refLinkCandidateMap,(function(n,a){var o=a.node,i=a.refLabel;i===r&&t.push(e.parse(o.sourcepos[0],o.sourcepos[1]))}))}));return t};ToastMark.prototype.removeUnlinkedCandidate=function(){isEmptyObj(this.refDefCandidateMap)||[this.refLinkCandidateMap,this.refDefCandidateMap].forEach((function(e){iterateObject(e,(function(t){isUnlinked(t)&&delete e[t]}))}))};ToastMark.prototype.editMarkdown=function(e,t,r){var n=this.updateLineTexts(e,t,r);var a=this.parse(e,t,n);var o=omit(a,"nextNode");updateNextLineNumbers(a.nextNode,n);this.updateRootNodeState();var i=[o];if(this.referenceDefinition){this.removeUnlinkedCandidate();this.replaceWithRefDefCandidate();i=i.concat(this.parseRefLink())}this.trigger("change",i);return i};ToastMark.prototype.getLineTexts=function(){return this.lineTexts};ToastMark.prototype.getRootNode=function(){return this.root};ToastMark.prototype.findNodeAtPosition=function(e){var t=findNodeAtPosition(this.root,e);return t&&t!==this.root?t:null};ToastMark.prototype.findFirstNodeAtLine=function(e){return findFirstNodeAtLine(this.root,e)};ToastMark.prototype.on=function(e,t){this.eventHandlerMap[e].push(t)};ToastMark.prototype.off=function(e,t){var r=this.eventHandlerMap[e];var n=r.indexOf(t);r.splice(n,1)};ToastMark.prototype.findNodeById=function(e){return findNodeById(e)};ToastMark.prototype.removeAllNode=function(){removeAllNode()};return ToastMark}();var kG=["title","textarea","style","xmp","iframe","noembed","noframes","script","plaintext"];var xG=new RegExp("<(/?(?:"+kG.join("|")+")[^>]*>)","ig");function filterDisallowedTags(e){return xG.test(e)?e.replace(xG,(function(e,t){return"&lt;"+t})):e}var MG={heading:function(e,t){var r=t.entering;return{type:r?"openTag":"closeTag",tagName:"h"+e.level,outerNewLine:true}},text:function(e){return{type:"text",content:e.literal}},softbreak:function(e,t){var r=t.options;return{type:"html",content:r.softbreak}},linebreak:function(){return{type:"html",content:"<br />\n"}},emph:function(e,t){var r=t.entering;return{type:r?"openTag":"closeTag",tagName:"em"}},strong:function(e,t){var r=t.entering;return{type:r?"openTag":"closeTag",tagName:"strong"}},paragraph:function(e,t){var r;var n=t.entering;var a=null===(r=e.parent)||void 0===r?void 0:r.parent;return a&&"list"===a.type&&a.listData.tight?null:{type:n?"openTag":"closeTag",tagName:"p",outerNewLine:true}},thematicBreak:function(){return{type:"openTag",tagName:"hr",outerNewLine:true,selfClose:true}},blockQuote:function(e,t){var r=t.entering;return{type:r?"openTag":"closeTag",tagName:"blockquote",outerNewLine:true,innerNewLine:true}},list:function(e,t){var r=t.entering;var n=e.listData,a=n.type,o=n.start;var i="bullet"===a?"ul":"ol";var s={};"ol"===i&&null!==o&&1!==o&&(s.start=o.toString());return{type:r?"openTag":"closeTag",tagName:i,attributes:s,outerNewLine:true}},item:function(e,t){var r=t.entering;return{type:r?"openTag":"closeTag",tagName:"li",outerNewLine:true}},htmlInline:function(e,t){var r=t.options;var n=r.tagFilter?filterDisallowedTags(e.literal):e.literal;return{type:"html",content:n}},htmlBlock:function(e,t){var r=t.options;var n=r.tagFilter?filterDisallowedTags(e.literal):e.literal;return r.nodeId?[{type:"openTag",tagName:"div",outerNewLine:true},{type:"html",content:n},{type:"closeTag",tagName:"div",outerNewLine:true}]:{type:"html",content:n,outerNewLine:true}},code:function(e){return[{type:"openTag",tagName:"code"},{type:"text",content:e.literal},{type:"closeTag",tagName:"code"}]},codeBlock:function(e){var t=e.info;var r=t?t.split(/\s+/):[];var n=[];r.length>0&&r[0].length>0&&n.push("language-"+escapeXml(r[0]));return[{type:"openTag",tagName:"pre",outerNewLine:true},{type:"openTag",tagName:"code",classNames:n},{type:"text",content:e.literal},{type:"closeTag",tagName:"code"},{type:"closeTag",tagName:"pre",outerNewLine:true}]},link:function(e,t){var r=t.entering;if(r){var n=e,a=n.title,o=n.destination;return{type:"openTag",tagName:"a",attributes:__assign({href:escapeXml(o)},a&&{title:escapeXml(a)})}}return{type:"closeTag",tagName:"a"}},image:function(e,t){var r=t.getChildrenText,n=t.skipChildren;var a=e,o=a.title,i=a.destination;n();return{type:"openTag",tagName:"img",selfClose:true,attributes:__assign({src:escapeXml(i),alt:r(e)},o&&{title:escapeXml(o)})}},customBlock:function(e,t,r){var n=e.info.trim().toLowerCase();var a=r[n];if(a)try{return a(e,t)}catch(e){console.warn("[@toast-ui/editor] - The error occurred when "+n+" block node was parsed in markdown renderer: "+e)}return[{type:"openTag",tagName:"div",outerNewLine:true},{type:"text",content:e.literal},{type:"closeTag",tagName:"div",outerNewLine:true}]},frontMatter:function(e){return[{type:"openTag",tagName:"div",outerNewLine:true,attributes:{style:"white-space: pre; display: none;"}},{type:"text",content:e.literal},{type:"closeTag",tagName:"div",outerNewLine:true}]},customInline:function(e,t,r){var n=e,a=n.info,o=n.firstChild;var i=a.trim().toLowerCase();var s=r[i];var l=t.entering;if(s)try{return s(e,t)}catch(e){console.warn("[@toast-ui/editor] - The error occurred when "+i+" inline node was parsed in markdown renderer: "+e)}return l?[{type:"openTag",tagName:"span"},{type:"text",content:"$$"+a+(o?" ":"")}]:[{type:"text",content:"$$"},{type:"closeTag",tagName:"span"}]}};var EG={strike:function(e,t){var r=t.entering;return{type:r?"openTag":"closeTag",tagName:"del"}},item:function(e,t){var r=t.entering;var n=e.listData,a=n.checked,o=n.task;if(r){var i={type:"openTag",tagName:"li",outerNewLine:true};return o?[i,{type:"openTag",tagName:"input",selfClose:true,attributes:__assign(__assign({},a&&{checked:""}),{disabled:"",type:"checkbox"})},{type:"text",content:" "}]:i}return{type:"closeTag",tagName:"li",outerNewLine:true}},table:function(e,t){var r=t.entering;return{type:r?"openTag":"closeTag",tagName:"table",outerNewLine:true}},tableHead:function(e,t){var r=t.entering;return{type:r?"openTag":"closeTag",tagName:"thead",outerNewLine:true}},tableBody:function(e,t){var r=t.entering;return{type:r?"openTag":"closeTag",tagName:"tbody",outerNewLine:true}},tableRow:function(e,t){var r=t.entering;if(r)return{type:"openTag",tagName:"tr",outerNewLine:true};var n=[];if(e.lastChild){var a=e.parent.parent.columns.length;var o=e.lastChild.endIdx;for(var i=o+1;i<a;i+=1)n.push({type:"openTag",tagName:"td",outerNewLine:true},{type:"closeTag",tagName:"td",outerNewLine:true})}n.push({type:"closeTag",tagName:"tr",outerNewLine:true});return n},tableCell:function(e,t){var r=t.entering;if(e.ignored)return{type:"text",content:""};var n=e.parent.parent;var a="tableHead"===n.type?"th":"td";var o=n.parent;var i=o.columns[e.startIdx];var s=(null===i||void 0===i?void 0:i.align)?{align:i.align}:null;return r?__assign({type:"openTag",tagName:a,outerNewLine:true},s&&{attributes:s}):{type:"closeTag",tagName:a,outerNewLine:true}}};var LG={softbreak:"\n",gfm:false,tagFilter:false,nodeId:false};function getChildrenText(e){var t=[];var r=e.walker();var n=null;while(n=r.next()){var a=n.node;"text"===a.type&&t.push(a.literal)}return t.join("")}var NG=function(){function Renderer(e){this.buffer=[];this.options=__assign(__assign({},LG),e);this.convertors=this.createConvertors();delete this.options.convertors}Renderer.prototype.createConvertors=function(){var e=__assign({},MG);this.options.gfm&&(e=__assign(__assign({},e),EG));if(this.options.convertors){var t=this.options.convertors;var r=Object.keys(t);var n=__assign(__assign({},MG),EG);r.forEach((function(r){var a=e[r];var o=t[r];var i=-1===Object.keys(n).indexOf(r)?r.toLowerCase():r;e[i]=a?function(e,t,r){t.origin=function(){return a(e,t,r)};return o(e,t)}:o}))}return e};Renderer.prototype.getConvertors=function(){return this.convertors};Renderer.prototype.getOptions=function(){return this.options};Renderer.prototype.render=function(e){var t=this;this.buffer=[];var r=e.walker();var n=null;var _loop_1=function(){var e=n.node,o=n.entering;var i=a.convertors[e.type];if(!i)return"continue";var s=false;var l={entering:o,leaf:!isContainer$1(e),options:a.options,getChildrenText:getChildrenText,skipChildren:function(){s=true}};var u=isCustomBlock(e)||isCustomInline(e)?i(e,l,a.convertors):i(e,l);if(u){var d=Array.isArray(u)?u:[u];d.forEach((function(r,n){if("openTag"===r.type&&t.options.nodeId&&0===n){r.attributes||(r.attributes={});r.attributes["data-nodeid"]=String(e.id)}t.renderHTMLNode(r)}));if(s){r.resumeAt(e,false);r.next()}}};var a=this;while(n=r.next())_loop_1();this.addNewLine();return this.buffer.join("")};Renderer.prototype.renderHTMLNode=function(e){switch(e.type){case"openTag":case"closeTag":this.renderElementNode(e);break;case"text":this.renderTextNode(e);break;case"html":this.renderRawHtmlNode(e);break}};Renderer.prototype.generateOpenTagString=function(e){var t=this;var r=e.tagName,n=e.classNames,a=e.attributes;this.buffer.push("<"+r);n&&n.length>0&&this.buffer.push(' class="'+n.join(" ")+'"');a&&Object.keys(a).forEach((function(e){var r=a[e];t.buffer.push(" "+e+'="'+r+'"')}));e.selfClose&&this.buffer.push(" /");this.buffer.push(">")};Renderer.prototype.generateCloseTagString=function(e){var t=e.tagName;this.buffer.push("</"+t+">")};Renderer.prototype.addNewLine=function(){this.buffer.length&&"\n"!==last(last(this.buffer))&&this.buffer.push("\n")};Renderer.prototype.addOuterNewLine=function(e){e.outerNewLine&&this.addNewLine()};Renderer.prototype.addInnerNewLine=function(e){e.innerNewLine&&this.addNewLine()};Renderer.prototype.renderTextNode=function(e){this.buffer.push(escapeXml(e.content))};Renderer.prototype.renderRawHtmlNode=function(e){this.addOuterNewLine(e);this.buffer.push(e.content);this.addOuterNewLine(e)};Renderer.prototype.renderElementNode=function(e){if("openTag"===e.type){this.addOuterNewLine(e);this.generateOpenTagString(e);e.selfClose?this.addOuterNewLine(e):this.addInnerNewLine(e)}else{this.addInnerNewLine(e);this.generateCloseTagString(e);this.addOuterNewLine(e)}};return Renderer}();
/*! @license DOMPurify 2.3.3 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.3.3/LICENSE */function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var IG=Object.hasOwnProperty,SG=Object.setPrototypeOf,OG=Object.isFrozen,AG=Object.getPrototypeOf,PG=Object.getOwnPropertyDescriptor;var DG=Object.freeze,BG=Object.seal,RG=Object.create;var HG="undefined"!==typeof Reflect&&Reflect,_G=HG.apply,$G=HG.construct;_G||(_G=function apply(e,t,r){return e.apply(t,r)});DG||(DG=function freeze(e){return e});BG||(BG=function seal(e){return e});$G||($G=function construct(e,t){return new(Function.prototype.bind.apply(e,[null].concat(_toConsumableArray(t))))});var FG=unapply(Array.prototype.forEach);var jG=unapply(Array.prototype.pop);var UG=unapply(Array.prototype.push);var WG=unapply(String.prototype.toLowerCase);var qG=unapply(String.prototype.match);var zG=unapply(String.prototype.replace);var VG=unapply(String.prototype.indexOf);var GG=unapply(String.prototype.trim);var QG=unapply(RegExp.prototype.test);var XG=unconstruct(TypeError);function unapply(e){return function(t){for(var r=arguments.length,n=Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return _G(e,t,n)}}function unconstruct(e){return function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return $G(e,r)}}function addToSet(e,t){SG&&SG(e,null);var r=t.length;while(r--){var n=t[r];if("string"===typeof n){var a=WG(n);if(a!==n){OG(t)||(t[r]=a);n=a}}e[n]=true}return e}function clone(e){var t=RG(null);var r=void 0;for(r in e)_G(IG,e,[r])&&(t[r]=e[r]);return t}function lookupGetter(e,t){while(null!==e){var r=PG(e,t);if(r){if(r.get)return unapply(r.get);if("function"===typeof r.value)return unapply(r.value)}e=AG(e)}function fallbackValue(e){console.warn("fallback value for",e);return null}return fallbackValue}var ZG=DG(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]);var KG=DG(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]);var YG=DG(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]);var JG=DG(["animate","color-profile","cursor","discard","fedropshadow","feimage","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]);var eQ=DG(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]);var tQ=DG(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]);var rQ=DG(["#text"]);var nQ=DG(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]);var aQ=DG(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]);var oQ=DG(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]);var iQ=DG(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]);var sQ=BG(/\{\{[\s\S]*|[\s\S]*\}\}/gm);var lQ=BG(/<%[\s\S]*|[\s\S]*%>/gm);var uQ=BG(/^data-[\-\w.\u00B7-\uFFFF]/);var cQ=BG(/^aria-[\-\w]+$/);var dQ=BG(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i);var vQ=BG(/^(?:\w+script|data):/i);var pQ=BG(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g);var fQ="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _toConsumableArray$1(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var hQ=function getGlobal(){return"undefined"===typeof window?null:window};
/**
 * Creates a no-op policy for internal use only.
 * Don't export this function outside this module!
 * @param {?TrustedTypePolicyFactory} trustedTypes The policy factory.
 * @param {Document} document The document object (to determine policy name suffix)
 * @return {?TrustedTypePolicy} The policy created (or null, if Trusted Types
 * are not supported).
 */var mQ=function _createTrustedTypesPolicy(e,t){if("object"!==("undefined"===typeof e?"undefined":fQ(e))||"function"!==typeof e.createPolicy)return null;var r=null;var n="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(n)&&(r=t.currentScript.getAttribute(n));var a="dompurify"+(r?"#"+r:"");try{return e.createPolicy(a,{createHTML:function createHTML(e){return e}})}catch(e){console.warn("TrustedTypes policy "+a+" could not be created.");return null}};function createDOMPurify(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hQ();var t=function DOMPurify(e){return createDOMPurify(e)};t.version="2.3.3";t.removed=[];if(!e||!e.document||9!==e.document.nodeType){t.isSupported=false;return t}var r=e.document;var n=e.document;var a=e.DocumentFragment,o=e.HTMLTemplateElement,i=e.Node,s=e.Element,l=e.NodeFilter,u=e.NamedNodeMap,d=void 0===u?e.NamedNodeMap||e.MozNamedAttrMap:u,v=e.Text,p=e.Comment,f=e.DOMParser,m=e.trustedTypes;var g=s.prototype;var y=lookupGetter(g,"cloneNode");var b=lookupGetter(g,"nextSibling");var w=lookupGetter(g,"childNodes");var T=lookupGetter(g,"parentNode");if("function"===typeof o){var C=n.createElement("template");C.content&&C.content.ownerDocument&&(n=C.content.ownerDocument)}var k=mQ(m,r);var x=k&&re?k.createHTML(""):"";var M=n,E=M.implementation,L=M.createNodeIterator,N=M.createDocumentFragment,I=M.getElementsByTagName;var S=r.importNode;var O={};try{O=clone(n).documentMode?n.documentMode:{}}catch(e){}var A={};t.isSupported="function"===typeof T&&E&&"undefined"!==typeof E.createHTMLDocument&&9!==O;var P=sQ,D=lQ,B=uQ,R=cQ,H=vQ,_=pQ;var $=dQ;var F=null;var j=addToSet({},[].concat(_toConsumableArray$1(ZG),_toConsumableArray$1(KG),_toConsumableArray$1(YG),_toConsumableArray$1(eQ),_toConsumableArray$1(rQ)));var U=null;var W=addToSet({},[].concat(_toConsumableArray$1(nQ),_toConsumableArray$1(aQ),_toConsumableArray$1(oQ),_toConsumableArray$1(iQ)));var q=null;var z=null;var V=true;var G=true;var Q=false;var X=false;var Z=false;var K=false;var Y=false;var J=false;var ee=false;var te=true;var re=false;var ne=true;var ae=true;var oe=false;var ie={};var se=null;var le=addToSet({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);var ue=null;var ce=addToSet({},["audio","video","img","source","image","track"]);var de=null;var ve=addToSet({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]);var pe="http://www.w3.org/1998/Math/MathML";var fe="http://www.w3.org/2000/svg";var he="http://www.w3.org/1999/xhtml";var me=he;var ge=false;var ye=void 0;var be=["application/xhtml+xml","text/html"];var we="text/html";var Te=void 0;var Ce=null;var ke=n.createElement("form");
/**
   * _parseConfig
   *
   * @param  {Object} cfg optional config literal
   */var xe=function _parseConfig(e){if(!Ce||Ce!==e){e&&"object"===("undefined"===typeof e?"undefined":fQ(e))||(e={});e=clone(e);F="ALLOWED_TAGS"in e?addToSet({},e.ALLOWED_TAGS):j;U="ALLOWED_ATTR"in e?addToSet({},e.ALLOWED_ATTR):W;de="ADD_URI_SAFE_ATTR"in e?addToSet(clone(ve),e.ADD_URI_SAFE_ATTR):ve;ue="ADD_DATA_URI_TAGS"in e?addToSet(clone(ce),e.ADD_DATA_URI_TAGS):ce;se="FORBID_CONTENTS"in e?addToSet({},e.FORBID_CONTENTS):le;q="FORBID_TAGS"in e?addToSet({},e.FORBID_TAGS):{};z="FORBID_ATTR"in e?addToSet({},e.FORBID_ATTR):{};ie="USE_PROFILES"in e&&e.USE_PROFILES;V=false!==e.ALLOW_ARIA_ATTR;G=false!==e.ALLOW_DATA_ATTR;Q=e.ALLOW_UNKNOWN_PROTOCOLS||false;X=e.SAFE_FOR_TEMPLATES||false;Z=e.WHOLE_DOCUMENT||false;J=e.RETURN_DOM||false;ee=e.RETURN_DOM_FRAGMENT||false;te=false!==e.RETURN_DOM_IMPORT;re=e.RETURN_TRUSTED_TYPE||false;Y=e.FORCE_BODY||false;ne=false!==e.SANITIZE_DOM;ae=false!==e.KEEP_CONTENT;oe=e.IN_PLACE||false;$=e.ALLOWED_URI_REGEXP||$;me=e.NAMESPACE||he;ye=ye=-1===be.indexOf(e.PARSER_MEDIA_TYPE)?we:e.PARSER_MEDIA_TYPE;Te="application/xhtml+xml"===ye?function(e){return e}:WG;X&&(G=false);ee&&(J=true);if(ie){F=addToSet({},[].concat(_toConsumableArray$1(rQ)));U=[];if(true===ie.html){addToSet(F,ZG);addToSet(U,nQ)}if(true===ie.svg){addToSet(F,KG);addToSet(U,aQ);addToSet(U,iQ)}if(true===ie.svgFilters){addToSet(F,YG);addToSet(U,aQ);addToSet(U,iQ)}if(true===ie.mathMl){addToSet(F,eQ);addToSet(U,oQ);addToSet(U,iQ)}}if(e.ADD_TAGS){F===j&&(F=clone(F));addToSet(F,e.ADD_TAGS)}if(e.ADD_ATTR){U===W&&(U=clone(U));addToSet(U,e.ADD_ATTR)}e.ADD_URI_SAFE_ATTR&&addToSet(de,e.ADD_URI_SAFE_ATTR);if(e.FORBID_CONTENTS){se===le&&(se=clone(se));addToSet(se,e.FORBID_CONTENTS)}ae&&(F["#text"]=true);Z&&addToSet(F,["html","head","body"]);if(F.table){addToSet(F,["tbody"]);delete q.tbody}DG&&DG(e);Ce=e}};var Me=addToSet({},["mi","mo","mn","ms","mtext"]);var Ee=addToSet({},["foreignobject","desc","title","annotation-xml"]);var Le=addToSet({},KG);addToSet(Le,YG);addToSet(Le,JG);var Ne=addToSet({},eQ);addToSet(Ne,tQ);
/**
   *
   *
   * @param  {Element} element a DOM element whose namespace is being checked
   * @returns {boolean} Return false if the element has a
   *  namespace that a spec-compliant parser would never
   *  return. Return true otherwise.
   */var Ie=function _checkValidNamespace(e){var t=T(e);t&&t.tagName||(t={namespaceURI:he,tagName:"template"});var r=WG(e.tagName);var n=WG(t.tagName);if(e.namespaceURI===fe)return t.namespaceURI===he?"svg"===r:t.namespaceURI===pe?"svg"===r&&("annotation-xml"===n||Me[n]):Boolean(Le[r]);if(e.namespaceURI===pe)return t.namespaceURI===he?"math"===r:t.namespaceURI===fe?"math"===r&&Ee[n]:Boolean(Ne[r]);if(e.namespaceURI===he){if(t.namespaceURI===fe&&!Ee[n])return false;if(t.namespaceURI===pe&&!Me[n])return false;var a=addToSet({},["title","style","font","a","script"]);return!Ne[r]&&(a[r]||!Le[r])}return false};
/**
   * _forceRemove
   *
   * @param  {Node} node a DOM node
   */var Se=function _forceRemove(e){UG(t.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){try{e.outerHTML=x}catch(t){e.remove()}}};
/**
   * _removeAttribute
   *
   * @param  {String} name an Attribute name
   * @param  {Node} node a DOM node
   */var Oe=function _removeAttribute(e,r){try{UG(t.removed,{attribute:r.getAttributeNode(e),from:r})}catch(e){UG(t.removed,{attribute:null,from:r})}r.removeAttribute(e);if("is"===e&&!U[e])if(J||ee)try{Se(r)}catch(e){}else try{r.setAttribute(e,"")}catch(e){}};
/**
   * _initDocument
   *
   * @param  {String} dirty a string of dirty markup
   * @return {Document} a DOM, filled with the dirty markup
   */var Ae=function _initDocument(e){var t=void 0;var r=void 0;if(Y)e="<remove></remove>"+e;else{var a=qG(e,/^[\r\n\t ]+/);r=a&&a[0]}"application/xhtml+xml"===ye&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");var o=k?k.createHTML(e):e;if(me===he)try{t=(new f).parseFromString(o,ye)}catch(e){}if(!t||!t.documentElement){t=E.createDocument(me,"template",null);try{t.documentElement.innerHTML=ge?"":o}catch(e){}}var i=t.body||t.documentElement;e&&r&&i.insertBefore(n.createTextNode(r),i.childNodes[0]||null);return me===he?I.call(t,Z?"html":"body")[0]:Z?t.documentElement:i};
/**
   * _createIterator
   *
   * @param  {Document} root document/fragment to create iterator for
   * @return {Iterator} iterator instance
   */var Pe=function _createIterator(e){return L.call(e.ownerDocument||e,e,l.SHOW_ELEMENT|l.SHOW_COMMENT|l.SHOW_TEXT,null,false)};
/**
   * _isClobbered
   *
   * @param  {Node} elm element to check for clobbering attacks
   * @return {Boolean} true if clobbered, false if safe
   */var De=function _isClobbered(e){return!(e instanceof v||e instanceof p)&&!("string"===typeof e.nodeName&&"string"===typeof e.textContent&&"function"===typeof e.removeChild&&e.attributes instanceof d&&"function"===typeof e.removeAttribute&&"function"===typeof e.setAttribute&&"string"===typeof e.namespaceURI&&"function"===typeof e.insertBefore)};
/**
   * _isNode
   *
   * @param  {Node} obj object to check whether it's a DOM node
   * @return {Boolean} true is object is a DOM node
   */var Be=function _isNode(e){return"object"===("undefined"===typeof i?"undefined":fQ(i))?e instanceof i:e&&"object"===("undefined"===typeof e?"undefined":fQ(e))&&"number"===typeof e.nodeType&&"string"===typeof e.nodeName};
/**
   * _executeHook
   * Execute user configurable hooks
   *
   * @param  {String} entryPoint  Name of the hook's entry point
   * @param  {Node} currentNode node to work on with the hook
   * @param  {Object} data additional hook parameters
   */var Re=function _executeHook(e,r,n){A[e]&&FG(A[e],(function(e){e.call(t,r,n,Ce)}))};
/**
   * _sanitizeElements
   *
   * @protect nodeName
   * @protect textContent
   * @protect removeChild
   *
   * @param   {Node} currentNode to check for permission to exist
   * @return  {Boolean} true if node was killed, false if left alive
   */var He=function _sanitizeElements(e){var r=void 0;Re("beforeSanitizeElements",e,null);if(De(e)){Se(e);return true}if(qG(e.nodeName,/[\u0080-\uFFFF]/)){Se(e);return true}var n=Te(e.nodeName);Re("uponSanitizeElement",e,{tagName:n,allowedTags:F});if(!Be(e.firstElementChild)&&(!Be(e.content)||!Be(e.content.firstElementChild))&&QG(/<[/\w]/g,e.innerHTML)&&QG(/<[/\w]/g,e.textContent)){Se(e);return true}if("select"===n&&QG(/<template/i,e.innerHTML)){Se(e);return true}if(!F[n]||q[n]){if(ae&&!se[n]){var a=T(e)||e.parentNode;var o=w(e)||e.childNodes;if(o&&a){var i=o.length;for(var l=i-1;l>=0;--l)a.insertBefore(y(o[l],true),b(e))}}Se(e);return true}if(e instanceof s&&!Ie(e)){Se(e);return true}if(("noscript"===n||"noembed"===n)&&QG(/<\/no(script|embed)/i,e.innerHTML)){Se(e);return true}if(X&&3===e.nodeType){r=e.textContent;r=zG(r,P," ");r=zG(r,D," ");if(e.textContent!==r){UG(t.removed,{element:e.cloneNode()});e.textContent=r}}Re("afterSanitizeElements",e,null);return false};
/**
   * _isValidAttribute
   *
   * @param  {string} lcTag Lowercase tag name of containing element.
   * @param  {string} lcName Lowercase attribute name.
   * @param  {string} value Attribute value.
   * @return {Boolean} Returns true if `value` is valid, otherwise false.
   */var _e=function _isValidAttribute(e,t,r){if(ne&&("id"===t||"name"===t)&&(r in n||r in ke))return false;if(G&&!z[t]&&QG(B,t));else if(V&&QG(R,t));else{if(!U[t]||z[t])return false;if(de[t]);else if(QG($,zG(r,_,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==VG(r,"data:")||!ue[e]){if(Q&&!QG(H,zG(r,_,"")));else if(r)return false}else;}return true};
/**
   * _sanitizeAttributes
   *
   * @protect attributes
   * @protect nodeName
   * @protect removeAttribute
   * @protect setAttribute
   *
   * @param  {Node} currentNode to sanitize
   */var $e=function _sanitizeAttributes(e){var r=void 0;var n=void 0;var a=void 0;var o=void 0;Re("beforeSanitizeAttributes",e,null);var i=e.attributes;if(i){var s={attrName:"",attrValue:"",keepAttr:true,allowedAttributes:U};o=i.length;while(o--){r=i[o];var l=r,u=l.name,d=l.namespaceURI;n=GG(r.value);a=Te(u);s.attrName=a;s.attrValue=n;s.keepAttr=true;s.forceKeepAttr=void 0;Re("uponSanitizeAttribute",e,s);n=s.attrValue;if(!s.forceKeepAttr){Oe(u,e);if(s.keepAttr)if(QG(/\/>/i,n))Oe(u,e);else{if(X){n=zG(n,P," ");n=zG(n,D," ")}var v=Te(e.nodeName);if(_e(v,a,n))try{d?e.setAttributeNS(d,u,n):e.setAttribute(u,n);jG(t.removed)}catch(e){}}}}Re("afterSanitizeAttributes",e,null)}};
/**
   * _sanitizeShadowDOM
   *
   * @param  {DocumentFragment} fragment to iterate over recursively
   */var Fe=function _sanitizeShadowDOM(e){var t=void 0;var r=Pe(e);Re("beforeSanitizeShadowDOM",e,null);while(t=r.nextNode()){Re("uponSanitizeShadowNode",t,null);if(!He(t)){t.content instanceof a&&_sanitizeShadowDOM(t.content);$e(t)}}Re("afterSanitizeShadowDOM",e,null)};
/**
   * Sanitize
   * Public method providing core sanitation functionality
   *
   * @param {String|Node} dirty string or DOM node
   * @param {Object} configuration object
   */t.sanitize=function(n,o){var s=void 0;var l=void 0;var u=void 0;var d=void 0;var v=void 0;ge=!n;ge&&(n="\x3c!--\x3e");if("string"!==typeof n&&!Be(n)){if("function"!==typeof n.toString)throw XG("toString is not a function");n=n.toString();if("string"!==typeof n)throw XG("dirty is not a string, aborting")}if(!t.isSupported){if("object"===fQ(e.toStaticHTML)||"function"===typeof e.toStaticHTML){if("string"===typeof n)return e.toStaticHTML(n);if(Be(n))return e.toStaticHTML(n.outerHTML)}return n}K||xe(o);t.removed=[];"string"===typeof n&&(oe=false);if(oe);else if(n instanceof i){s=Ae("\x3c!----\x3e");l=s.ownerDocument.importNode(n,true);1===l.nodeType&&"BODY"===l.nodeName||"HTML"===l.nodeName?s=l:s.appendChild(l)}else{if(!J&&!X&&!Z&&-1===n.indexOf("<"))return k&&re?k.createHTML(n):n;s=Ae(n);if(!s)return J?null:x}s&&Y&&Se(s.firstChild);var p=Pe(oe?n:s);while(u=p.nextNode())if((3!==u.nodeType||u!==d)&&!He(u)){u.content instanceof a&&Fe(u.content);$e(u);d=u}d=null;if(oe)return n;if(J){if(ee){v=N.call(s.ownerDocument);while(s.firstChild)v.appendChild(s.firstChild)}else v=s;te&&(v=S.call(r,v,true));return v}var f=Z?s.outerHTML:s.innerHTML;if(X){f=zG(f,P," ");f=zG(f,D," ")}return k&&re?k.createHTML(f):f};
/**
   * Public method to set the configuration once
   * setConfig
   *
   * @param {Object} cfg configuration object
   */t.setConfig=function(e){xe(e);K=true};t.clearConfig=function(){Ce=null;K=false};
/**
   * Public method to check if an attribute value is valid.
   * Uses last set config, if any. Otherwise, uses config defaults.
   * isValidAttribute
   *
   * @param  {string} tag Tag name of containing element.
   * @param  {string} attr Attribute name.
   * @param  {string} value Attribute value.
   * @return {Boolean} Returns true if `value` is valid. Otherwise, returns false.
   */t.isValidAttribute=function(e,t,r){Ce||xe({});var n=Te(e);var a=Te(t);return _e(n,a,r)};
/**
   * AddHook
   * Public method to add DOMPurify hooks
   *
   * @param {String} entryPoint entry point for the hook to add
   * @param {Function} hookFunction function to execute
   */t.addHook=function(e,t){if("function"===typeof t){A[e]=A[e]||[];UG(A[e],t)}};
/**
   * RemoveHook
   * Public method to remove a DOMPurify hook at a given entryPoint
   * (pops it from the stack of hooks if more are present)
   *
   * @param {String} entryPoint entry point for the hook to remove
   */t.removeHook=function(e){A[e]&&jG(A[e])};
/**
   * RemoveHooks
   * Public method to remove all DOMPurify hooks at a given entryPoint
   *
   * @param  {String} entryPoint entry point for the hooks to remove
   */t.removeHooks=function(e){A[e]&&(A[e]=[])};t.removeAllHooks=function(){A={}};return t}var gQ=createDOMPurify();var yQ=["iframe","embed"];var bQ=[];function registerTagWhitelistIfPossible(e){includes(yQ,e)&&bQ.push(e.toLowerCase())}function sanitizeHTML(e,t){return gQ.sanitize(e,__assign$1({ADD_TAGS:bQ,ADD_ATTR:["rel","target","hreflang","type"],FORBID_TAGS:["input","script","textarea","form","button","select","meta","style","link","title","object","base"]},t))}function getChildrenHTML(e,t){return e.literal.replace(new RegExp("(<\\s*"+t+"[^>]*>)|(</"+t+"\\s*[>])","ig"),"").trim()}function getHTMLAttrsByHTMLString(e){e=e.match(lt)[0];var t=e.match(new RegExp(at,"g"));return t?t.reduce((function(e,t){var r=t.trim().split("="),n=r[0],a=r.slice(1);a.length&&(e[n]=a.join("=").replace(/'|"/g,"").trim());return e}),{}):{}}function getHTMLAttrs(e){return $e(e.attributes).reduce((function(e,t){e[t.nodeName]=t.nodeValue;return e}),{})}function sanitizeDOM(e,t,r,n){var a=n.getToDOMNode(t)(e);var o=r(a.outerHTML);var i=document.createElement("div");i.innerHTML=o;a=i.firstChild;var s=getHTMLAttrs(a);return{dom:a,htmlAttrs:s}}var wQ={htmlBlock:function(e,t,r){return{atom:true,content:"block+",group:"block",attrs:{htmlAttrs:{default:{}},childrenHTML:{default:""},htmlBlock:{default:true}},parseDOM:[{tag:e,getAttrs:function(e){return{htmlAttrs:getHTMLAttrs(e),childrenHTML:e.innerHTML}}}],toDOM:function(n){var a=sanitizeDOM(n,e,t,r),o=a.dom,i=a.htmlAttrs;i.class=i.class?i.class+" html-block":"html-block";return __spreadArray$1([e,i],$e(o.childNodes))}}},htmlInline:function(e,t,r){return{attrs:{htmlAttrs:{default:{}},htmlInline:{default:true}},parseDOM:[{tag:e,getAttrs:function(e){return{htmlAttrs:getHTMLAttrs(e)}}}],toDOM:function(n){var a=sanitizeDOM(n,e,t,r).htmlAttrs;return[e,a,0]}}}};function createHTMLSchemaMap(e,t,r){var n={nodes:{},marks:{}};["htmlBlock","htmlInline"].forEach((function(a){e[a]&&Object.keys(e[a]).forEach((function(e){var o="htmlBlock"===a?"nodes":"marks";registerTagWhitelistIfPossible(e);n[o][e]=wQ[a](e,t,r)}))}));return n}var TQ=/^\s*<\s*\//;var CQ={paragraph:function(e,t){var r=t.entering,n=t.origin,a=t.options;return a.nodeId?{type:r?"openTag":"closeTag",outerNewLine:true,tagName:"p"}:n()},softbreak:function(e){var t=e.prev&&"htmlInline"===e.prev.type;var r=t&&/<br ?\/?>/.test(e.prev.literal);var n=r?"\n":"<br>\n";return{type:"html",content:n}},item:function(e,t){var r=t.entering;if(r){var n={};var a=[];if(e.listData.task){n["data-task"]="";a.push("task-list-item");if(e.listData.checked){a.push("checked");n["data-task-checked"]=""}}return{type:"openTag",tagName:"li",classNames:a,attributes:n,outerNewLine:true}}return{type:"closeTag",tagName:"li",outerNewLine:true}},code:function(e){var t={"data-backticks":String(e.tickCount)};return[{type:"openTag",tagName:"code",attributes:t},{type:"text",content:e.literal},{type:"closeTag",tagName:"code"}]},codeBlock:function(e){var t=e,r=t.fenceLength,n=t.info;var a=n?n.split(/\s+/):[];var o=[];var i={};r>3&&(i["data-backticks"]=r);if(a.length>0&&a[0].length>0){var s=a[0];o.push("lang-"+s);i["data-language"]=s}return[{type:"openTag",tagName:"pre",classNames:o},{type:"openTag",tagName:"code",attributes:i},{type:"text",content:e.literal},{type:"closeTag",tagName:"code"},{type:"closeTag",tagName:"pre"}]},customInline:function(e,t){var r=t.origin,n=t.entering,a=t.skipChildren;var o=e.info;if(-1!==o.indexOf("widget")&&n){a();var i=getWidgetContent(e);var s=widgetToDOM(o,i).outerHTML;return[{type:"openTag",tagName:"span",classNames:["tui-widget"]},{type:"html",content:s},{type:"closeTag",tagName:"span"}]}return r()}};function getHTMLRenderConvertors(e,t){var r=__assign$1({},CQ);e&&(r.link=function(t,r){var n=r.entering,a=r.origin;var o=a();n&&(o.attributes=__assign$1(__assign$1({},o.attributes),e));return o});t&&Object.keys(t).forEach((function(e){var n=r[e];var a=t[e];n&&bt(a)?r[e]=function(e,t){var r=__assign$1({},t);r.origin=function(){return n(e,t)};return a(e,r)}:includes(["htmlBlock","htmlInline"],e)&&!bt(a)?r[e]=function(e,t){var r=e.literal.match(lt);if(r){var n=r[0],o=r[1],i=r[3];var s=(o||i).toLowerCase();var l=a[s];var u=getChildrenHTML(e,s);if(l){var d=__assign$1({},e);d.attrs=getHTMLAttrsByHTMLString(n);d.childrenHTML=u;d.type=s;t.entering=!TQ.test(e.literal);return l(d,t)}}return t.origin()}:r[e]=a}));return r}var kQ=["list","item","blockQuote"];var xQ=["UL","OL","BLOCKQUOTE"];function isBlankLine(e,t){var r;var n=e.child(t);return!n.childCount||1===n.childCount&&!(null===(r=n.firstChild.text)||void 0===r?void 0:r.trim())}function getEditorRangeHeightInfo(e,t,r){var n=getMdStartLine(t)-1;var a=getMdEndLine(t)-1;var o=r[n].getBoundingClientRect();var i=r[a].offsetTop-r[n].offsetTop+r[a].clientHeight;return{height:i<=0?r[n].clientHeight:i+getBlankLinesHeight(e,r,Math.min(a+1,e.childCount-1)),rect:o}}function getBlankLinesHeight(e,t,r){var n=e.childCount-1;var a=0;while(r<=n&&isBlankLine(e,r)){a+=t[r].clientHeight;r+=1}return a}function findAncestorHavingId(e,t){while(!e.getAttribute("data-nodeid")&&e.parentElement!==t)e=e.parentElement;return e}function getTotalOffsetTop(e,t){var r=0;while(e&&e!==t){includes(xQ,e.tagName)||(r+=e.offsetTop);if(e.offsetParent===t.offsetParent)break;e=e.parentElement}return r}function findAdjacentElementToScrollTop(e,t){var r=t;var n=null;while(r){var a=r.firstElementChild;if(!a)break;var o=findLastSiblingElementToScrollTop(a,e,getTotalOffsetTop(r,t));n=r;r=o}var i=r||n;return i===t?null:i}function findLastSiblingElementToScrollTop(e,t,r){return e&&t>r+e.offsetTop?findLastSiblingElementToScrollTop(e.nextElementSibling,t,r)||e:null}function getAdditionalPos(e,t,r,n){var a=Math.min((e-t)/r,1);return a*n}function getParentNodeObj(e,t){var r=e.querySelector('[data-nodeid="'+t.id+'"]');while(!r||isStyledInlineNode(t)){t=t.parent;r=e.querySelector('[data-nodeid="'+t.id+'"]')}return getNonNestableNodeObj({mdNode:t,el:r})}function getNonNestableNodeObj(e){var t=e.mdNode,r=e.el;while((includes(kQ,t.type)||"table"===t.type)&&t.firstChild){t=t.firstChild;r=r.firstElementChild}return{mdNode:t,el:r}}var MQ={};function setHeight(e,t){MQ[e]=MQ[e]||{};MQ[e].height=t}function setOffsetTop(e,t){MQ[e]=MQ[e]||{};MQ[e].offsetTop=t}function getHeight(e){return MQ[e]&&MQ[e].height}function getOffsetTop(e){return MQ[e]&&MQ[e].offsetTop}function removeOffsetInfoByNode(e){if(e){delete MQ[Number(e.getAttribute("data-nodeid"))];$e(e.children).forEach((function(e){removeOffsetInfoByNode(e)}))}}function getAndSaveOffsetInfo(e,t,r){var n=getHeight(r);var a=getOffsetTop(r);var o=n||e.clientHeight;var i=a||getTotalOffsetTop(e,t)||e.offsetTop;n||setHeight(r,o);a||setOffsetTop(r,i);return{nodeHeight:o,offsetTop:i}}var EQ=cls("md-preview-highlight");function findTableCell(e,t){var r=e.firstChild;while(r&&r.next){if(getMdStartCh(r.next)>t+1)break;r=r.next}return r}
/**
 * Class Markdown Preview
 * @param {HTMLElement} el - base element
 * @param {eventEmitter} eventEmitter - event manager
 * @param {object} options
 * @param {boolean} options.isViewer - true for view-only mode
 * @param {boolean} options.highlight - true for using live-highlight feature
 * @param {object} opitons.linkAttributes - attributes for link element
 * @param {object} opitons.customHTMLRenderer - map of custom HTML render functions
 *
 * @ignore
 */var LQ=function(){function MarkdownPreview(e,t){var r=document.createElement("div");this.el=r;this.eventEmitter=e;this.isViewer=!!t.isViewer;this.el.className=cls("md-preview");var n=t.linkAttributes,a=t.customHTMLRenderer,o=t.sanitizer,i=t.highlight,s=void 0!==i&&i;this.renderer=new NG({gfm:true,nodeId:true,convertors:getHTMLRenderConvertors(n,a)});this.cursorNodeId=null;this.sanitizer=o;this.initEvent(s);this.initContentSection();this.isViewer&&(this.previewContent.style.overflowWrap="break-word")}MarkdownPreview.prototype.initContentSection=function(){this.previewContent=createElementWith('<div class="'+cls("contents")+'"></div>');this.isViewer||this.el.appendChild(this.previewContent)};MarkdownPreview.prototype.toggleActive=function(e){toggleClass(this.el,"active",e)};MarkdownPreview.prototype.initEvent=function(e){var t=this;this.eventEmitter.listen("updatePreview",this.update.bind(this));if(!this.isViewer){if(e){this.eventEmitter.listen("changeToolbarState",(function(e){var r=e.mdNode,n=e.cursorPos;t.updateCursorNode(r,n)}));this.eventEmitter.listen("blur",(function(){t.removeHighlight()}))}Xr(this.el,"scroll",(function(e){t.eventEmitter.emit("scroll","preview",findAdjacentElementToScrollTop(e.target.scrollTop,t.previewContent))}));this.eventEmitter.listen("changePreviewTabPreview",(function(){return t.toggleActive(true)}));this.eventEmitter.listen("changePreviewTabWrite",(function(){return t.toggleActive(false)}))}};MarkdownPreview.prototype.removeHighlight=function(){if(this.cursorNodeId){var e=this.getElementByNodeId(this.cursorNodeId);e&&ge(e,EQ)}};MarkdownPreview.prototype.updateCursorNode=function(e,t){if(e){e=findClosestNode(e,(function(e){return!isInlineNode$1(e)}));"tableRow"===e.type?e=findTableCell(e,t[1]):"tableBody"===e.type&&(e=null)}var r=e?e.id:null;if(this.cursorNodeId!==r){var n=this.getElementByNodeId(this.cursorNodeId);var a=this.getElementByNodeId(r);n&&ge(n,EQ);a&&ve(a,EQ);this.cursorNodeId=r}};MarkdownPreview.prototype.getElementByNodeId=function(e){return e?this.previewContent.querySelector('[data-nodeid="'+e+'"]'):null};MarkdownPreview.prototype.update=function(e){var t=this;e.forEach((function(e){return t.replaceRangeNodes(e)}));this.eventEmitter.emit("afterPreviewRender",this)};MarkdownPreview.prototype.replaceRangeNodes=function(e){var t=this;var r=e.nodes,n=e.removedNodeRange;var a=this.previewContent;var o=this.eventEmitter.emitReduce("beforePreviewRender",this.sanitizer(r.map((function(e){return t.renderer.render(e)})).join("")));if(n){var i=n.id,s=i[0],l=i[1];var u=this.getElementByNodeId(s);var d=this.getElementByNodeId(l);if(u){u.insertAdjacentHTML("beforebegin",o);var v=u;while(v&&v!==d){var p=v.nextElementSibling;removeNode$1(v);removeOffsetInfoByNode(v);v=p}if(null===v||void 0===v?void 0:v.parentNode){removeNode$1(v);removeOffsetInfoByNode(v)}}}else a.insertAdjacentHTML("afterbegin",o)};MarkdownPreview.prototype.getRenderer=function(){return this.renderer};MarkdownPreview.prototype.destroy=function(){zr(this.el,"scroll");this.el=null};MarkdownPreview.prototype.getElement=function(){return this.el};MarkdownPreview.prototype.getHTML=function(){return removeProseMirrorHackNodes(this.previewContent.innerHTML)};MarkdownPreview.prototype.setHTML=function(e){this.previewContent.innerHTML=e};MarkdownPreview.prototype.setHeight=function(e){J(this.el,{height:e+"px"})};MarkdownPreview.prototype.setMinHeight=function(e){J(this.el,{minHeight:e+"px"})};return MarkdownPreview}();function findNodeBy(e,t){var r=e.depth;while(r){var n=e.node(r);if(t(n,r))return{node:n,depth:r,offset:r>0?e.before(r):0};r-=1}return null}function isInListNode(e){return!!findNodeBy(e,(function(e){var t=e.type;return"listItem"===t.name||"bulletList"===t.name||"orderedList"===t.name}))}function isInTableNode(e){return!!findNodeBy(e,(function(e){var t=e.type;return"tableHeadCell"===t.name||"tableBodyCell"===t.name}))}function findListItem(e){return findNodeBy(e,(function(e){var t=e.type;return"listItem"===t.name}))}function createDOMInfoParsedRawHTML(e){return{tag:e,getAttrs:function(e){var t=e.getAttribute("data-raw-html");return __assign$1({},t&&{rawHTML:t})}}}function createCellAttrs(e){return Object.keys(e).reduce((function(t,r){if("rawHTML"!==r&&e[r]){r="className"===r?"class":r;t[r]=e[r]}return t}),{})}function createParsedCellDOM(e){return{tag:e,getAttrs:function(e){return["rawHTML","colspan","rowspan","extended"].reduce((function(t,r){var n="rawHTML"===r?"data-raw-html":r;var a=e.getAttribute(n);a&&(t[r]=includes(["rawHTML","extended"],r)?a:Number(a));return t}),{})}}}function getDefaultCustomAttrs(){return{htmlAttrs:{default:null},classNames:{default:null}}}function getCustomAttrs(e){var t=e.htmlAttrs,r=e.classNames;return __assign$1(__assign$1({},t),{class:r?r.join(" "):null})}function findWrappingOutside(e,t){var r=e.parent,n=e.startIndex,a=e.endIndex;var o=r.contentMatchAt(n).findWrapping(t);if(o){var i=o.length?o[0]:t;return r.canReplaceWith(n,a,i)?o:null}return null}function findWrappingInside(e,t){var r=e.parent,n=e.startIndex,a=e.endIndex;var o=r.child(n);var i=t.contentMatch.findWrapping(o.type);if(i){var s=i.length?i[i.length-1]:t;var l=s.contentMatch;for(var u=n;l&&u<a;u+=1)l=l.matchType(r.child(u).type);if(l&&l.validEnd)return i}return null}function findWrappers(e,t,r,n){var a=findWrappingOutside(e,r);var o=findWrappingInside(t,r);if(a&&o){var i=a.map((function(e){return{type:e}}));var s=o.map((function(e){return{type:e,attrs:n}}));return i.concat({type:r}).concat(s)}return null}function wrapInList(t,n,a,o,i){var s=n.start,l=n.end,u=n.startIndex,p=n.endIndex,f=n.parent;var m=e.empty;for(var g=a.length-1;g>=0;g-=1)m=e.from(a[g].type.create(a[g].attrs,m));t.step(new d(s-(o?2:0),l,s,l,new r(m,0,0),a.length,true));var y=0;for(g=0;g<a.length;g+=1)if(a[g].type===i){y=g+1;break}var b=a.length-y;var w=s+a.length-(o?2:0);g=u;for(var T=p;g<T;g+=1){var C=g===u;if(!C&&v(t.doc,w,b)){t.split(w,b);w+=2*b}w+=f.child(g).nodeSize}return t}function changeToList(e,t,r,a){var o=t.$from,i=t.$to,s=t.depth;var l=t;var u=false;if(s>=2&&o.node(s-1).type.compatibleContent(r)&&0===t.startIndex&&o.index(s-1)){var d=e.doc.resolve(t.start-2);l=new n(d,d,s);t.endIndex<t.parent.childCount&&(t=new n(o,e.doc.resolve(i.end(s)),s));u=true}var v=findWrappers(l,t,r,a);return v?wrapInList(e,t,v,u,r):e}function getBeforeLineListItem(e,t){var r=e.resolve(t);while("paragraph"!==r.node().type.name){t-=2;r=e.resolve(t)}return findListItem(r)}function toggleTaskListItems(e,t){var r=t.$from,n=t.$to;var a=findListItem(r);var o=findListItem(n);if(a&&o)while(o){var i=o.offset,s=o.node;var l={task:!s.attrs.task,checked:false};e.setNodeMarkup(i,null,l);if(i===a.offset)break;o=getBeforeLineListItem(e.doc,i)}return e}function changeListType(e,t,r){var n=t.$from,a=t.$to;var o=findListItem(n);var i=findListItem(a);if(o&&i)while(i){var s=i.offset,l=i.node,u=i.depth;l.attrs.task&&e.setNodeMarkup(s,null,{task:false,checked:false});var d=e.doc.resolve(s);if(d.parent.type!==r){var v=d.before(u-1);e.setNodeMarkup(v,r)}if(s===o.offset)break;i=getBeforeLineListItem(e.doc,s)}return e}function changeList(e){return function(t,r){var n=t.selection,a=t.tr;var o=n.$from,i=n.$to;var s=o.blockRange(i);if(s){var l=isInListNode(o)?changeListType(a,s,e):changeToList(a,s,e);r(l);return true}return false}}function toggleTask(){return function(e,t){var r=e.selection,n=e.tr,a=e.schema;var o=r.$from,i=r.$to;var s=o.blockRange(i);if(s){var l=isInListNode(o)?toggleTaskListItems(n,s):changeToList(n,s,a.nodes.bulletList,{task:true});t(l);return true}return false}}function sinkListItem(t){return function(n,a){var o=n.tr,i=n.selection;var s=i.$from,l=i.$to;var u=s.blockRange(l,(function(e){var r=e.childCount,n=e.firstChild;return!!r&&n.type===t}));if(u&&u.startIndex>0){var v=u.parent;var p=v.child(u.startIndex-1);if(p.type!==t)return false;var f=p.lastChild&&p.lastChild.type===v.type;var m=f?e.from(t.create()):null;var g=new r(e.from(t.create(null,e.from(v.type.create(null,m)))),f?3:1,0);var y=u.start;var b=u.end;o.step(new d(y-(f?3:1),b,y,b,g,1,true));a(o);return true}return false}}function liftToOuterList(t,a,o){var i=a.$from,s=a.$to,l=a.end,u=a.depth,v=a.parent;var f=s.end(u);if(l<f){t.step(new d(l-1,f,l,f,new r(e.from(o.create(null,v.copy())),1,0),1,true));a=new n(t.doc.resolve(i.pos),t.doc.resolve(f),u)}t.lift(a,p(a));return t}function liftOutOfList(t,n){var a=n.parent;var o=n.end;for(var i=n.endIndex-1,s=n.startIndex;i>s;i-=1){o-=a.child(i).nodeSize;t.delete(o-1,o+1)}var l=t.doc.resolve(n.start);var u=l.nodeAfter;var v=0===n.startIndex;var p=n.endIndex===a.childCount;var f=l.node(-1);var m=l.index(-1);var g=f.canReplace(m+(v?0:1),m+1,null===u||void 0===u?void 0:u.content.append(p?e.empty:e.from(a)));if(u&&g){var y=l.pos;var b=y+u.nodeSize;t.step(new d(y-(v?1:0),b+(p?1:0),y+1,b-1,new r((v?e.empty:e.from(a.copy(e.empty))).append(p?e.empty:e.from(a.copy(e.empty))),v?0:1,p?0:1),v?0:1))}return t}function liftListItem(e){return function(t,r){var n=t.tr,a=t.selection;var o=a.$from,i=a.$to;var s=o.blockRange(i,(function(t){var r=t.childCount,n=t.firstChild;return!!r&&n.type===e}));if(s){var l=o.node(s.depth-1).type===e;var u=l?liftToOuterList(n,s,e):liftOutOfList(n,s);r(u);return true}return false}}function splitListItem(t){return function(n,a){var o=n.tr,i=n.selection;var s=i.$from,l=i.$to;if(s.depth<2||!s.sameParent(l))return false;var u=s.node(-1);if(u.type!==t)return false;if(0===s.parent.content.size&&s.node(-1).childCount===s.indexAfter(-1)){if(2===s.depth||s.node(-3).type!==t||s.index(-2)!==s.node(-2).childCount-1)return false;var d=s.index(-1)>0;var p=e.empty;for(var f=s.depth-(d?1:2);f>=s.depth-3;f-=1)p=e.from(s.node(f).copy(p));p=p.append(e.from(t.createAndFill()));o.replace(d?s.before():s.before(-1),s.after(-3),new r(p,d?3:2,2));o.setSelection(T.near(o.doc.resolve(s.pos+(d?3:2))));a(o);return true}var m=l.pos===s.end()?u.contentMatchAt(0).defaultType:null;var g=m&&[null,{type:m}];o.delete(s.pos,l.pos);if(v(o.doc,s.pos,2,g)){o.split(s.pos,2,g);a(o);return true}return false}}function indent(){return function(){return function(e,t){var r=e.selection,n=e.schema;var a=r.$from,o=r.$to;var i=a.blockRange(o);return!(!i||!isInListNode(a))&&sinkListItem(n.nodes.listItem)(e,t)}}}function outdent(){return function(){return function(e,t){var r=e.selection,n=e.schema;var a=r.$from,o=r.$to;var i=a.blockRange(o);return!(!i||!isInListNode(a))&&liftListItem(n.nodes.listItem)(e,t)}}}function getWwCommands(){return{indent:indent(),outdent:outdent()}}var NQ=new Map;
/* eslint-disable @typescript-eslint/no-unused-vars */var IQ=function(){function TableOffsetMap(e,t,r,n){this.table=e;this.tableRows=t;this.tableStartPos=r;this.rowInfo=n}TableOffsetMap.create=function(e){var t=findNodeBy(e,(function(e){var t=e.type;return"table"===t.name}));if(t){var r=t.node,n=t.depth,a=t.offset;var o=NQ.get(r);if((null===o||void 0===o?void 0:o.tableStartPos)===a+1)return o;var i=[];var s=e.start(n);var l=r.child(0);var u=r.child(1);var d=createOffsetMap(l,s);var v=createOffsetMap(u,s+l.nodeSize);l.forEach((function(e){return i.push(e)}));u.forEach((function(e){return i.push(e)}));var p=new TableOffsetMap(r,i,s,d.concat(v));NQ.set(r,p);return p}return null};Object.defineProperty(TableOffsetMap.prototype,"totalRowCount",{get:function(){return this.rowInfo.length},enumerable:false,configurable:true});Object.defineProperty(TableOffsetMap.prototype,"totalColumnCount",{get:function(){return this.rowInfo[0].length},enumerable:false,configurable:true});Object.defineProperty(TableOffsetMap.prototype,"tableStartOffset",{get:function(){return this.tableStartPos},enumerable:false,configurable:true});Object.defineProperty(TableOffsetMap.prototype,"tableEndOffset",{get:function(){return this.tableStartPos+this.table.nodeSize-1},enumerable:false,configurable:true});TableOffsetMap.prototype.getCellInfo=function(e,t){return this.rowInfo[e][t]};TableOffsetMap.prototype.posAt=function(e,t){for(var r=0,n=this.tableStartPos;;r+=1){var a=n+this.tableRows[r].nodeSize;if(r===e){var o=t;while(o<this.totalColumnCount&&this.rowInfo[r][o].offset<n)o+=1;return o===this.totalColumnCount?a:this.rowInfo[r][o].offset}n=a}};TableOffsetMap.prototype.getNodeAndPos=function(e,t){var r=this.rowInfo[e][t];return{node:this.table.nodeAt(r.offset-this.tableStartOffset),pos:r.offset}};TableOffsetMap.prototype.extendedRowspan=function(e,t){return false};TableOffsetMap.prototype.extendedColspan=function(e,t){return false};TableOffsetMap.prototype.getRowspanCount=function(e,t){return 0};TableOffsetMap.prototype.getColspanCount=function(e,t){return 0};TableOffsetMap.prototype.decreaseColspanCount=function(e,t){return 0};TableOffsetMap.prototype.decreaseRowspanCount=function(e,t){return 0};TableOffsetMap.prototype.getColspanStartInfo=function(e,t){return null};TableOffsetMap.prototype.getRowspanStartInfo=function(e,t){return null};TableOffsetMap.prototype.getCellStartOffset=function(e,t){var r=this.rowInfo[e][t].offset;return this.extendedRowspan(e,t)?this.posAt(e,t):r};TableOffsetMap.prototype.getCellEndOffset=function(e,t){var r=this.rowInfo[e][t],n=r.offset,a=r.nodeSize;return this.extendedRowspan(e,t)?this.posAt(e,t):n+a};TableOffsetMap.prototype.getCellIndex=function(e){for(var t=0;t<this.totalRowCount;t+=1){var r=this.rowInfo[t];for(var n=0;n<this.totalColumnCount;n+=1)if(r[n].offset+1>e.pos)return[t,n]}return[0,0]};TableOffsetMap.prototype.getRectOffsets=function(e,t){var r,n,a;void 0===t&&(t=e);e.pos>t.pos&&(r=[t,e],e=r[0],t=r[1]);var o=this.getCellIndex(e),i=o[0],s=o[1];var l=this.getCellIndex(t),u=l[0],d=l[1];n=getSortedNumPair(i,u),i=n[0],u=n[1];a=getSortedNumPair(s,d),s=a[0],d=a[1];return this.getSpannedOffsets({startRowIdx:i,startColIdx:s,endRowIdx:u,endColIdx:d})};TableOffsetMap.prototype.getSpannedOffsets=function(e){return e};return TableOffsetMap}();
/* eslint-enable @typescript-eslint/no-unused-vars */var createOffsetMap=function(e,t){var r=[];e.forEach((function(e,n){var a={rowspanMap:{},colspanMap:{},length:0};e.forEach((function(e,r){var o=e.nodeSize;var i=0;while(a[i])i+=1;a[i]={offset:t+n+r+2,nodeSize:o};a.length+=1}));r.push(a)}));return r};function mixinTableOffsetMapPrototype(e,t){assign(IQ.prototype,e);createOffsetMap=t;return IQ}function getSelectionRanges(e,t,r){var n=r.startRowIdx,a=r.startColIdx,o=r.endRowIdx,i=r.endColIdx;var s=[];for(var l=n;l<=o;l+=1)for(var u=a;u<=i;u+=1){var d=t.getCellInfo(l,u),v=d.offset,p=d.nodeSize;s.push(new C(e.resolve(v+1),e.resolve(v+p-1)))}return s}function createTableFragment(t,r){var n=[];t.childCount&&n.push(t);r.childCount&&n.push(r);return e.from(n)}var SQ=function(t){__extends$1(CellSelection,t);function CellSelection(e,r){void 0===r&&(r=e);var n=this;var a=e.node(0);var o=IQ.create(e);var i=o.getRectOffsets(e,r);var s=getSelectionRanges(a,o,i);n=t.call(this,s[0].$from,s[0].$to,s)||this;n.startCell=e;n.endCell=r;n.offsetMap=o;n.isCellSelection=true;n.visible=false;return n}CellSelection.prototype.map=function(e,t){var r=this.startCell.pos;var n=this.endCell.pos;var a=e.resolve(t.map(r));var o=e.resolve(t.map(n));var i=IQ.create(a);if(this.offsetMap.totalColumnCount>i.totalColumnCount||this.offsetMap.totalRowCount>i.totalRowCount){var s={tableBody:1,tableRow:2,tableCell:3,paragraph:4};var l=s[o.parent.type.name];var u=o.end(o.depth-l);var d=Math.min(u-4,o.pos);return m.create(e,d)}return new CellSelection(a,o)};CellSelection.prototype.eq=function(e){return e instanceof CellSelection&&e.startCell.pos===this.startCell.pos&&e.endCell.pos===this.endCell.pos};CellSelection.prototype.content=function(){var t=this.startCell.node(-2);var n=this.startCell.start(-2);var a=t.child(1).firstChild;var o=t.child(0).type.create();var i=t.child(1).type.create();var s=IQ.create(this.startCell);var l=s.getRectOffsets(this.startCell,this.endCell);var u=l.startRowIdx,d=l.startColIdx,v=l.endRowIdx,p=l.endColIdx;var f=false;for(var m=u;m<=v;m+=1){var g=[];for(var y=d;y<=p;y+=1){var b=s.getCellInfo(m,y).offset;var w=t.nodeAt(b-n);if(w){f="tableHeadCell"===w.type.name;s.extendedRowspan(m,y)||s.extendedColspan(m,y)?g.push(w.type.create({extended:true})):g.push(w.copy(w.content))}}var T=a.copy(e.from(g));var C=f?o:i;C.content=C.content.append(e.from(T))}return new r(createTableFragment(o,i),1,1)};CellSelection.prototype.toJSON=function(){return JSON.stringify(this)};return CellSelection}(T);function createTableHeadRow(e,t,r){var n=t.nodes,a=n.tableRow,o=n.tableHeadCell,i=n.paragraph;var s=[];for(var l=0;l<e;l+=1){var u=r&&r[l];var d=i.create(null,u?t.text(u):[]);s.push(o.create(null,d))}return[a.create(null,s)]}function createTableBodyRows(e,t,r,n){var a=r.nodes,o=a.tableRow,i=a.tableBodyCell,s=a.paragraph;var l=[];for(var u=0;u<e;u+=1){var d=[];for(var v=0;v<t;v+=1){var p=n&&n[u*t+v];var f=s.create(null,p?r.text(p):[]);d.push(i.create(null,f))}l.push(o.create(null,d))}return l}function createDummyCells(e,t,r,n){void 0===n&&(n=null);var a=r.nodes,o=a.tableHeadCell,i=a.tableBodyCell,s=a.paragraph;var l=0===t?o:i;var u=[];for(var d=0;d<e;d+=1)u.push(l.create(n,s.create()));return u}function findCellElement(e,t){while(e&&e!==t){if("TD"===e.nodeName||"TH"===e.nodeName)return e;e=e.parentNode}return null}function findCell(e){return findNodeBy(e,(function(e){var t=e.type;return"tableHeadCell"===t.name||"tableBodyCell"===t.name}))}function getResolvedSelection(e){if(e instanceof m){var t=e.$anchor;var r=findCell(t);if(r){var n=t.node(0).resolve(t.before(r.depth));return{anchor:n,head:n}}}var a=e,o=a.startCell,i=a.endCell;return{anchor:o,head:i}}function getTableContentFromSlice(e){var t;if(e.size){var r=e.content,n=e.openStart,a=e.openEnd;if(1!==r.childCount)return null;while(1===r.childCount&&(n>0&&a>0||"table"===(null===(t=r.firstChild)||void 0===t?void 0:t.type.name))){n-=1;a-=1;r=r.firstChild.content}if("tableHead"===r.firstChild.type.name||"tableBody"===r.firstChild.type.name)return r}return null}function getRowAndColumnCount(e){var t=e.startRowIdx,r=e.startColIdx,n=e.endRowIdx,a=e.endColIdx;var o=n-t+1;var i=a-r+1;return{rowCount:o,columnCount:i}}function setAttrs(e,t){return __assign$1(__assign$1({},e.attrs),t)}var OQ=new y("cellSelection");var AQ=2;var PQ=function(){function TableSelection(e){this.view=e;this.handlers={mousedown:this.handleMousedown.bind(this),mousemove:this.handleMousemove.bind(this),mouseup:this.handleMouseup.bind(this)};this.startCellPos=null;this.init()}TableSelection.prototype.init=function(){this.view.dom.addEventListener("mousedown",this.handlers.mousedown)};TableSelection.prototype.handleMousedown=function(e){var t=findCellElement(e.target,this.view.dom);if(e.button!==AQ){if(t){var r=this.getCellPos(e);r&&(this.startCellPos=r);this.bindEvent()}}else e.preventDefault()};TableSelection.prototype.handleMousemove=function(e){var t=OQ.getState(this.view.state);var r=this.getCellPos(e);var n=this.startCellPos;var a;t?a=this.view.state.doc.resolve(t):n!==r&&(a=n);a&&n&&r&&this.setCellSelection(n,r)};TableSelection.prototype.handleMouseup=function(){this.startCellPos=null;this.unbindEvent();null!==OQ.getState(this.view.state)&&this.view.dispatch(this.view.state.tr.setMeta(OQ,-1))};TableSelection.prototype.bindEvent=function(){var e=this.view.dom;e.addEventListener("mousemove",this.handlers.mousemove);e.addEventListener("mouseup",this.handlers.mouseup)};TableSelection.prototype.unbindEvent=function(){var e=this.view.dom;e.removeEventListener("mousemove",this.handlers.mousemove);e.removeEventListener("mouseup",this.handlers.mouseup)};TableSelection.prototype.getCellPos=function(e){var t=e.clientX,r=e.clientY;var n=this.view.posAtCoords({left:t,top:r});if(n){var a=this.view.state.doc;var o=a.resolve(n.pos);var i=findCell(o);if(i){var s=o.before(i.depth);return a.resolve(s)}}return null};TableSelection.prototype.setCellSelection=function(e,t){var r=this.view.state,n=r.selection,a=r.tr;var o=null===OQ.getState(this.view.state);var i=new SQ(e,t);if(o||!n.eq(i)){var s=a.setSelection(i);o&&s.setMeta(OQ,t.pos);this.view.dispatch(s)}};TableSelection.prototype.destroy=function(){this.view.dom.removeEventListener("mousedown",this.handlers.mousedown)};return TableSelection}();var DQ=cls("cell-selected");function drawCellSelection(e){var t=e.selection,r=e.doc;if(t instanceof SQ){var n=[];var a=t.ranges;a.forEach((function(e){var t=e.$from,r=e.$to;n.push(l.node(t.pos-1,r.pos+1,{class:DQ}))}));return s.create(r,n)}return null}function tableSelection(){return new g({key:OQ,state:{init:function(){return null},apply:function(e,t){var r=e.getMeta(OQ);if(r)return-1===r?null:r;if(be(t)||!e.docChanged)return t;var n=e.mapping.mapResult(t),a=n.deleted,o=n.pos;return a?null:o}},props:{decorations:drawCellSelection,createSelectionBetween:function(e){var t=e.state;return be(OQ.getState(t))?null:t.selection}},view:function(e){return new PQ(e)}})}var BQ=function(){function Map(){this.keys=[];this.values=[]}Map.prototype.getKeyIndex=function(e){return te(e,this.keys)};Map.prototype.get=function(e){return this.values[this.getKeyIndex(e)]};Map.prototype.set=function(e,t){var r=this.getKeyIndex(e);if(r>-1)this.values[r]=t;else{this.keys.push(e);this.values.push(t)}return this};Map.prototype.has=function(e){return this.getKeyIndex(e)>-1};Map.prototype.delete=function(e){var t=this.getKeyIndex(e);if(t>-1){this.keys.splice(t,1);this.values.splice(t,1);return true}return false};Map.prototype.forEach=function(e,t){var r=this;void 0===t&&(t=this);this.values.forEach((function(n,a){n&&r.keys[a]&&e.call(t,n,r.keys[a],r)}))};Map.prototype.clear=function(){this.keys=[];this.values=[]};return Map}();var RQ="en-US";var HQ=function(){function I18n(){this.code=RQ;this.langs=new BQ}I18n.prototype.setCode=function(e){this.code=e||RQ};
/**
     * Set language set
     * @param {string|string[]} codes locale code
     * @param {object} data language set
     */I18n.prototype.setLanguage=function(e,t){var r=this;e=[].concat(e);e.forEach((function(e){if(r.langs.has(e)){var n=r.langs.get(e);r.langs.set(e,W(n,t))}else r.langs.set(e,t)}))};I18n.prototype.get=function(e,t){t||(t=this.code);var r=this.langs.get(t);r||(r=this.langs.get(RQ));var n=r[e];if(!n)throw new Error('There is no text key "'+e+'" in '+t);return n};return I18n}();var _Q=new HQ;var $Q=[[{action:"Add row to up",command:"addRowToUp",disableInThead:true,className:"add-row-up"},{action:"Add row to down",command:"addRowToDown",disableInThead:true,className:"add-row-down"},{action:"Remove row",command:"removeRow",disableInThead:true,className:"remove-row"}],[{action:"Add column to left",command:"addColumnToLeft",className:"add-column-left"},{action:"Add column to right",command:"addColumnToRight",className:"add-column-right"},{action:"Remove column",command:"removeColumn",className:"remove-column"}],[{action:"Align column to left",command:"alignColumn",payload:{align:"left"},className:"align-column-left"},{action:"Align column to center",command:"alignColumn",payload:{align:"center"},className:"align-column-center"},{action:"Align column to right",command:"alignColumn",payload:{align:"right"},className:"align-column-right"}],[{action:"Remove table",command:"removeTable",className:"remove-table"}]];function getContextMenuGroups(e,t){return $Q.map((function(r){return r.map((function(r){var n=r.action,a=r.command,o=r.payload,i=r.disableInThead,s=r.className;return{label:_Q.get(n),onClick:function(){e.emit("command",a,o)},disabled:t&&!!i,className:s}}))})).concat()}function tableContextMenu(e){return new g({props:{handleDOMEvents:{contextmenu:function(t,r){var n=findCellElement(r.target,t.dom);if(n){r.preventDefault();var a=r,o=a.clientX,i=a.clientY;var s=t.dom.parentNode.getBoundingClientRect(),l=s.left,u=s.top;var d="TH"===n.nodeName;e.emit("contextmenu",{pos:{left:o-l+10+"px",top:i-u+30+"px"},menuGroups:getContextMenuGroups(e,d),tableCell:n});return true}return false}}}})}function task(){return new g({props:{handleDOMEvents:{mousedown:function(e,t){var r=t,n=r.clientX,a=r.clientY;var o=e.posAtCoords({left:n,top:a});if(o){var i=e.state,s=i.doc,l=i.tr;var u=s.resolve(o.pos);var d=findListItem(u);var v=t.target;var p=getComputedStyle(v,":before");var f=t,m=f.offsetX,g=f.offsetY;if(!d||!isPositionInBox(p,m,g))return false;t.preventDefault();var y=u.before(d.depth);var b=d.node.attrs;l.setNodeMarkup(y,null,__assign$1(__assign$1({},b),{checked:!b.checked}));e.dispatch(l);return true}return false}}}})}var FQ=["image","link","customBlock","frontMatter"];var jQ=["strong","strike","emph","code"];var UQ=["bulletList","orderedList","taskList"];function getToolbarStateType(e,t){var r=e.type.name;return"listItem"===r?e.attrs.task?"taskList":t.type.name:-1!==r.indexOf("table")?"table":r}function setListNodeToolbarState(e,t){t[e]={active:true};UQ.filter((function(t){return t!==e})).forEach((function(e){t[e]&&delete t[e]}))}function setMarkTypeStates(e,t,r,n){jQ.forEach((function(a){var o=r.marks[a];var i=e.marksAcross(t)||[];var s=!!o.isInSet(i);s&&(n[a]={active:true})}))}function getToolbarState(e,t,r){var n=e.$from,a=e.$to,o=e.from,i=e.to;var s={indent:{active:false,disabled:true},outdent:{active:false,disabled:true}};t.nodesBetween(o,i,(function(e,t,o){var i=getToolbarStateType(e,o);if(!includes(FQ,i))if(includes(UQ,i)){setListNodeToolbarState(i,s);s.indent.disabled=false;s.outdent.disabled=false}else"paragraph"===i||"text"===i?setMarkTypeStates(n,a,r,s):s[i]={active:true}}));return s}function toolbarStateHighlight(e){return new g({view:function(){return{update:function(t){var r=t.state,n=r.selection,a=r.doc,o=r.schema;e.emit("changeToolbarState",{toolbarState:getToolbarState(n,a,o)})}}}})}var WQ=function(){function CustomBlockView(e,t,r,n){var a=this;this.openEditor=function(){if(a.innerEditorView)throw new Error("The editor is already opened.");a.dom.draggable=false;a.wrapper.style.display="none";a.innerViewContainer.style.display="block";a.innerEditorView=new u(a.innerViewContainer,{state:b.create({doc:a.node,plugins:[x({"Mod-z":function(){return _(a.innerEditorView.state,a.innerEditorView.dispatch)},"Shift-Mod-z":function(){return $(a.innerEditorView.state,a.innerEditorView.dispatch)},Tab:function(e,t){t(e.tr.insertText("\t"));return true},Enter:S,Escape:function(){a.cancelEditing();return true},"Ctrl-Enter":function(){a.saveAndFinishEditing();return true}}),F()]}),dispatchTransaction:function(e){return a.dispatchInner(e)},handleDOMEvents:{mousedown:function(){a.editorView.hasFocus()&&a.innerEditorView.focus();return true},blur:function(){a.saveAndFinishEditing();return true}}});a.innerEditorView.focus()};this.node=e;this.editorView=t;this.getPos=r;this.toDOMAdaptor=n;this.innerEditorView=null;this.canceled=false;this.dom=document.createElement("div");this.dom.className=cls("custom-block");this.wrapper=document.createElement("div");this.wrapper.className=cls("custom-block-view");this.createInnerViewContainer();this.renderCustomBlock();this.dom.appendChild(this.innerViewContainer);this.dom.appendChild(this.wrapper)}CustomBlockView.prototype.renderToolArea=function(){var e=this;var t=document.createElement("div");var r=document.createElement("span");var n=document.createElement("button");t.className="tool";r.textContent=this.node.attrs.info;r.className="info";n.type="button";n.addEventListener("click",(function(){return e.openEditor()}));t.appendChild(r);t.appendChild(n);this.wrapper.appendChild(t)};CustomBlockView.prototype.renderCustomBlock=function(){var e=this.toDOMAdaptor.getToDOMNode(this.node.attrs.info);if(e){var t=e(this.node);while(this.wrapper.hasChildNodes())this.wrapper.removeChild(this.wrapper.lastChild);t&&this.wrapper.appendChild(t);this.renderToolArea()}};CustomBlockView.prototype.createInnerViewContainer=function(){this.innerViewContainer=document.createElement("div");this.innerViewContainer.className=cls("custom-block-editor");this.innerViewContainer.style.display="none"};CustomBlockView.prototype.closeEditor=function(){if(this.innerEditorView){this.innerEditorView.destroy();this.innerEditorView=null;this.innerViewContainer.style.display="none"}this.wrapper.style.display="block"};CustomBlockView.prototype.saveAndFinishEditing=function(){var e=this.editorView.state.selection.to;var t=this.editorView.state;this.editorView.dispatch(t.tr.setSelection(createTextSelection(t.tr,e)));this.editorView.focus();this.renderCustomBlock();this.closeEditor()};CustomBlockView.prototype.cancelEditing=function(){var e=j(this.innerEditorView.state);this.canceled=true;while(e--){_(this.innerEditorView.state,this.innerEditorView.dispatch);_(this.editorView.state,this.editorView.dispatch)}this.canceled=false;var t=this.editorView.state.selection.to;var r=this.editorView.state;this.editorView.dispatch(r.tr.setSelection(m.create(r.doc,t)));this.editorView.focus();this.closeEditor()};CustomBlockView.prototype.dispatchInner=function(e){var t=this.innerEditorView.state.applyTransaction(e),r=t.state,n=t.transactions;this.innerEditorView.updateState(r);if(!this.canceled&&bt(this.getPos)){var a=this.editorView.state.tr;var o=f.offset(this.getPos()+1);for(var i=0;i<n.length;i+=1){var s=n[i].steps;for(var l=0;l<s.length;l+=1)a.step(s[l].map(o))}a.docChanged&&this.editorView.dispatch(a)}};CustomBlockView.prototype.update=function(e){if(!e.sameMarkup(this.node))return false;this.node=e;this.innerEditorView||this.renderCustomBlock();return true};CustomBlockView.prototype.stopEvent=function(e){return!!this.innerEditorView&&!!e.target&&this.innerEditorView.dom.contains(e.target)};CustomBlockView.prototype.ignoreMutation=function(){return true};CustomBlockView.prototype.destroy=function(){this.dom.removeEventListener("dblclick",this.openEditor);this.closeEditor()};return CustomBlockView}();var qQ="image-link";var zQ=function(){function ImageView(e,t,r,n){var a=this;var o;this.handleMousedown=function(e){e.preventDefault();var t=e.target,r=e.offsetX,n=e.offsetY;if(a.imageLink&&bt(a.getPos)&&ze(t,qQ)){var o=getComputedStyle(t,":before");e.stopPropagation();if(isPositionInBox(o,r,n)){var i=a.view.state.tr;var s=a.getPos();i.setSelection(createTextSelection(i,s,s+1));a.view.dispatch(i);a.eventEmitter.emit("openPopup","link",a.imageLink.attrs)}}};this.node=e;this.view=t;this.getPos=r;this.eventEmitter=n;this.imageLink=null!==(o=e.marks.filter((function(e){var t=e.type;return"link"===t.name}))[0])&&void 0!==o?o:null;this.dom=this.createElement();this.bindEvent()}ImageView.prototype.createElement=function(){var e=this.createImageElement(this.node);if(this.imageLink){var t=document.createElement("span");t.className=qQ;t.appendChild(e);return t}return e};ImageView.prototype.createImageElement=function(e){var t=document.createElement("img");var r=e.attrs,n=r.imageUrl,a=r.altText;var o=getCustomAttrs(e.attrs);t.src=n;a&&(t.alt=a);setAttributes(o,t);return t};ImageView.prototype.bindEvent=function(){this.imageLink&&this.dom.addEventListener("mousedown",this.handleMousedown)};ImageView.prototype.stopEvent=function(){return true};ImageView.prototype.destroy=function(){this.imageLink&&this.dom.removeEventListener("mousedown",this.handleMousedown)};return ImageView}();var VQ="toastui-editor-ww-code-block";var GQ="toastui-editor-ww-code-block-language";var QQ=function(){function CodeBlockView(e,t,r,n){var a=this;this.contentDOM=null;this.input=null;this.timer=null;this.handleMousedown=function(e){var t=e.target;var r=getComputedStyle(t,":after");if("none"!==r.backgroundImage&&bt(a.getPos)){var n=a.view.coordsAtPos(a.getPos()),o=n.top,i=n.right;a.createLanguageEditor({top:o,right:i})}};this.handleKeydown=function(e){if("Enter"===e.key&&a.input){e.preventDefault();a.changeLanguage()}};this.node=e;this.view=t;this.getPos=r;this.eventEmitter=n;this.createElement();this.bindDOMEvent();this.bindEvent()}CodeBlockView.prototype.createElement=function(){var e=this.node.attrs.language;var t=document.createElement("div");t.setAttribute("data-language",e||"text");t.className=VQ;var r=this.createCodeBlockElement();var n=r.firstChild;t.appendChild(r);this.dom=t;this.contentDOM=n};CodeBlockView.prototype.createCodeBlockElement=function(){var e=document.createElement("pre");var t=document.createElement("code");var r=this.node.attrs.language;var n=getCustomAttrs(this.node.attrs);r&&t.setAttribute("data-language",r);setAttributes(n,e);e.appendChild(t);return e};CodeBlockView.prototype.createLanguageEditor=function(e){var t=this;var r=e.top,n=e.right;var a=document.createElement("span");a.className=GQ;var o=document.createElement("input");o.type="text";o.value=this.node.attrs.language;a.appendChild(o);this.view.dom.parentElement.appendChild(a);var i=a.clientWidth;J(a,{top:r+10+"px",left:n-i-10+"px",width:i+"px"});this.input=o;this.input.addEventListener("blur",(function(){return t.changeLanguage()}));this.input.addEventListener("keydown",this.handleKeydown);this.clearTimer();this.timer=setTimeout((function(){t.input.focus()}))};CodeBlockView.prototype.bindDOMEvent=function(){this.dom&&this.dom.addEventListener("click",this.handleMousedown)};CodeBlockView.prototype.bindEvent=function(){var e=this;this.eventEmitter.listen("scroll",(function(){e.input&&e.reset()}))};CodeBlockView.prototype.changeLanguage=function(){if(this.input&&bt(this.getPos)){var e=this.input.value;this.reset();var t=this.getPos();var r=this.view.state.tr;r.setNodeMarkup(t,null,{language:e});this.view.dispatch(r)}};CodeBlockView.prototype.reset=function(){var e;if(null===(e=this.input)||void 0===e?void 0:e.parentElement){var t=this.input.parentElement;this.input=null;removeNode$1(t)}};CodeBlockView.prototype.clearTimer=function(){if(this.timer){clearTimeout(this.timer);this.timer=null}};CodeBlockView.prototype.stopEvent=function(){return true};CodeBlockView.prototype.update=function(e){if(!e.sameMarkup(this.node))return false;this.node=e;return true};CodeBlockView.prototype.destroy=function(){this.reset();this.clearTimer();this.dom&&this.dom.removeEventListener("click",this.handleMousedown)};return CodeBlockView}();var XQ=/MsoListParagraph/;var ZQ=/style=(.|\n)*mso-/;var KQ=/mso-list:(.*)/;var YQ=/O:P/;var JQ=/^(n|u|l)/;var eX="p.MsoListParagraph";function isFromMso(e){return ZQ.test(e)}function getListItemContents(e){var t=[];var r=document.createTreeWalker(e,1,null,false);while(r.nextNode()){var n=r.currentNode;if(isElemNode(n)){var a=n,o=a.outerHTML,i=a.textContent;var s=ZQ.test(o);var l=KQ.test(o);s&&!l&&i?t.push([n,true]):(YQ.test(n.nodeName)||s&&!i||l)&&t.push([n,false])}}t.forEach((function(e){var t=e[0],r=e[1];r?unwrapNode(t):removeNode$1(t)}));return e.innerHTML.trim()}function createListItemDataFromParagraph(e,t){var r=e.getAttribute("style");if(r){var n=r.match(KQ),a=n[1];var o=a.trim().split(" "),i=o[1];var s=parseInt(i.replace("level",""),10);var l=JQ.test(e.textContent||"");return{id:t,level:s,prev:null,parent:null,children:[],unordered:l,contents:getListItemContents(e)}}return null}function addListItemDetailData(e,t){if(t.level<e.level){t.children.push(e);e.parent=t}else{while(t){if(t.level===e.level)break;t=t.parent}if(t){e.prev=t;e.parent=t.parent;e.parent&&e.parent.children.push(e)}}}function createListData(e){var t=[];e.forEach((function(e,r){var n=t[r-1];var a=createListItemDataFromParagraph(e,r);if(a){n&&addListItemDetailData(a,n);t.push(a)}}));return t}function makeList(e){var t=e[0].unordered?"ul":"ol";var r=document.createElement(t);e.forEach((function(e){var t=e.children,n=e.contents;var a=document.createElement("li");a.innerHTML=n;r.appendChild(a);t.length&&r.appendChild(makeList(t))}));return r}function makeListFromParagraphs(e){var t=createListData(e);var r=t.filter((function(e){var t=e.parent;return!t}));return makeList(r)}function isMsoListParagraphEnd(e){while(e){if(isElemNode(e))break;e=e.nextSibling}return!e||!XQ.test(e.className)}function convertMsoParagraphsToList(e){var t=document.createElement("div");t.innerHTML=e;var r=[];var n=findNodes(t,eX);n.forEach((function(e){var n=isMsoListParagraphEnd(e.nextSibling);r.push(e);if(n){var a=makeListFromParagraphs(r);var o=e.nextSibling;o?insertBeforeNode(a,o):appendNodes(t,a);r=[]}removeNode$1(e)}));var a=n.length?"<p></p>":"";return""+a+t.innerHTML}var tX="\x3c!--StartFragment--\x3e";var rX="\x3c!--EndFragment--\x3e";function getContentBetweenFragmentComments(e){var t=e.indexOf(tX);var r=e.lastIndexOf(rX);t>-1&&r>-1&&(e=e.slice(t+tX.length,r));return e.replace(/<br[^>]*>/g,dt)}function convertMsoTableToCompletedTable(e){/<\/td>((?!<\/tr>)[\s\S])*$/i.test(e)&&(e="<tr>"+e+"</tr>");/<\/tr>((?!<\/table>)[\s\S])*$/i.test(e)&&(e="<table>"+e+"</table>");return e}function changePastedHTML(e){e=getContentBetweenFragmentComments(e);e=convertMsoTableToCompletedTable(e);isFromMso(e)&&(e=convertMsoParagraphsToList(e));return e}function getMaxColumnCount(e){var t=e.reduce((function(e,t){return e.childCount>t.childCount?e:t}));return t.childCount}function createCells(e,t,r){var n=[];var a=e.childCount;for(var o=0;o<a;o+=1)if(!e.child(o).attrs.extended){var i=o<a?r.create(e.child(o).attrs,e.child(o).content):r.createAndFill();n.push(i)}return n}function copyTableHeadRow(e,t,r){var n=r.nodes,a=n.tableRow,o=n.tableHeadCell;var i=createCells(e,t,o);return a.create(null,i)}function copyTableBodyRow(e,t,r){var n=r.nodes,a=n.tableRow,o=n.tableBodyCell;var i=createCells(e,t,o);return a.create(null,i)}function creatTableBodyDummyRow(e,t){var r=t.nodes,n=r.tableRow,a=r.tableBodyCell;var o=[];for(var i=0;i<e;i+=1){var s=a.createAndFill();o.push(s)}return n.create({dummyRowForPasting:true},o)}function createRowsFromPastingTable(e){var t=[];var r=[];if("tableHead"===e.firstChild.type.name){var n=e.firstChild;n.forEach((function(e){return t.push(e)}))}if("tableBody"===e.lastChild.type.name){var a=e.lastChild;a.forEach((function(e){return r.push(e)}))}return __spreadArray$1(__spreadArray$1([],t),r)}function createTableHead(e,t,r){var n=copyTableHeadRow(e,t,r);return r.nodes.tableHead.create(null,n)}function createTableBody(e,t,r){var n=e.map((function(e){return copyTableBodyRow(e,t,r)}));if(!e.length){var a=creatTableBodyDummyRow(t,r);n.push(a)}return r.nodes.tableBody.create(null,n)}function createTableFromPastingTable(e,t,r,n){var a=getMaxColumnCount(e);if(r&&n)return t.nodes.table.create(null,[createTableBody(e,a,t)]);var o=e[0];var i=e.slice(1);var s=[createTableHead(o,a,t)];i.length&&s.push(createTableBody(i,a,t));return t.nodes.table.create(null,s)}function changePastedSlice(t,n,a){var o=[];var i=t.content,s=t.openStart,l=t.openEnd;i.forEach((function(t){if("table"===t.type.name){var i=getTableContentFromSlice(new r(e.from(t),0,0));if(i){var s=createRowsFromPastingTable(i);var l="tableBody"===i.firstChild.type.name;var u=createTableFromPastingTable(s,n,l,a);o.push(u)}}else o.push(t)}));return new r(e.from(o),s,l)}var nX=4;var aX=2;function getDummyCellSize(e){return e*nX}function createPastingCells(e,t,r){var n=[];var a=createRowsFromPastingTable(e);var o=a[0].childCount;var i=a.length;var s=0===t.startRowIdx;var l=a.slice(0,i);if(s){var u=l.shift();if(u){var d=copyTableHeadRow(u,o,r).content;n.push(d)}}l.forEach((function(e){if(!e.attrs.dummyRowForPasting){var t=copyTableBodyRow(e,o,r).content;n.push(t)}}));return n}function getPastingRangeInfo(e,t,r){var n=t.startRowIdx,a=t.startColIdx;var o=r.length;var i=0;var _loop_1=function(e){var t=r[e].childCount;r[e].forEach((function(e){var r=e.attrs;var n=r.colspan;n>1&&(t+=n-1)}));i=Math.max(i,t)};for(var s=0;s<o;s+=1)_loop_1(s);var l=n+o-1;var u=a+i-1;var d=Math.max(l+1-e.totalRowCount,0);var v=Math.max(u+1-e.totalColumnCount,0);return{startRowIdx:n,startColIdx:a,endRowIdx:l,endColIdx:u,addedRowCount:d,addedColumnCount:v}}function addReplacedOffsets(e,t){var r=e.startRowIdx,n=e.startColIdx,a=e.endRowIdx,o=e.endColIdx,i=e.addedRowCount,s=e.addedColumnCount;for(var l=r;l<=a-i;l+=1)t.push({rowIdx:l,startColIdx:n,endColIdx:o-s})}function expandColumns(e,t,r,n,a){var o=n.startRowIdx,i=n.startColIdx,s=n.endRowIdx,l=n.endColIdx,u=n.addedRowCount,d=n.addedColumnCount;var v=r.totalRowCount;var p=0;for(var f=0;f<v;f+=1){var m=r.getCellInfo(f,l-d),g=m.offset,y=m.nodeSize;var b=e.mapping.map(g+y);var w=createDummyCells(d,f,t);e.insert(b,w);if(f>=o&&f<=s-u){var T=r.getCellInfo(f,l-d);var C=e.mapping.map(T.offset);var k=b+getDummyCellSize(d);a[p]={rowIdx:f,startColIdx:i,endColIdx:l,dummyOffsets:[C,k]};p+=1}}}function expandRows(e,t,r,n,a){var o=n.addedRowCount,i=n.addedColumnCount,s=n.startColIdx,l=n.endColIdx;var u=e.mapping.maps.length;var d=r.tableEndOffset-2;var v=createTableBodyRows(o,r.totalColumnCount+i,t);var p=d;e.insert(e.mapping.slice(u).map(p),v);for(var f=0;f<o;f+=1){var m=p+getDummyCellSize(s)+1;var g=p+getDummyCellSize(l+1)+1;var y=p+getDummyCellSize(r.totalColumnCount+i)+aX;a.push({rowIdx:f+r.totalRowCount,startColIdx:s,endColIdx:l,dummyOffsets:[m,g]});p=y}}function replaceCells(e,t,n,a){var o=e.mapping.maps.length;n.forEach((function(n,i){var s=n.rowIdx,l=n.startColIdx,u=n.endColIdx,d=n.dummyOffsets;var v=e.mapping.slice(o);var p=new r(t[i],0,0);var f=d?d[0]:a.getCellStartOffset(s,l);var m=d?d[1]:a.getCellEndOffset(s,u);e.replace(v.map(f),v.map(m),p)}))}function pasteToTable(e,t){var r=e.state,n=r.selection,a=r.schema,o=r.tr;var i=getResolvedSelection(n),s=i.anchor,l=i.head;if(s&&l){var u=getTableContentFromSlice(t);if(!u)return false;var d=IQ.create(s);var v=d.getRectOffsets(s,l);var p=createPastingCells(u,v,a);var f=getPastingRangeInfo(d,v,p);var m=[];if(canMerge(d,f)){addReplacedOffsets(f,m);f.addedColumnCount&&expandColumns(o,a,d,f,m);f.addedRowCount&&expandRows(o,a,d,f,m);replaceCells(o,p,m,d);e.dispatch(o);setSelection(e,m,d.getCellInfo(0,0).offset)}return true}return false}function setSelection(e,t,r){var n=e.state,a=n.tr,o=n.doc;var i=IQ.create(o.resolve(r));var s=t[0],l=s.rowIdx,u=s.startColIdx;var d=last$1(t),v=d.rowIdx,p=d.endColIdx;var f=i.getCellInfo(l,u).offset;var m=i.getCellInfo(v,p).offset;e.dispatch(a.setSelection(new SQ(o.resolve(f),o.resolve(m))))}function canMerge(e,t){var r=e.getSpannedOffsets(t);var n=getRowAndColumnCount(r),a=n.rowCount,o=n.columnCount;var i=getRowAndColumnCount(t),s=i.rowCount,l=i.columnCount;return a===s&&o===l}var oX=function(e){__extends$1(Doc,e);function Doc(){return null!==e&&e.apply(this,arguments)||this}Object.defineProperty(Doc.prototype,"name",{get:function(){return"doc"},enumerable:false,configurable:true});Object.defineProperty(Doc.prototype,"schema",{get:function(){return{content:"block+"}},enumerable:false,configurable:true});return Doc}(mt);var iX=function(e){__extends$1(Paragraph,e);function Paragraph(){return null!==e&&e.apply(this,arguments)||this}Object.defineProperty(Paragraph.prototype,"name",{get:function(){return"paragraph"},enumerable:false,configurable:true});Object.defineProperty(Paragraph.prototype,"schema",{get:function(){return{content:"inline*",group:"block",attrs:__assign$1({},getDefaultCustomAttrs()),parseDOM:[{tag:"p"}],toDOM:function(e){var t=e.attrs;return["p",getCustomAttrs(t),0]}}},enumerable:false,configurable:true});return Paragraph}(mt);var sX=/\s{1,4}$/;var lX=function(e){__extends$1(Text,e);function Text(){return null!==e&&e.apply(this,arguments)||this}Object.defineProperty(Text.prototype,"name",{get:function(){return"text"},enumerable:false,configurable:true});Object.defineProperty(Text.prototype,"schema",{get:function(){return{group:"inline"}},enumerable:false,configurable:true});Text.prototype.addSpaces=function(){return function(e,t){var r=e.selection,n=e.tr;var a=r.$from,o=r.$to;var i=a.blockRange(o);if(i&&!isInListNode(a)&&!isInTableNode(a)){t(n.insertText("    ",a.pos,o.pos));return true}return false}};Text.prototype.removeSpaces=function(){return function(e,t){var r=e.selection,n=e.tr;var a=r.$from,o=r.$to,i=r.from;var s=a.blockRange(o);if(s&&!isInListNode(a)&&!isInTableNode(a)){var l=a.nodeBefore;if(l&&l.isText){var u=l.text;var d=u.replace(sX,"");var v=u.length-d.length;t(n.delete(i-v,i));return true}}return false}};Text.prototype.keymaps=function(){return{Tab:this.addSpaces(),"Shift-Tab":this.removeSpaces()}};return Text}(mt);var uX=function(e){__extends$1(Heading,e);function Heading(){return null!==e&&e.apply(this,arguments)||this}Object.defineProperty(Heading.prototype,"name",{get:function(){return"heading"},enumerable:false,configurable:true});Object.defineProperty(Heading.prototype,"levels",{get:function(){return[1,2,3,4,5,6]},enumerable:false,configurable:true});Object.defineProperty(Heading.prototype,"schema",{get:function(){var e=this.levels.map((function(e){return{tag:"h"+e,getAttrs:function(t){var r=t.getAttribute("data-raw-html");return __assign$1({level:e},r&&{rawHTML:r})}}}));return{attrs:__assign$1({level:{default:1},headingType:{default:"atx"},rawHTML:{default:null}},getDefaultCustomAttrs()),content:"inline*",group:"block",defining:true,parseDOM:e,toDOM:function(e){var t=e.attrs;return["h"+t.level,getCustomAttrs(t),0]}}},enumerable:false,configurable:true});Heading.prototype.commands=function(){return function(e){return function(t,r){var n=t.schema.nodes[e.level?"heading":"paragraph"];return O(n,e)(t,r)}}};return Heading}(mt);var cX=function(e){__extends$1(CodeBlock,e);function CodeBlock(){return null!==e&&e.apply(this,arguments)||this}Object.defineProperty(CodeBlock.prototype,"name",{get:function(){return"codeBlock"},enumerable:false,configurable:true});Object.defineProperty(CodeBlock.prototype,"schema",{get:function(){return{content:"text*",group:"block",attrs:__assign$1({language:{default:null},rawHTML:{default:null}},getDefaultCustomAttrs()),code:true,defining:true,marks:"",parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:function(e){var t=e.getAttribute("data-raw-html");var r=e.firstElementChild;return __assign$1({language:(null===r||void 0===r?void 0:r.getAttribute("data-language"))||null},t&&{rawHTML:t})}}],toDOM:function(e){var t=e.attrs;return[t.rawHTML||"pre",["code",__assign$1({"data-language":t.language},getCustomAttrs(t)),0]]}}},enumerable:false,configurable:true});CodeBlock.prototype.commands=function(){return function(){return function(e,t){return O(e.schema.nodes.codeBlock)(e,t)}}};CodeBlock.prototype.moveCursor=function(e){var t=this;return function(r,n){var a=r.tr,o=r.doc,i=r.schema;var s=r.selection.$from;var l=t.context.view;if(l.endOfTextblock(e)&&"codeBlock"===s.node().type.name){var u=s.parent.textContent.split("\n");var d="up"===e?s.start():s.end();var v="up"===e?[d,u[0].length+d]:[d-last$1(u).length,d];var p=o.resolve("up"===e?s.before():s.after());var f="up"===e?p.nodeBefore:p.nodeAfter;if(between$1(s.pos,v[0],v[1])&&!f){var m=addParagraph(a,p,i);if(m){n(m);return true}}}return false}};CodeBlock.prototype.keymaps=function(){var e=this.commands()();return{"Shift-Mod-p":e,"Shift-Mod-P":e,ArrowUp:this.moveCursor("up"),ArrowDown:this.moveCursor("down")}};return CodeBlock}(mt);var dX=function(e){__extends$1(BulletList,e);function BulletList(){return null!==e&&e.apply(this,arguments)||this}Object.defineProperty(BulletList.prototype,"name",{get:function(){return"bulletList"},enumerable:false,configurable:true});Object.defineProperty(BulletList.prototype,"schema",{get:function(){return{content:"listItem+",group:"block",attrs:__assign$1({rawHTML:{default:null}},getDefaultCustomAttrs()),parseDOM:[createDOMInfoParsedRawHTML("ul")],toDOM:function(e){var t=e.attrs;return["ul",getCustomAttrs(t),0]}}},enumerable:false,configurable:true});BulletList.prototype.changeList=function(){return function(e,t){return changeList(e.schema.nodes.bulletList)(e,t)}};BulletList.prototype.commands=function(){return{bulletList:this.changeList,taskList:toggleTask}};BulletList.prototype.keymaps=function(){var e=this.changeList();var t=getWwCommands(),r=t.indent,n=t.outdent;return{"Mod-u":e,"Mod-U":e,Tab:r(),"Shift-Tab":n()}};return BulletList}(mt);var vX=function(e){__extends$1(OrderedList,e);function OrderedList(){return null!==e&&e.apply(this,arguments)||this}Object.defineProperty(OrderedList.prototype,"name",{get:function(){return"orderedList"},enumerable:false,configurable:true});Object.defineProperty(OrderedList.prototype,"schema",{get:function(){return{content:"listItem+",group:"block",attrs:__assign$1({order:{default:1},rawHTML:{default:null}},getDefaultCustomAttrs()),parseDOM:[{tag:"ol",getAttrs:function(e){var t=e.getAttribute("start");var r=e.getAttribute("data-raw-html");return __assign$1({order:e.hasAttribute("start")?Number(t):1},r&&{rawHTML:r})}}],toDOM:function(e){var t=e.attrs;return[t.rawHTML||"ol",__assign$1({start:1===t.order?null:t.order},getCustomAttrs(t)),0]}}},enumerable:false,configurable:true});OrderedList.prototype.commands=function(){return function(){return function(e,t){return changeList(e.schema.nodes.orderedList)(e,t)}}};OrderedList.prototype.keymaps=function(){var e=this.commands()();var t=getWwCommands(),r=t.indent,n=t.outdent;return{"Mod-o":e,"Mod-O":e,Tab:r(),"Shift-Tab":n()}};return OrderedList}(mt);var pX=function(e){__extends$1(ListItem,e);function ListItem(){return null!==e&&e.apply(this,arguments)||this}Object.defineProperty(ListItem.prototype,"name",{get:function(){return"listItem"},enumerable:false,configurable:true});Object.defineProperty(ListItem.prototype,"schema",{get:function(){return{content:"paragraph block*",selectable:false,attrs:{task:{default:false},checked:{default:false},rawHTML:{default:null}},defining:true,parseDOM:[{tag:"li",getAttrs:function(e){var t=e.getAttribute("data-raw-html");return __assign$1({task:e.hasAttribute("data-task"),checked:e.hasAttribute("data-task-checked")},t&&{rawHTML:t})}}],toDOM:function(e){var t=e.attrs;var r=t.task,n=t.checked;if(!r)return[t.rawHTML||"li",0];var a=["task-list-item"];n&&a.push("checked");return[t.rawHTML||"li",__assign$1({class:a.join(" "),"data-task":r},n&&{"data-task-checked":n}),0]}}},enumerable:false,configurable:true});ListItem.prototype.liftToPrevListItem=function(){return function(e,t){var r=e.selection,n=e.tr,a=e.schema;var o=r.$from,i=r.empty;var s=a.nodes.listItem;var l=o.parent;var u=o.node(-1);if(i&&!l.childCount&&u.type===s){if(o.index(-2)>=1){n.delete(o.start(-1)-1,o.end(-1));t(n);return true}var d=o.node(-3);if(d.type===s){n.delete(o.start(-2)-1,o.end(-1));t(n);return true}}return false}};ListItem.prototype.keymaps=function(){var split=function(e,t){return splitListItem(e.schema.nodes.listItem)(e,t)};return{Backspace:this.liftToPrevListItem(),Enter:split}};return ListItem}(mt);var fX=function(e){__extends$1(BlockQuote,e);function BlockQuote(){return null!==e&&e.apply(this,arguments)||this}Object.defineProperty(BlockQuote.prototype,"name",{get:function(){return"blockQuote"},enumerable:false,configurable:true});Object.defineProperty(BlockQuote.prototype,"schema",{get:function(){return{attrs:__assign$1({rawHTML:{default:null}},getDefaultCustomAttrs()),content:"block+",group:"block",parseDOM:[createDOMInfoParsedRawHTML("blockquote")],toDOM:function(e){var t=e.attrs;return["blockquote",getCustomAttrs(t),0]}}},enumerable:false,configurable:true});BlockQuote.prototype.commands=function(){return function(){return function(e,t){return A(e.schema.nodes.blockQuote)(e,t)}}};BlockQuote.prototype.keymaps=function(){var e=this.commands()();return{"Alt-q":e,"Alt-Q":e}};return BlockQuote}(mt);var hX={left:getLeftCellOffset,right:getRightCellOffset,up:getUpCellOffset,down:getDownCellOffset};function isInFirstListItem(e,t,r){var n=r[0],a=r[1];var o=t.resolve(e.before(n-1));return a===n&&!o.nodeBefore}function isInLastListItem(e){var t;var r=e.depth;var n;while(r){n=e.node(r);if("tableBodyCell"===n.type.name)break;if("listItem"===n.type.name){var a=e.node(r-1);var o=a.lastChild===n;var i="paragraph"!==(null===(t=n.lastChild)||void 0===t?void 0:t.type.name);return!!o&&!i}r-=1}return false}function canMoveToBeforeCell(e,t,r,n,a){var o=t[0],i=t[1],s=t[2];if("left"===e||"up"===e){if(a&&!isInFirstListItem(r,n,[o,i]))return false;var l=r.before(s);var u=n.resolve(l).nodeBefore;if(u)return false}return true}function canMoveToAfterCell(e,t,r,n,a){if("right"===e||"down"===e){if(a&&!isInLastListItem(r))return false;var o=r.after(t);var i=n.resolve(o).nodeAfter;if(i)return false}return true}function canMoveBetweenCells(e,t,r,n){var a=t[0],o=t[1];var i=a+3;var s=o>=i;var l=s?a+1:o;var u=canMoveToBeforeCell(e,[o,i,l],r,n,s);var d=canMoveToAfterCell(e,l,r,n,s);return u&&d}function canBeOutOfTable(e,t,r){var n=r[0],a=r[1];var o=t.getRowspanStartInfo(n,a);var i="up"===e&&0===n;var s="down"===e&&((null===o||void 0===o?void 0:o.count)>1?n+o.count-1:n)===t.totalRowCount-1;return i||s}function addParagraphBeforeTable(e,t,r){var n=e.doc.resolve(t.tableStartOffset-1);return n.nodeBefore?e.setSelection(T.near(n,-1)):addParagraph(e,n,r)}function addParagraphAfterTable(e,t,r,n){void 0===n&&(n=false);var a=e.doc.resolve(t.tableEndOffset);return n||!a.nodeAfter?addParagraph(e,a,r):e.setSelection(T.near(a,1))}function getRightCellOffset(e,t){var r=e[0],n=e[1];var a=t.totalRowCount,o=t.totalColumnCount;var i=n===o-1;var s=r===a-1&&i;if(!s){var l=n+1;var u=t.getColspanStartInfo(r,n);(null===u||void 0===u?void 0:u.count)>1&&(l+=u.count-1);if(i||l===o){r+=1;l=0}var d=t.getCellInfo(r,l).offset;return d+2}return null}function getLeftCellOffset(e,t){var r=e[0],n=e[1];var a=t.totalColumnCount;var o=0===n;var i=0===r&&o;if(!i){n-=1;if(o){r-=1;n=a-1}var s=t.getCellInfo(r,n),l=s.offset,u=s.nodeSize;return l+u-2}return null}function getUpCellOffset(e,t){var r=e[0],n=e[1];if(r>0){var a=t.getCellInfo(r-1,n),o=a.offset,i=a.nodeSize;return o+i-2}return null}function getDownCellOffset(e,t){var r=e[0],n=e[1];var a=t.totalRowCount;if(r<a-1){var o=r+1;var i=t.getRowspanStartInfo(r,n);(null===i||void 0===i?void 0:i.count)>1&&(o+=i.count-1);var s=t.getCellInfo(o,n).offset;return s+2}return null}function moveToCell(e,t,r,n){var a=hX[e];var o=a(r,n);if(o){var i="right"===e||"down"===e?1:-1;return t.setSelection(T.near(t.doc.resolve(o),i))}return null}function canSelectTableNode(e,t,r){var n=r[0],a=r[1];if("up"===e||"down"===e)return false;var o=t.tableStartOffset,i=t.tableEndOffset;var s=t.getCellInfo(n,a),l=s.offset,u=s.nodeSize;var d="left"===e?o:i;var v="left"===e?l-2:l+u+3;return d===v}function selectNode(e,t,r){var n=e.doc.resolve(t.before(r-3));return e.setSelection(new k(n))}function getTargetRowInfo(e,t,r){var n;var a;var o;if("up"===e){n=r.startRowIdx;a=0;o=-1}else{n=r.endRowIdx;a=t.totalColumnCount-1;o=t.getCellInfo(n,a).nodeSize+1}return{targetRowIdx:n,insertColIdx:a,nodeSize:o}}function getRowRanges(e,t,r){var n=e.getCellInfo(t,0).offset;var a=e.getCellInfo(t,r-1),o=a.offset,i=a.nodeSize;return{from:n,to:o+i}}var mX=function(e){__extends$1(Table,e);function Table(){return null!==e&&e.apply(this,arguments)||this}Object.defineProperty(Table.prototype,"name",{get:function(){return"table"},enumerable:false,configurable:true});Object.defineProperty(Table.prototype,"schema",{get:function(){return{content:"tableHead{1} tableBody{1}",group:"block",attrs:__assign$1({rawHTML:{default:null}},getDefaultCustomAttrs()),parseDOM:[createDOMInfoParsedRawHTML("table")],toDOM:function(e){var t=e.attrs;return["table",getCustomAttrs(t),0]}}},enumerable:false,configurable:true});Table.prototype.addTable=function(){return function(e){void 0===e&&(e={rowCount:2,columnCount:1,data:[]});return function(t,r){var n=e.rowCount,a=e.columnCount,o=e.data;var i=t.schema,s=t.selection,l=t.tr;var u=s.from,d=s.to,v=s.$from;var p=u===d;if(p&&!isInTableNode(v)){var f=i.nodes,m=f.tableHead,g=f.tableBody;var y=null===o||void 0===o?void 0:o.slice(0,a);var b=null===o||void 0===o?void 0:o.slice(a,o.length);var w=createTableHeadRow(a,i,y);var T=createTableBodyRows(n-1,a,i,b);var C=i.nodes.table.create(null,[m.create(null,w),g.create(null,T)]);r(l.replaceSelectionWith(C));return true}return false}}};Table.prototype.removeTable=function(){return function(){return function(e,t){var r=e.selection,n=e.tr;var a=IQ.create(r.$anchor);if(a){var o=a.tableStartOffset,i=a.tableEndOffset;var s=o-1;var l=createTextSelection(n.delete(s,i),s);t(n.setSelection(l));return true}return false}}};Table.prototype.addColumn=function(e){return function(){return function(t,r){var n=t.selection,a=t.tr,o=t.schema;var i=getResolvedSelection(n),s=i.anchor,l=i.head;if(s&&l){var u=IQ.create(s);var d=u.getRectOffsets(s,l);var v="left"===e?d.startColIdx:d.endColIdx+1;var p=getRowAndColumnCount(d).columnCount;var f=u.totalRowCount;for(var m=0;m<f;m+=1){var g=createDummyCells(p,m,o);a.insert(a.mapping.map(u.posAt(m,v)),g)}r(a);return true}return false}}};Table.prototype.removeColumn=function(){return function(){return function(e,t){var r=e.selection,n=e.tr;var a=getResolvedSelection(r),o=a.anchor,i=a.head;if(o&&i){var s=IQ.create(o);var l=s.getRectOffsets(o,i);var u=s.totalColumnCount,d=s.totalRowCount;var v=getRowAndColumnCount(l).columnCount;var p=v===u;if(p)return false;var f=l.startColIdx,m=l.endColIdx;var g=n.mapping.maps.length;for(var y=0;y<d;y+=1)for(var b=m;b>=f;b-=1){var w=s.getCellInfo(y,b),T=w.offset,C=w.nodeSize;var k=n.mapping.slice(g).map(T);var x=k+C;n.delete(k,x)}t(n);return true}return false}}};Table.prototype.addRow=function(e){return function(){return function(t,r){var n=t.selection,a=t.schema,o=t.tr;var i=getResolvedSelection(n),s=i.anchor,l=i.head;if(s&&l){var u=IQ.create(s);var d=u.totalColumnCount;var v=u.getRectOffsets(s,l);var p=getRowAndColumnCount(v).rowCount;var f=getTargetRowInfo(e,u,v),m=f.targetRowIdx,g=f.insertColIdx,y=f.nodeSize;var b=0===m;if(!b){var w=[];var T=o.mapping.map(u.posAt(m,g))+y;var C=[];for(var k=0;k<d;k+=1)C=C.concat(createDummyCells(1,m,a));for(var x=0;x<p;x+=1)w.push(a.nodes.tableRow.create(null,C));r(o.insert(T,w));return true}}return false}}};Table.prototype.removeRow=function(){return function(){return function(e,t){var r=e.selection,n=e.tr;var a=getResolvedSelection(r),o=a.anchor,i=a.head;if(o&&i){var s=IQ.create(o);var l=s.totalRowCount,u=s.totalColumnCount;var d=s.getRectOffsets(o,i);var v=getRowAndColumnCount(d).rowCount;var p=d.startRowIdx,f=d.endRowIdx;var m=0===p;var g=v===l-1;if(g||m)return false;for(var y=f;y>=p;y-=1){var b=getRowRanges(s,y,u),w=b.from,T=b.to;n.delete(w-1,T+1)}t(n);return true}return false}}};Table.prototype.alignColumn=function(){return function(e){void 0===e&&(e={align:"center"});return function(t,r){var n=e.align;var a=t.selection,o=t.tr;var i=getResolvedSelection(a),s=i.anchor,l=i.head;if(s&&l){var u=IQ.create(s);var d=u.totalRowCount;var v=u.getRectOffsets(s,l);var p=v.startColIdx,f=v.endColIdx;for(var m=0;m<d;m+=1)for(var g=p;g<=f;g+=1)if(!u.extendedRowspan(m,g)&&!u.extendedColspan(m,g)){var y=u.getNodeAndPos(m,g),b=y.node,w=y.pos;var T=setAttrs(b,{align:n});o.setNodeMarkup(w,null,T)}r(o);return true}return false}}};Table.prototype.moveToCell=function(e){return function(t,r){var n=t.selection,a=t.tr,o=t.schema;var i=getResolvedSelection(n),s=i.anchor,l=i.head;if(s&&l){var u=IQ.create(s);var d=u.getCellIndex(s);var v=void 0;v=canBeOutOfTable(e,u,d)?addParagraphAfterTable(a,u,o):moveToCell(e,a,d,u);if(v){r(v);return true}}return false}};Table.prototype.moveInCell=function(e){var t=this;return function(r,n){var a=r.selection,o=r.tr,i=r.doc,s=r.schema;var l=a.$from;var u=t.context.view;if(!u.endOfTextblock(e))return false;var d=findNodeBy(l,(function(e){var t=e.type;return"tableHeadCell"===t.name||"tableBodyCell"===t.name}));if(d){var v=findNodeBy(l,(function(e){var t=e.type;return"paragraph"===t.name}));var p=d.depth;if(v&&canMoveBetweenCells(e,[p,v.depth],l,i)){var f=getResolvedSelection(a).anchor;var m=IQ.create(f);var g=m.getCellIndex(f);var y=void 0;canSelectTableNode(e,m,g)?y=selectNode(o,l,p):canBeOutOfTable(e,m,g)?"up"===e?y=addParagraphBeforeTable(o,m,s):"down"===e&&(y=addParagraphAfterTable(o,m,s)):y=moveToCell(e,o,g,m);if(y){n(y);return true}}}return false}};Table.prototype.deleteCells=function(){return function(e,t){var r=e.schema,n=e.selection,a=e.tr;var o=getResolvedSelection(n),i=o.anchor,s=o.head;var l=n instanceof m;if(i&&s&&!l){var u=IQ.create(i);var d=u.getRectOffsets(i,s),v=d.startRowIdx,p=d.startColIdx,f=d.endRowIdx,g=d.endColIdx;for(var y=v;y<=f;y+=1)for(var b=p;b<=g;b+=1)if(!u.extendedRowspan(y,b)&&!u.extendedColspan(y,b)){var w=u.getNodeAndPos(y,b),T=w.node,C=w.pos;var k=createDummyCells(1,y,r,T.attrs);a.replaceWith(a.mapping.map(C),a.mapping.map(C+T.nodeSize),k)}t(a);return true}return false}};Table.prototype.exitTable=function(){return function(e,t){var r=e.selection,n=e.tr,a=e.schema;var o=r.$from;var i=findNodeBy(o,(function(e){var t=e.type;return"tableHeadCell"===t.name||"tableBodyCell"===t.name}));if(i){var s=findNodeBy(o,(function(e){var t=e.type;return"paragraph"===t.name}));if(s){var l=getResolvedSelection(r).anchor;var u=IQ.create(l);t(addParagraphAfterTable(n,u,a,true));return true}}return false}};Table.prototype.commands=function(){return{addTable:this.addTable(),removeTable:this.removeTable(),addColumnToLeft:this.addColumn("left"),addColumnToRight:this.addColumn("right"),removeColumn:this.removeColumn(),addRowToUp:this.addRow("up"),addRowToDown:this.addRow("down"),removeRow:this.removeRow(),alignColumn:this.alignColumn()}};Table.prototype.keymaps=function(){var e=this.deleteCells();return{Tab:this.moveToCell("right"),"Shift-Tab":this.moveToCell("left"),ArrowUp:this.moveInCell("up"),ArrowDown:this.moveInCell("down"),ArrowLeft:this.moveInCell("left"),ArrowRight:this.moveInCell("right"),Backspace:e,"Mod-Backspace":e,Delete:e,"Mod-Delete":e,"Mod-Enter":this.exitTable()}};return Table}(mt);var gX=function(e){__extends$1(TableHead,e);function TableHead(){return null!==e&&e.apply(this,arguments)||this}Object.defineProperty(TableHead.prototype,"name",{get:function(){return"tableHead"},enumerable:false,configurable:true});Object.defineProperty(TableHead.prototype,"schema",{get:function(){return{content:"tableRow{1}",attrs:__assign$1({rawHTML:{default:null}},getDefaultCustomAttrs()),parseDOM:[createDOMInfoParsedRawHTML("thead")],toDOM:function(e){var t=e.attrs;return["thead",getCustomAttrs(t),0]}}},enumerable:false,configurable:true});return TableHead}(mt);var yX=function(e){__extends$1(TableBody,e);function TableBody(){return null!==e&&e.apply(this,arguments)||this}Object.defineProperty(TableBody.prototype,"name",{get:function(){return"tableBody"},enumerable:false,configurable:true});Object.defineProperty(TableBody.prototype,"schema",{get:function(){return{content:"tableRow+",attrs:__assign$1({rawHTML:{default:null}},getDefaultCustomAttrs()),parseDOM:[{tag:"tbody",getAttrs:function(e){var t=e.querySelectorAll("tr");var r=t[0].children.length;var n=e.getAttribute("data-raw-html");return!!r&&__assign$1({},n&&{rawHTML:n})}}],toDOM:function(e){var t=e.attrs;return["tbody",getCustomAttrs(t),0]}}},enumerable:false,configurable:true});return TableBody}(mt);var bX=function(e){__extends$1(TableRow,e);function TableRow(){return null!==e&&e.apply(this,arguments)||this}Object.defineProperty(TableRow.prototype,"name",{get:function(){return"tableRow"},enumerable:false,configurable:true});Object.defineProperty(TableRow.prototype,"schema",{get:function(){return{content:"(tableHeadCell | tableBodyCell)*",attrs:__assign$1({rawHTML:{default:null}},getDefaultCustomAttrs()),parseDOM:[{tag:"tr",getAttrs:function(e){var t=e.children.length;var r=e.getAttribute("data-raw-html");return!!t&&__assign$1({},r&&{rawHTML:r})}}],toDOM:function(e){var t=e.attrs;return["tr",getCustomAttrs(t),0]}}},enumerable:false,configurable:true});return TableRow}(mt);var wX=function(e){__extends$1(TableHeadCell,e);function TableHeadCell(){return null!==e&&e.apply(this,arguments)||this}Object.defineProperty(TableHeadCell.prototype,"name",{get:function(){return"tableHeadCell"},enumerable:false,configurable:true});Object.defineProperty(TableHeadCell.prototype,"schema",{get:function(){return{content:"paragraph+",attrs:__assign$1({align:{default:null},className:{default:null},rawHTML:{default:null},colspan:{default:null},extended:{default:null}},getDefaultCustomAttrs()),isolating:true,parseDOM:[createParsedCellDOM("th")],toDOM:function(e){var t=e.attrs;var r=createCellAttrs(t);return["th",__assign$1(__assign$1({},r),getCustomAttrs(t)),0]}}},enumerable:false,configurable:true});return TableHeadCell}(mt);var TX=function(e){__extends$1(TableBodyCell,e);function TableBodyCell(){return null!==e&&e.apply(this,arguments)||this}Object.defineProperty(TableBodyCell.prototype,"name",{get:function(){return"tableBodyCell"},enumerable:false,configurable:true});Object.defineProperty(TableBodyCell.prototype,"schema",{get:function(){return{content:"(paragraph | bulletList | orderedList)+",attrs:{align:{default:null},className:{default:null},rawHTML:{default:null},colspan:{default:null},rowspan:{default:null},extended:{default:null}},isolating:true,parseDOM:[createParsedCellDOM("td")],toDOM:function(e){var t=e.attrs;var r=createCellAttrs(t);return["td",r,0]}}},enumerable:false,configurable:true});return TableBodyCell}(mt);var CX=function(e){__extends$1(Image,e);function Image(){return null!==e&&e.apply(this,arguments)||this}Object.defineProperty(Image.prototype,"name",{get:function(){return"image"},enumerable:false,configurable:true});Object.defineProperty(Image.prototype,"schema",{get:function(){return{inline:true,attrs:__assign$1({imageUrl:{default:""},altText:{default:null},rawHTML:{default:null}},getDefaultCustomAttrs()),group:"inline",selectable:false,parseDOM:[{tag:"img[src]",getAttrs:function(e){var t=sanitizeHTML(e,{RETURN_DOM_FRAGMENT:true}).firstChild;var r=t.getAttribute("src")||"";var n=t.getAttribute("data-raw-html");var a=t.getAttribute("alt");return __assign$1({imageUrl:r,altText:a},n&&{rawHTML:n})}}],toDOM:function(e){var t=e.attrs;return[t.rawHTML||"img",__assign$1(__assign$1({src:escapeXml$1(t.imageUrl)},t.altText&&{alt:t.altText}),getCustomAttrs(t))]}}},enumerable:false,configurable:true});Image.prototype.addImage=function(){return function(e){return function(t,r){var n=t.schema,a=t.tr;var o=e,i=o.imageUrl,s=o.altText;if(!i)return false;var l=n.nodes.image.createAndFill(__assign$1({imageUrl:i},s&&{altText:s}));r(a.replaceSelectionWith(l).scrollIntoView());return true}}};Image.prototype.commands=function(){return{addImage:this.addImage()}};return Image}(mt);var kX=1;var xX=function(e){__extends$1(ThematicBreak,e);function ThematicBreak(){return null!==e&&e.apply(this,arguments)||this}Object.defineProperty(ThematicBreak.prototype,"name",{get:function(){return"thematicBreak"},enumerable:false,configurable:true});Object.defineProperty(ThematicBreak.prototype,"schema",{get:function(){return{attrs:__assign$1({rawHTML:{default:null}},getDefaultCustomAttrs()),group:"block",parseDOM:[{tag:"hr"}],selectable:false,toDOM:function(e){var t=e.attrs;return["div",getCustomAttrs(t),[t.rawHTML||"hr"]]}}},enumerable:false,configurable:true});ThematicBreak.prototype.hr=function(){var e=this;return function(){return function(t,r){var n;var a=t.selection,o=a.$from,i=a.$to;if(o===i){var s=t.doc;var l=t.schema.nodes,u=l.thematicBreak,d=l.paragraph;var v=[u.create()];var p=o.node(kX);var f=s.child(s.childCount-1)===p;var m=s.resolve(o.after(kX));var g=(null===(n=o.nodeAfter)||void 0===n?void 0:n.type.name)===e.name;(f||g)&&v.push(d.create());r(t.tr.insert(m.pos,v).scrollIntoView());return true}return false}}};ThematicBreak.prototype.commands=function(){return{hr:this.hr()}};ThematicBreak.prototype.keymaps=function(){var e=this.hr()();return{"Mod-l":e,"Mod-L":e}};return ThematicBreak}(mt);var MX=function(e){__extends$1(Strong,e);function Strong(){return null!==e&&e.apply(this,arguments)||this}Object.defineProperty(Strong.prototype,"name",{get:function(){return"strong"},enumerable:false,configurable:true});Object.defineProperty(Strong.prototype,"schema",{get:function(){var e=["b","strong"].map((function(e){return{tag:e,getAttrs:function(e){var t=e.getAttribute("data-raw-html");return __assign$1({},t&&{rawHTML:t})}}}));return{attrs:__assign$1({rawHTML:{default:null}},getDefaultCustomAttrs()),parseDOM:e,toDOM:function(e){var t=e.attrs;return[t.rawHTML||"strong",getCustomAttrs(t)]}}},enumerable:false,configurable:true});Strong.prototype.bold=function(){return function(){return function(e,t){return P(e.schema.marks.strong)(e,t)}}};Strong.prototype.commands=function(){return{bold:this.bold()}};Strong.prototype.keymaps=function(){var e=this.bold()();return{"Mod-b":e,"Mod-B":e}};return Strong}(Wt);var EX=function(e){__extends$1(Emph,e);function Emph(){return null!==e&&e.apply(this,arguments)||this}Object.defineProperty(Emph.prototype,"name",{get:function(){return"emph"},enumerable:false,configurable:true});Object.defineProperty(Emph.prototype,"schema",{get:function(){var e=["i","em"].map((function(e){return{tag:e,getAttrs:function(e){var t=e.getAttribute("data-raw-html");return __assign$1({},t&&{rawHTML:t})}}}));return{attrs:__assign$1({rawHTML:{default:null}},getDefaultCustomAttrs()),parseDOM:e,toDOM:function(e){var t=e.attrs;return[t.rawHTML||"em",getCustomAttrs(t)]}}},enumerable:false,configurable:true});Emph.prototype.italic=function(){return function(){return function(e,t){return P(e.schema.marks.emph)(e,t)}}};Emph.prototype.commands=function(){return{italic:this.italic()}};Emph.prototype.keymaps=function(){var e=this.italic()();return{"Mod-i":e,"Mod-I":e}};return Emph}(Wt);var LX=function(e){__extends$1(Strike,e);function Strike(){return null!==e&&e.apply(this,arguments)||this}Object.defineProperty(Strike.prototype,"name",{get:function(){return"strike"},enumerable:false,configurable:true});Object.defineProperty(Strike.prototype,"schema",{get:function(){var e=["s","del"].map((function(e){return{tag:e,getAttrs:function(e){var t=e.getAttribute("data-raw-html");return __assign$1({},t&&{rawHTML:t})}}}));return{attrs:__assign$1({rawHTML:{default:null}},getDefaultCustomAttrs()),parseDOM:e,toDOM:function(e){var t=e.attrs;return[t.rawHTML||"del",getCustomAttrs(t)]}}},enumerable:false,configurable:true});Strike.prototype.commands=function(){return function(){return function(e,t){return P(e.schema.marks.strike)(e,t)}}};Strike.prototype.keymaps=function(){var e=this.commands()();return{"Mod-s":e,"Mod-S":e}};return Strike}(Wt);var NX=function(e){__extends$1(Link,e);function Link(t){var r=e.call(this)||this;r.linkAttributes=t;return r}Object.defineProperty(Link.prototype,"name",{get:function(){return"link"},enumerable:false,configurable:true});Object.defineProperty(Link.prototype,"schema",{get:function(){var e=this;return{attrs:__assign$1({linkUrl:{default:""},title:{default:null},rawHTML:{default:null}},getDefaultCustomAttrs()),inclusive:false,parseDOM:[{tag:"a[href]",getAttrs:function(e){var t=sanitizeHTML(e,{RETURN_DOM_FRAGMENT:true}).firstChild;var r=t.getAttribute("href")||"";var n=t.getAttribute("title")||"";var a=t.getAttribute("data-raw-html");return __assign$1({linkUrl:r,title:n},a&&{rawHTML:a})}}],toDOM:function(t){var r=t.attrs;return[r.rawHTML||"a",__assign$1(__assign$1({href:escapeXml$1(r.linkUrl)},e.linkAttributes),getCustomAttrs(r))]}}},enumerable:false,configurable:true});Link.prototype.addLink=function(){return function(e){return function(t,r){var n=e,a=n.linkUrl,o=n.linkText,i=void 0===o?"":o;var s=t.schema,l=t.tr,u=t.selection;var d=u.empty,v=u.from,p=u.to;if(v&&p&&a){var f={linkUrl:a};var m=s.mark("link",f);if(d&&i){var g=createTextNode$1(s,i,m);l.replaceRangeWith(v,p,g)}else l.addMark(v,p,m);r(l.scrollIntoView());return true}return false}}};Link.prototype.toggleLink=function(){return function(e){return function(t,r){return P(t.schema.marks.link,e)(t,r)}}};Link.prototype.commands=function(){return{addLink:this.addLink(),toggleLink:this.toggleLink()}};return Link}(Wt);var IX=function(e){__extends$1(Code,e);function Code(){return null!==e&&e.apply(this,arguments)||this}Object.defineProperty(Code.prototype,"name",{get:function(){return"code"},enumerable:false,configurable:true});Object.defineProperty(Code.prototype,"schema",{get:function(){return{attrs:__assign$1({rawHTML:{default:null}},getDefaultCustomAttrs()),parseDOM:[{tag:"code",getAttrs:function(e){var t=e.getAttribute("data-raw-html");return __assign$1({},t&&{rawHTML:t})}}],toDOM:function(e){var t=e.attrs;return[t.rawHTML||"code",getCustomAttrs(t)]}}},enumerable:false,configurable:true});Code.prototype.commands=function(){return function(){return function(e,t){return P(e.schema.marks.code)(e,t)}}};Code.prototype.keymaps=function(){var e=this.commands()();return{"Shift-Mod-c":e,"Shift-Mod-C":e}};return Code}(Wt);var SX=function(e){__extends$1(CustomBlock,e);function CustomBlock(){return null!==e&&e.apply(this,arguments)||this}Object.defineProperty(CustomBlock.prototype,"name",{get:function(){return"customBlock"},enumerable:false,configurable:true});Object.defineProperty(CustomBlock.prototype,"schema",{get:function(){return{content:"text*",group:"block",attrs:{info:{default:null}},atom:true,code:true,defining:true,parseDOM:[{tag:"div[data-custom-info]",getAttrs:function(e){var t=e.getAttribute("data-custom-info");return{info:t}}}],toDOM:function(e){var t=e.attrs;return["div",{"data-custom-info":t.info||null},0]}}},enumerable:false,configurable:true});CustomBlock.prototype.commands=function(){return function(e){return function(t,r){return!!(null===e||void 0===e?void 0:e.info)&&O(t.schema.nodes.customBlock,e)(t,r)}}};return CustomBlock}(mt);var OX=function(e){__extends$1(FrontMatter,e);function FrontMatter(){return null!==e&&e.apply(this,arguments)||this}Object.defineProperty(FrontMatter.prototype,"name",{get:function(){return"frontMatter"},enumerable:false,configurable:true});Object.defineProperty(FrontMatter.prototype,"schema",{get:function(){return{content:"text*",group:"block",code:true,defining:true,parseDOM:[{preserveWhitespace:"full",tag:"div[data-front-matter]"}],toDOM:function(){return["div",{"data-front-matter":"true"},0]}}},enumerable:false,configurable:true});FrontMatter.prototype.commands=function(){return function(){return function(e,t,r){var n=e.selection.$from;return!(!r.endOfTextblock("down")||"frontMatter"!==n.node().type.name)&&D(e,t)}}};FrontMatter.prototype.keymaps=function(){return{Enter:this.commands()()}};return FrontMatter}(mt);var AX=function(e){__extends$1(HTMLComment,e);function HTMLComment(){return null!==e&&e.apply(this,arguments)||this}Object.defineProperty(HTMLComment.prototype,"name",{get:function(){return"htmlComment"},enumerable:false,configurable:true});Object.defineProperty(HTMLComment.prototype,"schema",{get:function(){return{content:"text*",group:"block",code:true,defining:true,parseDOM:[{preserveWhitespace:"full",tag:"div[data-html-comment]"}],toDOM:function(){return["div",{"data-html-comment":"true"},0]}}},enumerable:false,configurable:true});HTMLComment.prototype.commands=function(){return function(){return function(e,t,r){var n=e.selection.$from;return!(!r.endOfTextblock("down")||"htmlComment"!==n.node().type.name)&&D(e,t)}}};HTMLComment.prototype.keymaps=function(){return{Enter:this.commands()()}};return HTMLComment}(mt);function createSpecs(e){return new Tt([new oX,new iX,new lX,new uX,new cX,new dX,new vX,new pX,new fX,new mX,new gX,new yX,new bX,new wX,new TX,new CX,new xX,new MX,new EX,new LX,new NX(e),new IX,new SX,new OX,new gt,new AX])}var PX=cls("contents");var DX=function(n){__extends$1(WysiwygEditor,n);function WysiwygEditor(e,t){var r=n.call(this,e)||this;var a=t.toDOMAdaptor,o=t.htmlSchemaMap,i=void 0===o?{}:o,s=t.linkAttributes,l=void 0===s?{}:s,u=t.useCommandShortcut,d=void 0===u||u,v=t.wwPlugins,p=void 0===v?[]:v,f=t.wwNodeViews,m=void 0===f?{}:f;r.editorType="wysiwyg";r.el.classList.add("ww-mode");r.toDOMAdaptor=a;r.linkAttributes=l;r.extraPlugins=p;r.pluginNodeViews=m;r.specs=r.createSpecs();r.schema=r.createSchema(i);r.context=r.createContext();r.keymaps=r.createKeymaps(d);r.view=r.createView();r.commands=r.createCommands();r.specs.setContext(__assign$1(__assign$1({},r.context),{view:r.view}));r.initEvent();return r}WysiwygEditor.prototype.createSpecs=function(){return createSpecs(this.linkAttributes)};WysiwygEditor.prototype.createContext=function(){return{schema:this.schema,eventEmitter:this.eventEmitter}};WysiwygEditor.prototype.createSchema=function(e){return new t({nodes:__assign$1(__assign$1({},this.specs.nodes),e.nodes),marks:__assign$1(__assign$1({},this.specs.marks),e.marks)})};WysiwygEditor.prototype.createPlugins=function(){return __spreadArray$1([tableSelection(),tableContextMenu(this.eventEmitter),task(),toolbarStateHighlight(this.eventEmitter)],this.createPluginProps()).concat(this.defaultPlugins)};WysiwygEditor.prototype.createPluginNodeViews=function(){var e=this,t=e.eventEmitter,r=e.pluginNodeViews;var n={};r&&Object.keys(r).forEach((function(e){n[e]=function(n,a,o){return r[e](n,a,o,t)}}));return n};WysiwygEditor.prototype.createView=function(){var e=this;var t=this,r=t.toDOMAdaptor,n=t.eventEmitter;return new u(this.el,{state:this.createState(),attributes:{class:PX},nodeViews:__assign$1({customBlock:function(e,t,n){return new WQ(e,t,n,r)},image:function(e,t,r){return new zQ(e,t,r,n)},codeBlock:function(e,t,r){return new QQ(e,t,r,n)},widget:widgetNodeView},this.createPluginNodeViews()),dispatchTransaction:function(t){var r=e.view.state.applyTransaction(t).state;e.view.updateState(r);e.emitChangeEvent(t.scrollIntoView());e.eventEmitter.emit("setFocusedNode",r.selection.$from.node(1))},transformPastedHTML:changePastedHTML,transformPasted:function(t){return changePastedSlice(t,e.schema,isInTableNode(e.view.state.selection.$from))},handlePaste:function(e,t,r){return pasteToTable(e,r)},handleKeyDown:function(t,r){e.eventEmitter.emit("keydown",e.editorType,r);return false},handleDOMEvents:{paste:function(t,r){var n=r.clipboardData||window.clipboardData;var a=null===n||void 0===n?void 0:n.items;if(a){var o=$e(a).some((function(e){return"string"===e.kind&&"text/rtf"===e.type}));if(!o){var i=pasteImageOnly(a);if(i){r.preventDefault();emitImageBlobHook(e.eventEmitter,i,r.type)}}}return false},keyup:function(t,r){e.eventEmitter.emit("keyup",e.editorType,r);return false},scroll:function(){e.eventEmitter.emit("scroll","editor");return true}}})};WysiwygEditor.prototype.createCommands=function(){return this.specs.commands(this.view,getWwCommands())};WysiwygEditor.prototype.getHTML=function(){return removeProseMirrorHackNodes(this.view.dom.innerHTML)};WysiwygEditor.prototype.getModel=function(){return this.view.state.doc};WysiwygEditor.prototype.getSelection=function(){var e=this.view.state.selection,t=e.from,r=e.to;return[t,r]};WysiwygEditor.prototype.getSchema=function(){return this.view.state.schema};WysiwygEditor.prototype.replaceSelection=function(t,n,a){var o=this.view.state,i=o.schema,s=o.tr;var l=t.split("\n");var u=l.map((function(e){return createParagraph(i,createNodesWithWidget(e,i))}));var d=new r(e.from(u),1,1);var v=ye(n)&&ye(a)?s.replaceRange(n,a,d):s.replaceSelection(d);this.view.dispatch(v);this.focus()};WysiwygEditor.prototype.deleteSelection=function(e,t){var r=this.view.state.tr;var n=ye(e)&&ye(t)?r.deleteRange(e,t):r.deleteSelection();this.view.dispatch(n.scrollIntoView())};WysiwygEditor.prototype.getSelectedText=function(e,t){var r=this.view.state,n=r.doc,a=r.selection;var o=a.from,i=a.to;if(ye(e)&&ye(t)){o=e;i=t}return n.textBetween(o,i,"\n")};WysiwygEditor.prototype.setModel=function(e,t){void 0===t&&(t=false);var r=this.view.state,n=r.tr,a=r.doc;this.view.dispatch(n.replaceWith(0,a.content.size,e));t&&this.moveCursorToEnd(true)};WysiwygEditor.prototype.setSelection=function(e,t){void 0===t&&(t=e);var r=this.view.state.tr;var n=createTextSelection(r,e,t);this.view.dispatch(r.setSelection(n).scrollIntoView())};WysiwygEditor.prototype.addWidget=function(e,t,r){var n=this.view,a=n.dispatch,o=n.state;a(o.tr.setMeta("widget",{pos:null!==r&&void 0!==r?r:o.selection.to,node:e,style:t}))};WysiwygEditor.prototype.replaceWithWidget=function(e,t,r){var n=this.view.state,a=n.tr,o=n.schema;var i=createNodesWithWidget(r,o);this.view.dispatch(a.replaceWith(e,t,i))};WysiwygEditor.prototype.getRangeInfoOfNode=function(e){var t=this.view.state,r=t.doc,n=t.selection;var a=e?r.resolve(e):n.$from;var o=a.marks();var i=a.node();var s=a.start();var l=a.end();var u=i.type.name;if(o.length||"paragraph"===u){var d=o[o.length-1];var maybeHasMark_1=function(e){return!e.length||includes(e,d)};u=d?d.type.name:"text";i.forEach((function(e,t){var r=e.isText,n=e.nodeSize,o=e.marks;var i=a.pos-s;if(r&&t<=i&&t+n>=i&&maybeHasMark_1(o)){s+=t;l=s+n}}))}return{range:[s,l],type:u}};return WysiwygEditor}(yt);var BX=re;var RX=be;
/**
 * Check whether the given variable is existing or not.
 * If the given variable is not null and not undefined, returns true.
 * @param {*} param - Target for checking
 * @returns {boolean} Is existy?
 * @memberof module:type
 * @example
 * // ES6
 * import isExisty from 'tui-code-snippet/type/isExisty');
 * 
 * // CommonJS
 * const isExisty = require('tui-code-snippet/type/isExisty');
 *
 * isExisty(''); //true
 * isExisty(0); //true
 * isExisty([]); //true
 * isExisty({}); //true
 * isExisty(null); //false
 * isExisty(undefined); //false
*/function isExisty$1(e){return!BX(e)&&!RX(e)}var HX=isExisty$1;var _X=HX;
/**
 * Check whether the given variable is truthy or not.
 * If the given variable is not null or not undefined or not false, returns true.
 * (It regards 0 as true)
 * @param {*} obj - Target for checking
 * @returns {boolean} Is truthy?
 * @memberof module:type
 */function isTruthy$1(e){return _X(e)&&false!==e}var $X=isTruthy$1;var FX=$X;
/**
 * Check whether the given variable is falsy or not.
 * If the given variable is null or undefined or false, returns true.
 * @param {*} obj - Target for checking
 * @returns {boolean} Is falsy?
 * @memberof module:type
 */function isFalsy(e){return!FX(e)}var jX=isFalsy;var UX=["afterPreviewRender","updatePreview","changeMode","needChangeMode","command","changePreviewStyle","changePreviewTabPreview","changePreviewTabWrite","scroll","contextmenu","show","hide","changeLanguage","changeToolbarState","toggleScrollSync","mixinTableOffsetMapPrototype","setFocusedNode","removePopupWidget","query","openPopup","closePopup","addImageBlobHook","beforePreviewRender","beforeConvertWysiwygToMarkdown","load","loadUI","change","caretChange","destroy","focus","blur","keydown","keyup"];var WX=function(){function EventEmitter(){var e=this;this.events=new BQ;this.eventTypes=UX.reduce((function(e,t){return __assign$1(__assign$1({},e),{type:t})}),{});this.hold=false;UX.forEach((function(t){e.addEventType(t)}))}
/**
     * Listen event and bind event handler
     * @param {string} type Event type string
     * @param {function} handler Event handler
     */EventEmitter.prototype.listen=function(e,t){var r=this.getTypeInfo(e);var n=this.events.get(r.type)||[];if(!this.hasEventType(r.type))throw new Error("There is no event type "+r.type);r.namespace&&(t.namespace=r.namespace);n.push(t);this.events.set(r.type,n)};
/**
     * Emit event
     * @param {string} eventName Event name to emit
     * @returns {Array}
     */EventEmitter.prototype.emit=function(e){var t=[];for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=this.getTypeInfo(e);var a=this.events.get(n.type);var o=[];!this.hold&&a&&a.forEach((function(e){var r=e.apply(void 0,t);re(r)||o.push(r)}));return o};
/**
     * Emit given event and return result
     * @param {string} eventName Event name to emit
     * @param {any} source Source to change
     * @returns {string}
     */EventEmitter.prototype.emitReduce=function(e,t){var r=[];for(var n=2;n<arguments.length;n++)r[n-2]=arguments[n];var a=this.events.get(e);!this.hold&&a&&a.forEach((function(e){var n=e.apply(void 0,__spreadArray$1([t],r));jX(n)||(t=n)}));return t};
/**
     * Get event type and namespace
     * @param {string} type Event type name
     * @returns {{type: string, namespace: string}}
     * @private
     */EventEmitter.prototype.getTypeInfo=function(e){var t=e.split(".");return{type:t[0],namespace:t[1]}};
/**
     * Check whether event type exists or not
     * @param {string} type Event type name
     * @returns {boolean}
     * @private
     */EventEmitter.prototype.hasEventType=function(e){return!re(this.eventTypes[this.getTypeInfo(e).type])};
/**
     * Add event type when given event not exists
     * @param {string} type Event type name
     */EventEmitter.prototype.addEventType=function(e){if(this.hasEventType(e))throw new Error("There is already have event type "+e);this.eventTypes[e]=e};
/**
     * Remove event handler from given event type
     * @param {string} eventType Event type name
     * @param {function} [handler] - registered event handler
     */EventEmitter.prototype.removeEventHandler=function(e,t){var r=this;var n=this.getTypeInfo(e),a=n.type,o=n.namespace;a&&t?this.removeEventHandlerWithHandler(a,t):a&&!o?this.events.delete(a):!a&&o?this.events.forEach((function(e,t){r.removeEventHandlerWithTypeInfo(t,o)})):a&&o&&this.removeEventHandlerWithTypeInfo(a,o)};
/**
     * Remove event handler with event handler
     * @param {string} type - event type name
     * @param {function} handler - event handler
     * @private
     */EventEmitter.prototype.removeEventHandlerWithHandler=function(e,t){var r=this.events.get(e);if(r){var n=r.indexOf(t);r.indexOf(t)>=0&&r.splice(n,1)}};
/**
     * Remove event handler with event type information
     * @param {string} type Event type name
     * @param {string} namespace Event namespace
     * @private
     */EventEmitter.prototype.removeEventHandlerWithTypeInfo=function(e,t){var r=[];var n=this.events.get(e);if(n){n.map((function(e){e.namespace!==t&&r.push(e);return null}));this.events.set(e,r)}};EventEmitter.prototype.getEvents=function(){return this.events};EventEmitter.prototype.holdEventInvoke=function(e){this.hold=true;e();this.hold=false};return EventEmitter}();var qX=function(){function CommandManager(e,t,r,n){this.eventEmitter=e;this.mdCommands=t;this.wwCommands=r;this.getEditorType=n;this.initEvent()}CommandManager.prototype.initEvent=function(){var e=this;this.eventEmitter.listen("command",(function(t,r){e.exec(t,r)}))};CommandManager.prototype.addCommand=function(e,t,r){"markdown"===e?this.mdCommands[t]=r:this.wwCommands[t]=r};CommandManager.prototype.deleteCommand=function(e,t){"markdown"===e?delete this.mdCommands[t]:delete this.wwCommands[t]};CommandManager.prototype.exec=function(e,t){var r=this.getEditorType();"markdown"===r?this.mdCommands[e](t):this.wwCommands[e](t)};return CommandManager}();function getTextWithoutTrailingNewline(e){return"\n"===e[e.length-1]?e.slice(0,e.length-1):e}function isCustomHTMLInlineNode(e,t){var r=e.schema;var n=t.literal;var a=n.match(lt);if(a){var o=a[1],i=a[3];var s=(o||i).toLowerCase();return"htmlInline"===t.type&&!!(r.marks[s]||r.nodes[s])}return false}function isInlineNode(e){var t=e.type;return includes(["text","strong","emph","strike","image","link","code"],t)}function isSoftbreak(e){return"softbreak"===(null===e||void 0===e?void 0:e.type)}function isListNode(e){var t=e.type,r=e.literal;var n="htmlInline"===t&&r.match(lt);if(n){var a=n[1],o=n[3];var i=a||o;if(i)return includes(["ul","ol","li"],i.toLowerCase())}return false}function getListItemAttrs(e){var t=e.literal;var r=/data-task/.test(t);var n=/data-task-checked/.test(t);return{task:r,checked:n}}function getMatchedAttributeValue(e){var t=[];for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=document.createElement("div");n.innerHTML=sanitizeHTML(e);var a=n.firstChild;return t.map((function(e){return a.getAttribute(e)||""}))}function createConvertors(e){var t={};Object.keys(e).forEach((function(r){var n=r.split(", ");n.forEach((function(n){var a=n.toLowerCase();t[a]=e[r]}))}));return t}var zX={"b, strong":function(e,t,r){var n=e.schema.marks.strong;r?e.openMark(n.create({rawHTML:r})):e.closeMark(n)},"i, em":function(e,t,r){var n=e.schema.marks.emph;r?e.openMark(n.create({rawHTML:r})):e.closeMark(n)},"s, del":function(e,t,r){var n=e.schema.marks.strike;r?e.openMark(n.create({rawHTML:r})):e.closeMark(n)},code:function(e,t,r){var n=e.schema.marks.code;r?e.openMark(n.create({rawHTML:r})):e.closeMark(n)},a:function(e,t,r){var n=t.literal;var a=e.schema.marks.link;if(r){var o=getMatchedAttributeValue(n,"href")[0];e.openMark(a.create({linkUrl:o,rawHTML:r}))}else e.closeMark(a)},img:function(e,t,r){var n=t.literal;if(r){var a=getMatchedAttributeValue(n,"src","alt"),o=a[0],i=a[1];var s=e.schema.nodes.image;e.addNode(s,__assign$1({rawHTML:r,imageUrl:o},i&&{altText:i}))}},hr:function(e,t,r){e.addNode(e.schema.nodes.thematicBreak,{rawHTML:r})},br:function(e,t){var r=e.schema.nodes.paragraph;var n=t.parent,a=t.prev,o=t.next;if("paragraph"===(null===n||void 0===n?void 0:n.type)){isSoftbreak(a)&&e.openNode(r);if(isSoftbreak(o))e.closeNode();else if(o){e.closeNode();e.openNode(r)}}else if("tableCell"===(null===n||void 0===n?void 0:n.type)){a&&(isInlineNode(a)||isCustomHTMLInlineNode(e,a))&&e.closeNode();o&&(isInlineNode(o)||isCustomHTMLInlineNode(e,o))&&e.openNode(r)}},pre:function(e,t,r){var n,a;var o=document.createElement("div");o.innerHTML=t.literal;var i=null===(a=null===(n=o.firstChild)||void 0===n?void 0:n.firstChild)||void 0===a?void 0:a.textContent;e.openNode(e.schema.nodes.codeBlock,{rawHTML:r});e.addText(getTextWithoutTrailingNewline(i));e.closeNode()},"ul, ol":function(e,t,r){if("tableCell"===t.parent.type){var n=e.schema.nodes,a=n.bulletList,o=n.orderedList,i=n.paragraph;var s="ul"===r?a:o;if(r){t.prev&&!isListNode(t.prev)&&e.closeNode();e.openNode(s,{rawHTML:r})}else{e.closeNode();t.next&&!isListNode(t.next)&&e.openNode(i)}}},li:function(e,t,r){var n;if("tableCell"===(null===(n=t.parent)||void 0===n?void 0:n.type)){var a=e.schema.nodes,o=a.listItem,i=a.paragraph;if(r){var s=getListItemAttrs(t);t.prev&&!isListNode(t.prev)&&e.closeNode();e.openNode(o,__assign$1({rawHTML:r},s));t.next&&!isListNode(t.next)&&e.openNode(i)}else{t.prev&&!isListNode(t.prev)&&e.closeNode();e.closeNode()}}}};var VX=createConvertors(zX);function isBRTag(e){return"htmlInline"===e.type&&ut.test(e.literal)}function addRawHTMLAttributeToDOM(e){$e(e.childNodes).forEach((function(e){if(isElemNode(e)){var t=e.nodeName.toLowerCase();e.setAttribute("data-raw-html",t);e.childNodes&&addRawHTMLAttributeToDOM(e)}}))}var GX={text:function(e,t){e.addText(t.literal||"")},paragraph:function(e,t,r,n){var a;var o=r.entering;if(o){var i=e.schema.nodes.paragraph;if("paragraph"===(null===(a=t.prev)||void 0===a?void 0:a.type)){e.openNode(i,n);e.closeNode()}e.openNode(i,n)}else e.closeNode()},heading:function(e,t,r,n){var a=r.entering;if(a){var o=t,i=o.level,s=o.headingType;e.openNode(e.schema.nodes.heading,__assign$1({level:i,headingType:s},n))}else e.closeNode()},codeBlock:function(e,t,r){var n=e.schema.nodes.codeBlock;var a=t,o=a.info,i=a.literal;e.openNode(n,__assign$1({language:o},r));e.addText(getTextWithoutTrailingNewline(i||""));e.closeNode()},list:function(e,t,r,n){var a=r.entering;if(a){var o=e.schema.nodes,i=o.bulletList,s=o.orderedList;var l=t.listData,u=l.type,d=l.start;"bullet"===u?e.openNode(i,n):e.openNode(s,__assign$1({order:d},n))}else e.closeNode()},item:function(e,t,r,n){var a=r.entering;var o=e.schema.nodes.listItem;var i=t.listData,s=i.task,l=i.checked;if(a){var u=__assign$1(__assign$1(__assign$1({},s&&{task:s}),l&&{checked:l}),n);e.openNode(o,u)}else e.closeNode()},blockQuote:function(e,t,r,n){var a=r.entering;a?e.openNode(e.schema.nodes.blockQuote,n):e.closeNode()},image:function(e,t,r,n){var a=r.entering,o=r.skipChildren;var i=e.schema.nodes.image;var s=t,l=s.destination,u=s.firstChild;a&&o&&o();e.addNode(i,__assign$1(__assign$1({imageUrl:l},u&&{altText:u.literal}),n))},thematicBreak:function(e,t,r,n){e.addNode(e.schema.nodes.thematicBreak,n)},strong:function(e,t,r,n){var a=r.entering;var o=e.schema.marks.strong;a?e.openMark(o.create(n)):e.closeMark(o)},emph:function(e,t,r,n){var a=r.entering;var o=e.schema.marks.emph;a?e.openMark(o.create(n)):e.closeMark(o)},link:function(e,t,r,n){var a=r.entering;var o=e.schema.marks.link;var i=t,s=i.destination,l=i.title;if(a){var u=__assign$1({linkUrl:s,title:l},n);e.openMark(o.create(u))}else e.closeMark(o)},softbreak:function(e,t){if("paragraph"===t.parent.type){var r=t.prev,n=t.next;r&&!isBRTag(r)&&e.closeNode();n&&!isBRTag(n)&&e.openNode(e.schema.nodes.paragraph)}},table:function(e,t,r,n){var a=r.entering;a?e.openNode(e.schema.nodes.table,n):e.closeNode()},tableHead:function(e,t,r,n){var a=r.entering;a?e.openNode(e.schema.nodes.tableHead,n):e.closeNode()},tableBody:function(e,t,r,n){var a=r.entering;a?e.openNode(e.schema.nodes.tableBody,n):e.closeNode()},tableRow:function(e,t,r,n){var a=r.entering;a?e.openNode(e.schema.nodes.tableRow,n):e.closeNode()},tableCell:function(e,t,r){var n=r.entering;if(!t.ignored){var hasParaNode=function(t){return t&&(isInlineNode(t)||isCustomHTMLInlineNode(e,t))};if(n){var a=e.schema.nodes,o=a.tableHeadCell,i=a.tableBodyCell,s=a.paragraph;var l=t.parent.parent;var u="tableHead"===l.type?o:i;var d=l.parent;var v=(d.columns[t.startIdx]||{}).align;var p=__assign$1({},t.attrs);v&&(p.align=v);e.openNode(u,p);hasParaNode(t.firstChild)&&e.openNode(s)}else{hasParaNode(t.lastChild)&&e.closeNode();e.closeNode()}}},strike:function(e,t,r,n){var a=r.entering;var o=e.schema.marks.strike;a?e.openMark(o.create(n)):e.closeMark(o)},code:function(e,t,r,n){var a=e.schema.marks.code;e.openMark(a.create(n));e.addText(getTextWithoutTrailingNewline(t.literal||""));e.closeMark(a)},customBlock:function(e,t){var r=e.schema.nodes,n=r.customBlock,a=r.paragraph;var o=t,i=o.info,s=o.literal;e.openNode(n,{info:i});e.addText(getTextWithoutTrailingNewline(s||""));e.closeNode();if(!t.next){e.openNode(a);e.closeNode()}},frontMatter:function(e,t){e.openNode(e.schema.nodes.frontMatter);e.addText(t.literal);e.closeNode()},htmlInline:function(e,t){var r=t.literal;var n=r.match(lt);var a=n[1],o=n[3];var i=(a||o).toLowerCase();var s=e.schema.marks[i];var l=sanitizeHTML(r);if(null===s||void 0===s?void 0:s.spec.attrs.htmlInline)if(a){var u=getHTMLAttrsByHTMLString(l);e.openMark(s.create({htmlAttrs:u}))}else e.closeMark(s);else{var d=VX[i];d&&d(e,t,a)}},htmlBlock:function(e,t){var r=t.literal;var n=document.createElement("div");var a=ct.test(r);if(a){e.openNode(e.schema.nodes.htmlComment);e.addText(t.literal);e.closeNode()}else{var o=r.match(lt);var i=o[1],s=o[3];var l=(i||s).toLowerCase();var u=e.schema.nodes[l];var d=sanitizeHTML(r);if(null===u||void 0===u?void 0:u.spec.attrs.htmlBlock){var v=getHTMLAttrsByHTMLString(d);var p=getChildrenHTML(t,l);e.addNode(u,{htmlAttrs:v,childrenHTML:p})}else{n.innerHTML=d;addRawHTMLAttributeToDOM(n);e.convertByDOMParser(n)}}},customInline:function(e,t,r){var n=r.entering,a=r.skipChildren;var o=t,i=o.info,s=o.firstChild;var l=e.schema;if(-1!==i.indexOf("widget")&&n){var u=getWidgetContent(t);a();e.addNode(l.nodes.widget,{info:i},[l.text(createWidgetContent(i,u))])}else{var d="$$";n&&(d+=s?i+" ":i);e.addText(d)}}};function createWwConvertors(e){var t=Object.keys(e);var r=__assign$1({},GX);var n=new NG({gfm:true,nodeId:true,convertors:e});var a=n.getConvertors();t.forEach((function(t){var n=GX[t];n&&!includes(["htmlBlock","htmlInline"],t)&&(r[t]=function(r,o,i){i.origin=function(){return a[t](o,i,a)};var s=e[t](o,i);var l;if(s){var u=Array.isArray(s)?s[0]:s,d=u.attributes,v=u.classNames;l={htmlAttrs:d,classNames:v}}n(r,o,i,l)})}));return r}function mergeMarkText(e,t){return!!(e.isText&&t.isText&&a.sameSet(e.marks,t.marks))&&e.withText(e.text+t.text)}var QX=function(){function ToWwConvertorState(e,t){this.schema=e;this.convertors=t;this.stack=[{type:this.schema.topNodeType,attrs:null,content:[]}];this.marks=a.none}ToWwConvertorState.prototype.top=function(){return last$1(this.stack)};ToWwConvertorState.prototype.push=function(e){this.stack.length&&this.top().content.push(e)};ToWwConvertorState.prototype.addText=function(e){if(e){var t=this.top().content;var r=last$1(t);var n=this.schema.text(e,this.marks);var a=r&&mergeMarkText(r,n);a?t[t.length-1]=a:t.push(n)}};ToWwConvertorState.prototype.openMark=function(e){this.marks=e.addToSet(this.marks)};ToWwConvertorState.prototype.closeMark=function(e){this.marks=e.removeFromSet(this.marks)};ToWwConvertorState.prototype.addNode=function(e,t,r){var n=e.createAndFill(t,r,this.marks);if(n){this.push(n);return n}return null};ToWwConvertorState.prototype.openNode=function(e,t){this.stack.push({type:e,attrs:t,content:[]})};ToWwConvertorState.prototype.closeNode=function(){this.marks.length&&(this.marks=a.none);var e=this.stack.pop(),t=e.type,r=e.attrs,n=e.content;return this.addNode(t,r,n)};ToWwConvertorState.prototype.convertByDOMParser=function(e){var t=this;var r=o.fromSchema(this.schema).parse(e);r.content.forEach((function(e){return t.push(e)}))};ToWwConvertorState.prototype.closeUnmatchedHTMLInline=function(e,t){var r;if(!t&&"htmlInline"!==e.type){var n=this.stack.length-1;for(var a=n;a>=0;a-=1){var o=this.stack[a];if(!(null===(r=o.attrs)||void 0===r?void 0:r.rawHTML))break;o.content.length?this.closeNode():this.stack.pop()}}};ToWwConvertorState.prototype.convert=function(e,t){var r=e.walker();var n=r.next();var _loop_1=function(){var e=n.node,o=n.entering;var i=a.convertors[e.type];var s=false;if(i){var l={entering:o,leaf:!isContainer$2(e),getChildrenText:getChildrenText$1,options:{gfm:true,nodeId:false,tagFilter:false,softbreak:"\n"},skipChildren:function(){s=true}};a.closeUnmatchedHTMLInline(e,o);i(a,e,l);if((null===t||void 0===t?void 0:t.node)===e){var u=a.stack.reduce((function(e,t){return e+t.content.reduce((function(e,t){return e+t.nodeSize}),0)}),0)+1;t.setMappedPos(u)}}if(s){r.resumeAt(e,false);r.next()}n=r.next()};var a=this;while(n)_loop_1()};ToWwConvertorState.prototype.convertNode=function(e,t){this.convert(e,t);return this.stack.length?this.closeNode():null};return ToWwConvertorState}();function convertToRawHTMLHavingInlines(e,t,r){var n=r[0],a=r[1];e.write(n);e.convertInline(t);e.write(a)}function convertToRawHTMLHavingBlocks(e,t,r){var n=t.node,a=t.parent;var o=r[0],i=r[1];e.stopNewline=true;e.write(o);e.convertNode(n);e.write(i);if("doc"===(null===a||void 0===a?void 0:a.type.name)){e.closeBlock(n);e.stopNewline=false}}function createTableHeadDelim(e,t){var r=e.length;var n="";var a="";if("left"===t){n=":";r-=1}else if("right"===t){a=":";r-=1}else if("center"===t){n=":";a=":";r-=2}return""+n+repeat$1("-",Math.max(r,3))+a}var XX={text:function(e,t){var r;var n=t.node;var a=null!==(r=n.text)&&void 0!==r?r:"";(n.marks||[]).some((function(e){return"link"===e.type.name}))?e.text(escapeTextForLink(a),false):e.text(a)},paragraph:function(e,t){var r=t.node,n=t.parent,a=t.index,o=void 0===a?0:a;if(e.stopNewline)e.convertInline(r);else{var i=0===o;var s=!i&&n.child(o-1);var l=s&&0===s.childCount;var u=o<n.childCount-1&&n.child(o+1);var d=u&&"paragraph"===u.type.name;var v=0===r.childCount;if(v&&l)e.write("<br>\n");else if(!v||l||i){e.convertInline(r);d?e.write("\n"):e.closeBlock(r)}else{if("listItem"===(null===n||void 0===n?void 0:n.type.name)){var p=e.getDelim();e.setDelim("");e.write("<br>");e.setDelim(p)}e.write("\n")}}},heading:function(e,t,r){var n=t.node;var a=r.delim;var o=n.attrs.headingType;if("atx"===o){e.write(a+" ");e.convertInline(n);e.closeBlock(n)}else{e.convertInline(n);e.ensureNewLine();e.write(a);e.closeBlock(n)}},codeBlock:function(e,t,r){var n=t.node;var a=r.delim,o=r.text;var i=a,s=i[0],l=i[1];e.write(s);e.ensureNewLine();e.text(o,false);e.ensureNewLine();e.write(l);e.closeBlock(n)},blockQuote:function(e,t,r){var n=t.node,a=t.parent;var o=r.delim;(null===a||void 0===a?void 0:a.type.name)===n.type.name&&e.flushClose(1);e.wrapBlock(o,null,n,(function(){return e.convertNode(n)}))},bulletList:function(e,t,r){var n=t.node;var a=r.delim;e.convertList(n,repeat$1(" ",4),(function(){return a+" "}))},orderedList:function(e,t){var r=t.node;var n=r.attrs.order||1;e.convertList(r,repeat$1(" ",4),(function(e){var t=String(n+e);return t+". "}))},listItem:function(e,t){var r=t.node;var n=r.attrs,a=n.task,o=n.checked;a&&e.write("["+(o?"x":" ")+"] ");e.convertNode(r)},image:function(e,t,r){var n=r.attrs;e.write("!["+(null===n||void 0===n?void 0:n.altText)+"]("+(null===n||void 0===n?void 0:n.imageUrl)+")")},thematicBreak:function(e,t,r){var n=t.node;var a=r.delim;e.write(a);e.closeBlock(n)},table:function(e,t){var r=t.node;e.convertNode(r);e.closeBlock(r)},tableHead:function(e,t,r){var n=t.node;var a=r.delim;var o=n.firstChild;e.convertNode(n);var i=null!==a&&void 0!==a?a:"";!a&&o&&o.forEach((function(e){var t=e.textContent,r=e.attrs;var n=createTableHeadDelim(t,r.align);i+="| "+n+" "}));e.write(i+"|");e.ensureNewLine()},tableBody:function(e,t){var r=t.node;e.convertNode(r)},tableRow:function(e,t){var r=t.node;e.convertNode(r);e.write("|");e.ensureNewLine()},tableHeadCell:function(e,t,r){var n=t.node;var a=r.delim,o=void 0===a?"| ":a;e.write(o);e.convertTableCell(n);e.write(" ")},tableBodyCell:function(e,t,r){var n=t.node;var a=r.delim,o=void 0===a?"| ":a;e.write(o);e.convertTableCell(n);e.write(" ")},customBlock:function(e,t,r){var n=t.node;var a=r.delim,o=r.text;var i=a,s=i[0],l=i[1];e.write(s);e.ensureNewLine();e.text(o,false);e.ensureNewLine();e.write(l);e.closeBlock(n)},frontMatter:function(e,t,r){var n=t.node;var a=r.text;e.text(a,false);e.closeBlock(n)},widget:function(e,t,r){var n=r.text;e.write(n)},html:function(e,t,r){var n=t.node;var a=r.text;e.write(a);n.attrs.htmlBlock&&e.closeBlock(n)},htmlComment:function(e,t,r){var n=t.node;var a=r.text;e.write(a);e.closeBlock(n)}};function write(e,t){var r=t.state,n=t.nodeInfo,a=t.params;var o=a.rawHTML;o?te(e,["heading","codeBlock"])>-1?convertToRawHTMLHavingInlines(r,n.node,o):te(e,["image","thematicBreak"])>-1?r.write(o):convertToRawHTMLHavingBlocks(r,n,o):XX[e](r,n,a)}function addBackticks(e,t){var r=e.text;var n=/`+/g;var a=0;if(e.isText&&r){var o=n.exec(r);while(o){a=Math.max(a,o[0].length);o=n.exec(r)}}var i=a>0&&t>0?" `":"`";for(var s=0;s<a;s+=1)i+="`";a>0&&t<0&&(i+=" ");return i}function getPairRawHTML(e){return e?["<"+e+">","</"+e+">"]:null}function getOpenRawHTML(e){return e?"<"+e+">":null}function getCloseRawHTML(e){return e?"</"+e+">":null}var ZX={heading:function(e){var t=e.node;var r=t.attrs;var n=r.level;var a=repeat$1("#",n);"setext"===r.headingType&&(a=1===n?"===":"---");return{delim:a,rawHTML:getPairRawHTML(r.rawHTML)}},codeBlock:function(e){var t=e.node;var r=t,n=r.attrs,a=r.textContent;return{delim:["```"+(n.language||""),"```"],rawHTML:getPairRawHTML(n.rawHTML),text:a}},blockQuote:function(e){var t=e.node;return{delim:"> ",rawHTML:getPairRawHTML(t.attrs.rawHTML)}},bulletList:function(e,t){var r=e.node;var n=t.inTable;var a=r.attrs.rawHTML;n&&(a=a||"ul");return{delim:"*",rawHTML:getPairRawHTML(a)}},orderedList:function(e,t){var r=e.node;var n=t.inTable;var a=r.attrs.rawHTML;n&&(a=a||"ol");return{rawHTML:getPairRawHTML(a)}},listItem:function(e,t){var r=e.node;var n=t.inTable;var a=r.attrs,o=a.task,i=a.checked;var s=r.attrs.rawHTML;n&&(s=s||"li");var l=o?' class="task-list-item'+(i?" checked":"")+'"':"";var u=o?" data-task"+(i?" data-task-checked":""):"";return{rawHTML:s?["<"+s+l+u+">","</"+s+">"]:null}},table:function(e){var t=e.node;return{rawHTML:getPairRawHTML(t.attrs.rawHTML)}},tableHead:function(e){var t=e.node;return{rawHTML:getPairRawHTML(t.attrs.rawHTML)}},tableBody:function(e){var t=e.node;return{rawHTML:getPairRawHTML(t.attrs.rawHTML)}},tableRow:function(e){var t=e.node;return{rawHTML:getPairRawHTML(t.attrs.rawHTML)}},tableHeadCell:function(e){var t=e.node;return{rawHTML:getPairRawHTML(t.attrs.rawHTML)}},tableBodyCell:function(e){var t=e.node;return{rawHTML:getPairRawHTML(t.attrs.rawHTML)}},image:function(e){var t=e.node;var r=t.attrs;var n=r.rawHTML,a=r.altText;var o=r.imageUrl.replace(/&amp;/g,"&");var i=a?' alt="'+escapeXml$1(a)+'"':"";return{rawHTML:n?"<"+n+' src="'+escapeXml$1(o)+'"'+i+">":null,attrs:{altText:escapeTextForLink(a||""),imageUrl:o}}},thematicBreak:function(e){var t=e.node;return{delim:"***",rawHTML:getOpenRawHTML(t.attrs.rawHTML)}},customBlock:function(e){var t=e.node;var r=t,n=r.attrs,a=r.textContent;return{delim:["$$"+n.info,"$$"],text:a}},frontMatter:function(e){var t=e.node;return{text:t.textContent}},widget:function(e){var t=e.node;return{text:t.textContent}},strong:function(e,t){var r=e.node;var n=t.entering;var a=r.attrs.rawHTML;return{delim:"**",rawHTML:n?getOpenRawHTML(a):getCloseRawHTML(a)}},emph:function(e,t){var r=e.node;var n=t.entering;var a=r.attrs.rawHTML;return{delim:"*",rawHTML:n?getOpenRawHTML(a):getCloseRawHTML(a)}},strike:function(e,t){var r=e.node;var n=t.entering;var a=r.attrs.rawHTML;return{delim:"~~",rawHTML:n?getOpenRawHTML(a):getCloseRawHTML(a)}},link:function(e,t){var r=e.node;var n=t.entering;var a=r.attrs;var o=a.title,i=a.rawHTML;var s=a.linkUrl.replace(/&amp;/g,"&");var l=o?' title="'+escapeXml$1(o)+'"':"";return n?{delim:"[",rawHTML:i?"<"+i+' href="'+escapeXml$1(s)+'"'+l+">":null}:{delim:"]("+s+(o?" "+quote(escapeTextForLink(o)):"")+")",rawHTML:getCloseRawHTML(i)}},code:function(e,t){var r=e.node,n=e.parent,a=e.index,o=void 0===a?0:a;var i=t.entering;var s=i?addBackticks(n.child(o),-1):addBackticks(n.child(o-1),1);var l=i?getOpenRawHTML(r.attrs.rawHTML):getCloseRawHTML(r.attrs.rawHTML);return{delim:s,rawHTML:l}},htmlComment:function(e){var t=e.node;return{text:t.textContent}},html:function(e,t){var r=e.node;var n=t.entering;var a=r.type.name;var o=r.attrs.htmlAttrs;var i="<"+a;var s="</"+a+">";Object.keys(o).forEach((function(e){i+=" "+e+'="'+o[e].replace(/"/g,"'")+'"'}));i+=">";return r.attrs.htmlInline?{rawHTML:n?i:s}:{text:""+i+r.attrs.childrenHTML+s}}};var KX={strong:{mixable:true,removedEnclosingWhitespace:true},emph:{mixable:true,removedEnclosingWhitespace:true},strike:{mixable:true,removedEnclosingWhitespace:true},code:{escape:false},link:null,html:null};function createNodeTypeConvertors(e){var t={};var r=Object.keys(XX);r.forEach((function(r){t[r]=function(t,n){var a=XX[r];if(a){var o=e[r];var i=o?o(n,{inTable:t.inTable}):{};write(r,{state:t,nodeInfo:n,params:i})}}}));return t}function createMarkTypeConvertors(e){var t={};var r=Object.keys(KX);r.forEach((function(r){t[r]=function(t,n){var a=KX[r];var o=e[r];var i=o&&t&&!re(n);var s=i?o(t,{entering:n}):{};return __assign$1(__assign$1({},s),a)}}));return t}function createMdConvertors(e){var t=Object.keys(e);t.forEach((function(t){var r=ZX[t];var n=e[t];ZX[t]=r?function(e,t){t.origin=function(){return r(e,t)};return n(e,t)}:n;delete e[t]}));var r=createNodeTypeConvertors(ZX);var n=createMarkTypeConvertors(ZX);return{nodeTypeConvertors:r,markTypeConvertors:n}}var YX=function(){function ToMdConvertorState(e){var t=e.nodeTypeConvertors,r=e.markTypeConvertors;this.nodeTypeConvertors=t;this.markTypeConvertors=r;this.delim="";this.result="";this.closed=false;this.tightList=false;this.stopNewline=false;this.inTable=false}ToMdConvertorState.prototype.getMarkConvertor=function(e){var t=e.attrs.htmlInline?"html":e.type.name;return this.markTypeConvertors[t]};ToMdConvertorState.prototype.isInBlank=function(){return/(^|\n)$/.test(this.result)};ToMdConvertorState.prototype.markText=function(e,t,r,n){var a=this.getMarkConvertor(e);if(a){var o=a({node:e,parent:r,index:n},t),i=o.delim,s=o.rawHTML;return s||i}return""};ToMdConvertorState.prototype.setDelim=function(e){this.delim=e};ToMdConvertorState.prototype.getDelim=function(){return this.delim};ToMdConvertorState.prototype.flushClose=function(e){if(!this.stopNewline&&this.closed){this.isInBlank()||(this.result+="\n");e||(e=2);if(e>1){var t=this.delim;var r=/\s+$/.exec(t);r&&(t=t.slice(0,t.length-r[0].length));for(var n=1;n<e;n+=1)this.result+=t+"\n"}this.closed=false}};ToMdConvertorState.prototype.wrapBlock=function(e,t,r,n){var a=this.getDelim();this.write(t||e);this.setDelim(this.getDelim()+e);n();this.setDelim(a);this.closeBlock(r)};ToMdConvertorState.prototype.ensureNewLine=function(){this.isInBlank()||(this.result+="\n")};ToMdConvertorState.prototype.write=function(e){void 0===e&&(e="");this.flushClose();this.delim&&this.isInBlank()&&(this.result+=this.delim);e&&(this.result+=e)};ToMdConvertorState.prototype.closeBlock=function(e){this.closed=e};ToMdConvertorState.prototype.text=function(e,t){void 0===t&&(t=true);var r=e.split("\n");for(var n=0;n<r.length;n+=1){this.write();this.result+=t?escape$1(r[n]):r[n];n!==r.length-1&&(this.result+="\n")}};ToMdConvertorState.prototype.convertBlock=function(e,t,r){var n=e.type.name;var a=this.nodeTypeConvertors[n];var o={node:e,parent:t,index:r};e.attrs.htmlBlock?this.nodeTypeConvertors.html(this,o):a&&a(this,o)};ToMdConvertorState.prototype.convertInline=function(e){var t=this;var r=[];var n="";var progress=function(a,o,i){var s=a?a.marks:[];var l=n;n="";var u=a&&a.isText&&s.some((function(e){var r=t.getMarkConvertor(e);var n=r&&r();return n&&n.removedEnclosingWhitespace}));if(u&&a&&a.text){var d=/^(\s*)(.*?)(\s*)$/m.exec(a.text),v=d[1],p=d[2],f=d[3];l+=v;n=f;if(v||f){a=p?a.withText(p):null;a||(s=r)}}var m=s.length&&last$1(s);var g=m&&t.getMarkConvertor(m);var y=g&&g();var b=y&&false===y.escape;var w=s.length-(b?1:0);for(var T=0;T<w;T+=1){p=s[T];if(y&&!y.mixable)break;for(var C=0;C<r.length;C+=1){var k=r[C];if(y&&!y.mixable)break;if(p.eq(k)){T>C?s=s.slice(0,C).concat(p).concat(s.slice(C,T)).concat(s.slice(T+1,w)):C>T&&(s=s.slice(0,T).concat(s.slice(T+1,C)).concat(p).concat(s.slice(C,w)));break}}}var x=0;while(x<Math.min(r.length,w)&&s[x].eq(r[x]))x+=1;while(x<r.length){var M=r.pop();M&&t.text(t.markText(M,false,e,i),false)}l&&t.text(l);if(a){while(r.length<w){p=s[r.length];r.push(p);t.text(t.markText(p,true,e,i),false)}b&&a.isText?t.text(t.markText(m,true,e,i)+a.text+t.markText(m,false,e,i+1),false):t.convertBlock(a,e,i)}};e.forEach(progress);progress(null,null,e.childCount)};ToMdConvertorState.prototype.convertList=function(e,t,r){var n=this;var a;this.closed&&this.closed.type===e.type?this.flushClose(3):this.tightList&&this.flushClose(1);var o=null===(a=e.attrs.tight)||void 0===a||a;var i=this.tightList;this.tightList=o;e.forEach((function(a,i,s){s&&o&&n.flushClose(1);n.wrapBlock(t,r(s),e,(function(){return n.convertBlock(a,e,s)}))}));this.tightList=i};ToMdConvertorState.prototype.convertTableCell=function(e){var t=this;this.stopNewline=true;this.inTable=true;e.forEach((function(r,n,a){if(includes(["bulletList","orderedList"],r.type.name)){t.convertBlock(r,e,a);t.closed=false}else{t.convertInline(r);if(a<e.childCount-1){var o=e.child(a+1);"paragraph"===o.type.name&&t.write("<br>")}}}));this.stopNewline=false;this.inTable=false};ToMdConvertorState.prototype.convertNode=function(e,t){var r=this;e.forEach((function(n,a,o){r.convertBlock(n,e,o);if((null===t||void 0===t?void 0:t.node)===n){var i=r.result.split("\n");t.setMappedPos([i.length,last$1(i).length+1])}}));return this.result};return ToMdConvertorState}();var JX=function(){function Convertor(e,t,r,n){var a=this;this.setMappedPos=function(e){a.mappedPosWhenConverting=e};this.schema=e;this.eventEmitter=n;this.focusedNode=null;this.mappedPosWhenConverting=null;this.toWwConvertors=createWwConvertors(r);this.toMdConvertors=createMdConvertors(t||{});this.eventEmitter.listen("setFocusedNode",(function(e){return a.focusedNode=e}))}Convertor.prototype.getMappedPos=function(){return this.mappedPosWhenConverting};Convertor.prototype.getInfoForPosSync=function(){return{node:this.focusedNode,setMappedPos:this.setMappedPos}};Convertor.prototype.toWysiwygModel=function(e){var t=new QX(this.schema,this.toWwConvertors);return t.convertNode(e,this.getInfoForPosSync())};Convertor.prototype.toMarkdownText=function(e){var t=new YX(this.toMdConvertors);var r=t.convertNode(e,this.getInfoForPosSync());r=this.eventEmitter.emitReduce("beforeConvertWysiwygToMarkdown",r);return r};return Convertor}();function execPlugin(t){var r=t.plugin,n=t.eventEmitter,a=t.usageStatistics,o=t.instance;var i={Plugin:g,PluginKey:y,Selection:T,TextSelection:m};var u={Decoration:l,DecorationSet:s};var d={Fragment:e};var v={InputRule:B,inputRules:R,undoInputRule:H};var p={keymap:x};var f={eventEmitter:n,usageStatistics:a,instance:o,pmState:i,pmView:u,pmModel:d,pmRules:v,pmKeymap:p,i18n:_Q};if(z(r)){var b=r[0],w=r[1],C=void 0===w?{}:w;return b(f,C)}return r(f)}function getPluginInfo(e){var t=e.plugins,r=e.eventEmitter,n=e.usageStatistics,a=e.instance;r.listen("mixinTableOffsetMapPrototype",mixinTableOffsetMapPrototype);return(null!==t&&void 0!==t?t:[]).reduce((function(e,t){var o=execPlugin({plugin:t,eventEmitter:r,usageStatistics:n,instance:a});if(!o)throw new Error("The return value of the executed plugin is empty.");var i=o.markdownParsers,s=o.toHTMLRenderers,l=o.toMarkdownRenderers,u=o.markdownPlugins,d=o.wysiwygPlugins,v=o.wysiwygNodeViews,p=o.markdownCommands,f=o.wysiwygCommands,m=o.toolbarItems;s&&(e.toHTMLRenderers=deepMergedCopy(e.toHTMLRenderers,s));l&&(e.toMarkdownRenderers=deepMergedCopy(e.toMarkdownRenderers,l));u&&(e.mdPlugins=e.mdPlugins.concat(u));d&&(e.wwPlugins=e.wwPlugins.concat(d));v&&(e.wwNodeViews=__assign$1(__assign$1({},e.wwNodeViews),v));p&&(e.mdCommands=__assign$1(__assign$1({},e.mdCommands),p));f&&(e.wwCommands=__assign$1(__assign$1({},e.wwCommands),f));m&&(e.toolbarItems=e.toolbarItems.concat(m));i&&(e.markdownParsers=__assign$1(__assign$1({},e.markdownParsers),i));return e}),{toHTMLRenderers:{},toMarkdownRenderers:{},mdPlugins:[],wwPlugins:[],wwNodeViews:{},mdCommands:{},wwCommands:{},toolbarItems:[],markdownParsers:{}})}var eZ="data-task";var tZ="data-task-disabled";var rZ="checked";function registerHTMLTagToWhitelist(e){["htmlBlock","htmlInline"].forEach((function(t){e[t]&&Object.keys(e[t]).forEach((function(e){return registerTagWhitelistIfPossible(e)}))}))}
/**
 * Class ToastUIEditorViewer
 * @param {object} options Option object
 *     @param {HTMLElement} options.el - container element
 *     @param {string} [options.initialValue] Editor's initial value
 *     @param {Object} [options.events] - Events
 *         @param {function} [options.events.load] - It would be emitted when editor fully load
 *         @param {function} [options.events.change] - It would be emitted when content changed
 *         @param {function} [options.events.caretChange] - It would be emitted when format change by cursor position
 *         @param {function} [options.events.focus] - It would be emitted when editor get focus
 *         @param {function} [options.events.blur] - It would be emitted when editor loose focus
 *     @param {Array.<function|Array>} [options.plugins] - Array of plugins. A plugin can be either a function or an array in the form of [function, options].
 *     @param {Object} [options.extendedAutolinks] - Using extended Autolinks specified in GFM spec
 *     @param {Object} [options.linkAttributes] - Attributes of anchor element that should be rel, target, hreflang, type
 *     @param {Object} [options.customHTMLRenderer=null] - Object containing custom renderer functions correspond to change markdown node to preview HTML or wysiwyg node
 *     @param {boolean} [options.referenceDefinition=false] - whether use the specification of link reference definition
 *     @param {function} [options.customHTMLSanitizer=null] - custom HTML sanitizer
 *     @param {boolean} [options.frontMatter=false] - whether use the front matter
 *     @param {string} [options.theme] - The theme to style the viewer with. The default is included in toastui-editor.css.
 */var nZ=function(){function ToastUIEditorViewer(e){var t=this;this.options=W({linkAttributes:null,extendedAutolinks:false,customHTMLRenderer:null,referenceDefinition:false,customHTMLSanitizer:null,frontMatter:false,usageStatistics:true,theme:"light"},e);this.eventEmitter=new WX;var r=sanitizeLinkAttribute(this.options.linkAttributes);var n=getPluginInfo({plugins:this.options.plugins,eventEmitter:this.eventEmitter,usageStatistics:this.options.usageStatistics,instance:this})||{},a=n.toHTMLRenderers,o=n.markdownParsers;var i=this.options,s=i.customHTMLRenderer,l=i.extendedAutolinks,u=i.referenceDefinition,d=i.frontMatter,v=i.customHTMLSanitizer;var p={linkAttributes:r,customHTMLRenderer:__assign$1(__assign$1({},a),s),extendedAutolinks:l,referenceDefinition:u,frontMatter:d,sanitizer:v||sanitizeHTML};registerHTMLTagToWhitelist(p.customHTMLRenderer);this.options.events&&U(this.options.events,(function(e,r){t.on(r,e)}));var f=this.options,m=f.el,g=f.initialValue,y=f.theme;var b=m.innerHTML;"light"!==y&&m.classList.add(cls(y));m.innerHTML="";this.toastMark=new CG("",{disallowedHtmlBlockTags:["br","img"],extendedAutolinks:l,referenceDefinition:u,disallowDeepHeading:true,frontMatter:d,customParser:o});this.preview=new LQ(this.eventEmitter,__assign$1(__assign$1({},p),{isViewer:true}));Xr(this.preview.previewContent,"mousedown",this.toggleTask.bind(this));g?this.setMarkdown(g):b&&this.preview.setHTML(b);m.appendChild(this.preview.previewContent);this.eventEmitter.emit("load",this)}
/**
     * Toggle task by detecting mousedown event.
     * @param {MouseEvent} ev - event
     * @private
     */ToastUIEditorViewer.prototype.toggleTask=function(e){var t=e.target;var r=getComputedStyle(t,":before");if(!t.hasAttribute(tZ)&&t.hasAttribute(eZ)&&isPositionInBox(r,e.offsetX,e.offsetY)){toggleClass(t,rZ);this.eventEmitter.emit("change",{source:"viewer",date:e})}};
/**
     * Set content for preview
     * @param {string} markdown Markdown text
     */ToastUIEditorViewer.prototype.setMarkdown=function(e){var t=this.toastMark.getLineTexts();var r=t.length;var n=last$1(t);var a=[r,n.length+1];var o=this.toastMark.editMarkdown([1,1],a,e||"");this.eventEmitter.emit("updatePreview",o)};
/**
     * Bind eventHandler to event type
     * @param {string} type Event type
     * @param {function} handler Event handler
     */ToastUIEditorViewer.prototype.on=function(e,t){this.eventEmitter.listen(e,t)};
/**
     * Unbind eventHandler from event type
     * @param {string} type Event type
     */ToastUIEditorViewer.prototype.off=function(e){this.eventEmitter.removeEventHandler(e)};
/**
     * Add hook to TUIEditor event
     * @param {string} type Event type
     * @param {function} handler Event handler
     */ToastUIEditorViewer.prototype.addHook=function(e,t){this.eventEmitter.removeEventHandler(e);this.eventEmitter.listen(e,t)};ToastUIEditorViewer.prototype.destroy=function(){zr(this.preview.el,"mousedown",this.toggleTask.bind(this));this.preview.destroy();this.eventEmitter.emit("destroy")};
/**
     * Return true
     * @returns {boolean}
     */ToastUIEditorViewer.prototype.isViewer=function(){return true};
/**
     * Return false
     * @returns {boolean}
     */ToastUIEditorViewer.prototype.isMarkdownMode=function(){return false};
/**
     * Return false
     * @returns {boolean}
     */ToastUIEditorViewer.prototype.isWysiwygMode=function(){return false};return ToastUIEditorViewer}();function isPmNode(e){return e instanceof i}function isContainer(e){var t=["document","blockQuote","bulletList","orderedList","listItem","paragraph","heading","emph","strong","strike","link","image","table","tableHead","tableBody","tableRow","tableHeadCell","tableBodyCell"];return includes(t,e)}function createMdLikeNode(e){var t=e.attrs,r=e.type;var n=r.name;var a={type:n,wysiwygNode:true,literal:!isContainer(n)&&isPmNode(e)?e.textContent:null};var o={heading:{level:t.level},link:{destination:t.linkUrl,title:t.title},image:{destination:t.imageUrl},codeBlock:{info:t.language},bulletList:{type:"list",listData:{type:"bullet"}},orderedList:{type:"list",listData:{type:"ordered",start:t.order}},listItem:{type:"item",listData:{task:t.task,checked:t.checked}},tableHeadCell:{type:"tableCell",cellType:"head",align:t.align},tableBodyCell:{type:"tableCell",cellType:"body",align:t.align},customBlock:{info:t.info}};var i=o[n];var s=__assign$1(__assign$1({},a),i);var l=e.attrs,u=l.htmlAttrs,d=l.childrenHTML;return u?__assign$1(__assign$1({},s),{attrs:u,childrenHTML:d}):s}var aZ={openTag:function(e,t){var r=e,n=r.tagName,a=r.classNames,o=r.attributes;var i=document.createElement(n);var s={};a&&(i.className=a.join(" "));o&&(s=__assign$1(__assign$1({},s),o));setAttributes(s,i);t.push(i)},closeTag:function(e,t){if(t.length>1){var r=t.pop();last$1(t).appendChild(r)}},html:function(e,t){last$1(t).insertAdjacentHTML("beforeend",e.content)},text:function(e,t){var r=document.createTextNode(e.content);last$1(t).appendChild(r)}};var oZ=function(){function WwToDOMAdaptor(e,t){var r=getHTMLRenderConvertors(e,t);var n=__assign$1(__assign$1({},t.htmlBlock),t.htmlInline);this.customConvertorKeys=Object.keys(t).concat(Object.keys(n));this.renderer=new NG({gfm:true,convertors:__assign$1(__assign$1({},r),n)});this.convertors=this.renderer.getConvertors()}WwToDOMAdaptor.prototype.generateTokens=function(e){var t=createMdLikeNode(e);var r={entering:true,leaf:!!isPmNode(e)&&e.isLeaf,options:this.renderer.getOptions(),getChildrenText:function(){return isPmNode(e)?e.textContent:""},skipChildren:function(){return false}};var n=this.convertors[e.type.name];var a=n(t,r,this.convertors);var o=z(a)?a:[a];if(isContainer(e.type.name)||e.attrs.htmlInline){r.entering=false;o.push({type:"text",content:isPmNode(e)?e.textContent:""});o=o.concat(n(t,r,this.convertors))}return o};WwToDOMAdaptor.prototype.toDOMNode=function(e){var t=this.generateTokens(e);var r=[];t.forEach((function(e){return aZ[e.type](e,r)}));return r[0]};WwToDOMAdaptor.prototype.getToDOMNode=function(e){return includes(this.customConvertorKeys,e)?this.toDOMNode.bind(this):null};return WwToDOMAdaptor}();var iZ=100;var sZ=15;var lZ=null;var uZ=null;function run(e,t){var r=t.syncScrollTop,n=t.releaseEventBlock;uZ&&clearTimeout(uZ);r(e);uZ=setTimeout((function(){n()}),sZ)}function animate(e,t,r){var n=t-e;var a=Date.now();var step=function(){var o=Date.now();var i=(o-a)/iZ;var s;lZ&&clearTimeout(lZ);if(i<1){s=e+n*Math.cos((1-i)*Math.PI/2);run(Math.ceil(s),r);lZ=setTimeout(step,1)}else{run(t,r);lZ=null}};step()}var cZ=18;var dZ=function(){function ScrollSync(e,t,r){this.latestEditorScrollTop=null;this.latestPreviewScrollTop=null;this.blockedScroll=null;this.active=true;this.timer=null;var n=t.previewContent,a=t.el;this.previewRoot=n;this.previewEl=a;this.mdEditor=e;this.editorView=e.view;this.toastMark=e.getToastMark();this.eventEmitter=r;this.addScrollSyncEvent()}ScrollSync.prototype.addScrollSyncEvent=function(){var e=this;this.eventEmitter.listen("afterPreviewRender",(function(){e.clearTimer();e.timer=setTimeout((function(){e.syncPreviewScrollTop(true)}),200)}));this.eventEmitter.listen("scroll",(function(t,r){e.active&&("editor"===t&&"editor"!==e.blockedScroll?e.syncPreviewScrollTop():"preview"===t&&"preview"!==e.blockedScroll&&e.syncEditorScrollTop(r))}));this.eventEmitter.listen("toggleScrollSync",(function(t){e.active=t}))};ScrollSync.prototype.getMdNodeAtPos=function(e,t){var r=e.content.findIndex(t.pos);var n=r.index;return this.toastMark.findFirstNodeAtLine(n+1)};ScrollSync.prototype.getScrollTopByCaretPos=function(){var e=this.mdEditor.getSelection();var t=this.toastMark.findFirstNodeAtLine(e[0][0]);var r=this.previewEl.clientHeight;var n=getParentNodeObj(this.previewRoot,t).el;var a=getTotalOffsetTop(n,this.previewRoot)||n.offsetTop;var o=n.clientHeight;var i=a+o-.5*r;this.latestEditorScrollTop=null;var s=n.getBoundingClientRect().top-this.previewEl.getBoundingClientRect().top;return s<r?null:i};ScrollSync.prototype.syncPreviewScrollTop=function(e){void 0===e&&(e=false);var t=this,r=t.editorView,n=t.previewEl,a=t.previewRoot;var o=r.dom.getBoundingClientRect(),i=o.left,s=o.top;var l=r.posAtCoords({left:i,top:s});var u=r.state.doc;var d=this.getMdNodeAtPos(u,l);if(d&&!isHTMLNode(d)){var v=n.scrollTop;var p=r.dom,f=p.scrollTop,m=p.scrollHeight,g=p.clientHeight,y=p.children;var b=m-f<=g+cZ;var w=b?n.scrollHeight:0;if(f&&!b){if(e){var T=this.getScrollTopByCaretPos();if(!T)return;w=T}else{var C=getParentNodeObj(this.previewRoot,d),k=C.el,x=C.mdNode;var M=getEditorRangeHeightInfo(u,x,y),E=M.height,L=M.rect;var N=getTotalOffsetTop(k,a)||k.offsetTop;var I=k.clientHeight;var S=s>L.top?Math.min((s-L.top)/E,1):0;w=N+I*S}w=this.getResolvedScrollTop("editor",f,w,v);this.latestEditorScrollTop=f}w!==v&&this.run("editor",w,v)}};ScrollSync.prototype.syncEditorScrollTop=function(e){var t=this,r=t.toastMark,n=t.editorView,a=t.previewRoot,o=t.previewEl;var i=n.dom,s=n.state;var l=o.scrollTop,u=o.clientHeight,d=o.scrollHeight;var v=d-l<=u;var p=i.scrollTop;var f=v?i.scrollHeight:0;if(l&&e&&!v){e=findAncestorHavingId(e,a);if(!e.getAttribute("data-nodeid"))return;var m=i.children;var g=Number(e.getAttribute("data-nodeid"));var y=getParentNodeObj(this.previewRoot,r.findNodeById(g)),b=y.mdNode,w=y.el;var T=getMdStartLine(b);f=m[T-1].offsetTop;var C=getEditorRangeHeightInfo(s.doc,b,m).height;var k=getAndSaveOffsetInfo(w,a,g),x=k.nodeHeight,M=k.offsetTop;f+=getAdditionalPos(l,M,x,C);f=this.getResolvedScrollTop("preview",l,f,p);this.latestPreviewScrollTop=l}f!==p&&this.run("preview",f,p)};ScrollSync.prototype.getResolvedScrollTop=function(e,t,r,n){var a="editor"===e?this.latestEditorScrollTop:this.latestPreviewScrollTop;return null===a?r:a<t?Math.max(r,n):Math.min(r,n)};ScrollSync.prototype.run=function(e,t,r){var n=this;var a;if("editor"===e){a=this.previewEl;this.blockedScroll="preview"}else{a=this.editorView.dom;this.blockedScroll="editor"}var o={syncScrollTop:function(e){return a.scrollTop=e},releaseEventBlock:function(){return n.blockedScroll=null}};animate(r,t,o)};ScrollSync.prototype.clearTimer=function(){if(this.timer){clearTimeout(this.timer);this.timer=null}};ScrollSync.prototype.destroy=function(){this.clearTimer();this.eventEmitter.removeEventHandler("scroll");this.eventEmitter.removeEventHandler("afterPreviewRender")};return ScrollSync}();var vZ={getPopupInitialValues:function(e,t){var r=t.popupName;return"link"===r?{linkText:e.getSelectedText()}:{}}};function buildQuery(e){e.eventEmitter.listen("query",(function(t,r){return vZ[t](e,r)}))}
/**
 * ToastUIEditorCore
 * @param {Object} options Option object
 *     @param {HTMLElement} options.el - container element
 *     @param {string} [options.height='300px'] - Editor's height style value. Height is applied as border-box ex) '300px', '100%', 'auto'
 *     @param {string} [options.minHeight='200px'] - Editor's min-height style value in pixel ex) '300px'
 *     @param {string} [options.initialValue] - Editor's initial value
 *     @param {string} [options.previewStyle] - Markdown editor's preview style (tab, vertical)
 *     @param {boolean} [options.previewHighlight = true] - Highlight a preview element corresponds to the cursor position in the markdown editor
 *     @param {string} [options.initialEditType] - Initial editor type (markdown, wysiwyg)
 *     @param {Object} [options.events] - Events
 *         @param {function} [options.events.load] - It would be emitted when editor fully load
 *         @param {function} [options.events.change] - It would be emitted when content changed
 *         @param {function} [options.events.caretChange] - It would be emitted when format change by cursor position
 *         @param {function} [options.events.focus] - It would be emitted when editor get focus
 *         @param {function} [options.events.blur] - It would be emitted when editor loose focus
 *         @param {function} [options.events.keydown] - It would be emitted when the key is pressed in editor
 *         @param {function} [options.events.keyup] - It would be emitted when the key is released in editor
 *         @param {function} [options.events.beforePreviewRender] - It would be emitted before rendering the markdown preview with html string
 *         @param {function} [options.events.beforeConvertWysiwygToMarkdown] - It would be emitted before converting wysiwyg to markdown with markdown text
 *     @param {Object} [options.hooks] - Hooks
 *         @param {addImageBlobHook} [options.hooks.addImageBlobHook] - hook for image upload
 *     @param {string} [options.language='en-US'] - language
 *     @param {boolean} [options.useCommandShortcut=true] - whether use keyboard shortcuts to perform commands
 *     @param {boolean} [options.usageStatistics=true] - send hostname to google analytics
 *     @param {Array.<string|toolbarItemsValue>} [options.toolbarItems] - toolbar items.
 *     @param {boolean} [options.hideModeSwitch=false] - hide mode switch tab bar
 *     @param {Array.<function|Array>} [options.plugins] - Array of plugins. A plugin can be either a function or an array in the form of [function, options].
 *     @param {Object} [options.extendedAutolinks] - Using extended Autolinks specified in GFM spec
 *     @param {string} [options.placeholder] - The placeholder text of the editable element.
 *     @param {Object} [options.linkAttributes] - Attributes of anchor element that should be rel, target, hreflang, type
 *     @param {Object} [options.customHTMLRenderer=null] - Object containing custom renderer functions correspond to change markdown node to preview HTML or wysiwyg node
 *     @param {Object} [options.customMarkdownRenderer=null] - Object containing custom renderer functions correspond to change wysiwyg node to markdown text
 *     @param {boolean} [options.referenceDefinition=false] - whether use the specification of link reference definition
 *     @param {function} [options.customHTMLSanitizer=null] - custom HTML sanitizer
 *     @param {boolean} [options.previewHighlight=false] - whether highlight preview area
 *     @param {boolean} [options.frontMatter=false] - whether use the front matter
 *     @param {Array.<object>} [options.widgetRules=[]] - The rules for replacing the text with widget node
 *     @param {string} [options.theme] - The theme to style the editor with. The default is included in toastui-editor.css.
 *     @param {autofocus} [options.autofocus=true] - automatically focus the editor on creation.
 */var pZ=function(){function ToastUIEditorCore(e){var t=this;this.initialHTML=e.el.innerHTML;e.el.innerHTML="";this.options=W({previewStyle:"tab",previewHighlight:true,initialEditType:"markdown",height:"300px",minHeight:"200px",language:"en-US",useCommandShortcut:true,usageStatistics:true,toolbarItems:[["heading","bold","italic","strike"],["hr","quote"],["ul","ol","task","indent","outdent"],["table","image","link"],["code","codeblock"],["scrollSync"]],hideModeSwitch:false,linkAttributes:null,extendedAutolinks:false,customHTMLRenderer:null,customMarkdownRenderer:null,referenceDefinition:false,customHTMLSanitizer:null,frontMatter:false,widgetRules:[],theme:"light",autofocus:true},e);var r=this.options,n=r.customHTMLRenderer,a=r.extendedAutolinks,o=r.referenceDefinition,i=r.frontMatter,s=r.customMarkdownRenderer,l=r.useCommandShortcut,u=r.initialEditType,d=r.widgetRules,v=r.customHTMLSanitizer;this.mode=u||"markdown";this.mdPreviewStyle=this.options.previewStyle;this.i18n=_Q;this.i18n.setCode(this.options.language);this.eventEmitter=new WX;setWidgetRules(d);var p=sanitizeLinkAttribute(this.options.linkAttributes);this.pluginInfo=getPluginInfo({plugins:this.options.plugins,eventEmitter:this.eventEmitter,usageStatistics:this.options.usageStatistics,instance:this});var f=this.pluginInfo,m=f.toHTMLRenderers,g=f.toMarkdownRenderers,y=f.mdPlugins,b=f.wwPlugins,w=f.wwNodeViews,T=f.mdCommands,C=f.wwCommands,k=f.markdownParsers;var x={linkAttributes:p,customHTMLRenderer:deepMergedCopy(m,n),extendedAutolinks:a,referenceDefinition:o,frontMatter:i,sanitizer:v||sanitizeHTML};var M=new oZ(p,x.customHTMLRenderer);var E=createHTMLSchemaMap(x.customHTMLRenderer,x.sanitizer,M);this.toastMark=new CG("",{disallowedHtmlBlockTags:["br","img"],extendedAutolinks:a,referenceDefinition:o,disallowDeepHeading:true,frontMatter:i,customParser:k});this.mdEditor=new $r(this.eventEmitter,{toastMark:this.toastMark,useCommandShortcut:l,mdPlugins:y});this.preview=new LQ(this.eventEmitter,__assign$1(__assign$1({},x),{isViewer:false,highlight:this.options.previewHighlight}));this.wwEditor=new DX(this.eventEmitter,{toDOMAdaptor:M,useCommandShortcut:l,htmlSchemaMap:E,linkAttributes:p,wwPlugins:b,wwNodeViews:w});this.convertor=new JX(this.wwEditor.getSchema(),__assign$1(__assign$1({},g),s),getHTMLRenderConvertors(p,x.customHTMLRenderer),this.eventEmitter);this.setMinHeight(this.options.minHeight);this.setHeight(this.options.height);this.setMarkdown(this.options.initialValue,false);this.options.placeholder&&this.setPlaceholder(this.options.placeholder);this.options.initialValue||this.setHTML(this.initialHTML,false);this.commandManager=new qX(this.eventEmitter,this.mdEditor.commands,this.wwEditor.commands,(function(){return t.mode}));this.options.usageStatistics&&sendHostName();this.scrollSync=new dZ(this.mdEditor,this.preview,this.eventEmitter);this.addInitEvent();this.addInitCommand(T,C);buildQuery(this);this.options.hooks&&U(this.options.hooks,(function(e,r){return t.addHook(r,e)}));this.options.events&&U(this.options.events,(function(e,r){return t.on(r,e)}));this.eventEmitter.emit("load",this);this.moveCursorToStart(this.options.autofocus)}ToastUIEditorCore.prototype.addInitEvent=function(){var e=this;this.on("needChangeMode",this.changeMode.bind(this));this.on("loadUI",(function(){if("auto"!==e.height){var t=Math.min(parseInt(e.minHeight,10),parseInt(e.height,10)-75)+"px";e.setMinHeight(t)}}));addDefaultImageBlobHook(this.eventEmitter)};ToastUIEditorCore.prototype.addInitCommand=function(e,t){var r=this;var addPluginCommands=function(e,t){Object.keys(t).forEach((function(n){r.addCommand(e,n,t[n])}))};this.addCommand("markdown","toggleScrollSync",(function(e){r.eventEmitter.emit("toggleScrollSync",e.active);return true}));addPluginCommands("markdown",e);addPluginCommands("wysiwyg",t)};ToastUIEditorCore.prototype.getCurrentModeEditor=function(){return this.isMarkdownMode()?this.mdEditor:this.wwEditor};
/**
     * Factory method for Editor
     * @param {object} options Option for initialize TUIEditor
     * @returns {object} ToastUIEditorCore or ToastUIEditorViewer
     */ToastUIEditorCore.factory=function(e){return e.viewer?new nZ(e):new ToastUIEditorCore(e)};
/**
     * Set language
     * @param {string|string[]} code - code for I18N language
     * @param {object} data - language set
     */ToastUIEditorCore.setLanguage=function(e,t){_Q.setLanguage(e,t)};
/**
     * change preview style
     * @param {string} style - 'tab'|'vertical'
     */ToastUIEditorCore.prototype.changePreviewStyle=function(e){if(this.mdPreviewStyle!==e){this.mdPreviewStyle=e;this.eventEmitter.emit("changePreviewStyle",e)}};
/**
     * execute editor command
     * @param {string} name - command name
     * @param {object} [payload] - payload for command
     */ToastUIEditorCore.prototype.exec=function(e,t){this.commandManager.exec(e,t)};
/**
     * @param {string} type - editor type
     * @param {string} name - command name
     * @param {function} command - command handler
     */ToastUIEditorCore.prototype.addCommand=function(e,t,r){var n=this;var commandHoc=function(t){void 0===t&&(t={});var a=("markdown"===e?n.mdEditor:n.wwEditor).view;r(t,a.state,a.dispatch,a)};this.commandManager.addCommand(e,t,commandHoc)};
/**
     * Bind eventHandler to event type
     * @param {string} type Event type
     * @param {function} handler Event handler
     */ToastUIEditorCore.prototype.on=function(e,t){this.eventEmitter.listen(e,t)};
/**
     * Unbind eventHandler from event type
     * @param {string} type Event type
     */ToastUIEditorCore.prototype.off=function(e){this.eventEmitter.removeEventHandler(e)};
/**
     * Add hook to TUIEditor event
     * @param {string} type Event type
     * @param {function} handler Event handler
     */ToastUIEditorCore.prototype.addHook=function(e,t){this.eventEmitter.removeEventHandler(e);this.eventEmitter.listen(e,t)};
/**
     * Remove hook from TUIEditor event
     * @param {string} type Event type
     */ToastUIEditorCore.prototype.removeHook=function(e){this.eventEmitter.removeEventHandler(e)};ToastUIEditorCore.prototype.focus=function(){this.getCurrentModeEditor().focus()};ToastUIEditorCore.prototype.blur=function(){this.getCurrentModeEditor().blur()};
/**
     * Set cursor position to end
     * @param {boolean} [focus] - automatically focus the editor
     */ToastUIEditorCore.prototype.moveCursorToEnd=function(e){void 0===e&&(e=true);this.getCurrentModeEditor().moveCursorToEnd(e)};
/**
     * Set cursor position to start
     * @param {boolean} [focus] - automatically focus the editor
     */ToastUIEditorCore.prototype.moveCursorToStart=function(e){void 0===e&&(e=true);this.getCurrentModeEditor().moveCursorToStart(e)};
/**
     * Set markdown syntax text.
     * @param {string} markdown - markdown syntax text.
     * @param {boolean} [cursorToEnd=true] - move cursor to contents end
     */ToastUIEditorCore.prototype.setMarkdown=function(e,t){void 0===e&&(e="");void 0===t&&(t=true);this.mdEditor.setMarkdown(e,t);if(this.isWysiwygMode()){var r=this.toastMark.getRootNode();var n=this.convertor.toWysiwygModel(r);this.wwEditor.setModel(n,t)}};
/**
     * Set html value.
     * @param {string} html - html syntax text
     * @param {boolean} [cursorToEnd=true] - move cursor to contents end
     */ToastUIEditorCore.prototype.setHTML=function(e,t){void 0===e&&(e="");void 0===t&&(t=true);var r=document.createElement("div");r.innerHTML=replaceBRWithEmptyBlock(e);var n=o.fromSchema(this.wwEditor.schema).parse(r);this.isMarkdownMode()?this.mdEditor.setMarkdown(this.convertor.toMarkdownText(n),t):this.wwEditor.setModel(n,t)};
/**
     * Get content to markdown
     * @returns {string} markdown text
     */ToastUIEditorCore.prototype.getMarkdown=function(){return this.isMarkdownMode()?this.mdEditor.getMarkdown():this.convertor.toMarkdownText(this.wwEditor.getModel())};
/**
     * Get content to html
     * @returns {string} html string
     */ToastUIEditorCore.prototype.getHTML=function(){var e=this;this.eventEmitter.holdEventInvoke((function(){if(e.isMarkdownMode()){var t=e.toastMark.getRootNode();var r=e.convertor.toWysiwygModel(t);e.wwEditor.setModel(r)}}));var t=removeProseMirrorHackNodes(this.wwEditor.view.dom.innerHTML);if(this.placeholder){var r=new RegExp('<span class="placeholder[^>]+>'+this.placeholder+"</span>","i");return t.replace(r,"")}return t};
/**
     * Insert text
     * @param {string} text - text content
     */ToastUIEditorCore.prototype.insertText=function(e){this.getCurrentModeEditor().replaceSelection(e)};
/**
     * Set selection range
     * @param {number|Array.<number>} start - start position
     * @param {number|Array.<number>} end - end position
     */ToastUIEditorCore.prototype.setSelection=function(e,t){this.getCurrentModeEditor().setSelection(e,t)};
/**
     * Replace selection range with given text content
     * @param {string} text - text content
     * @param {number|Array.<number>} [start] - start position
     * @param {number|Array.<number>} [end] - end position
     */ToastUIEditorCore.prototype.replaceSelection=function(e,t,r){this.getCurrentModeEditor().replaceSelection(e,t,r)};
/**
     * Delete the content of selection range
     * @param {number|Array.<number>} [start] - start position
     * @param {number|Array.<number>} [end] - end position
     */ToastUIEditorCore.prototype.deleteSelection=function(e,t){this.getCurrentModeEditor().deleteSelection(e,t)};
/**
     * Get selected text content
     * @param {number|Array.<number>} [start] - start position
     * @param {number|Array.<number>} [end] - end position
     * @returns {string} - selected text content
     */ToastUIEditorCore.prototype.getSelectedText=function(e,t){return this.getCurrentModeEditor().getSelectedText(e,t)};
/**
     * Get range of the node
     * @param {number|Array.<number>} [pos] - position
     * @returns {Array.<number[]>|Array.<number>} - node [start, end] range
     * @example
     * // Markdown mode
     * const rangeInfo = editor.getRangeInfoOfNode();
     *
     * console.log(rangeInfo); // { range: [[startLineOffset, startCurorOffset], [endLineOffset, endCurorOffset]], type: 'emph' }
     *
     * // WYSIWYG mode
     * const rangeInfo = editor.getRangeInfoOfNode();
     *
     * console.log(rangeInfo); // { range: [startCursorOffset, endCursorOffset], type: 'emph' }
     */ToastUIEditorCore.prototype.getRangeInfoOfNode=function(e){return this.getCurrentModeEditor().getRangeInfoOfNode(e)};
/**
     * Add widget to selection
     * @param {Node} node - widget node
     * @param {string} style - Adding style "top" or "bottom"
     * @param {number|Array.<number>} [pos] - position
     */ToastUIEditorCore.prototype.addWidget=function(e,t,r){this.getCurrentModeEditor().addWidget(e,t,r)};
/**
     * Replace node with widget to range
     * @param {number|Array.<number>} start - start position
     * @param {number|Array.<number>} end - end position
     * @param {string} text - widget text content
     */ToastUIEditorCore.prototype.replaceWithWidget=function(e,t,r){this.getCurrentModeEditor().replaceWithWidget(e,t,r)};
/**
     * Set editor height
     * @param {string} height - editor height in pixel
     */ToastUIEditorCore.prototype.setHeight=function(e){var t=this.options.el;if(q(e)){"auto"===e?ve(t,"auto-height"):ge(t,"auto-height");this.setMinHeight(this.getMinHeight())}J(t,{height:e});this.height=e};
/**
     * Get editor height
     * @returns {string} editor height in pixel
     */ToastUIEditorCore.prototype.getHeight=function(){return this.height};
/**
     * Set minimum height to editor content
     * @param {string} minHeight - min content height in pixel
     */ToastUIEditorCore.prototype.setMinHeight=function(e){if(e!==this.minHeight){var t=this.height||this.options.height;"auto"!==t&&this.options.el.querySelector("."+cls("main"))&&(e=Math.min(parseInt(e,10),parseInt(t,10)-75)+"px");var r=parseInt(e,10);this.minHeight=e;this.wwEditor.setMinHeight(r);this.mdEditor.setMinHeight(r);this.preview.setMinHeight(r)}};
/**
     * Get minimum height of editor content
     * @returns {string} min height in pixel
     */ToastUIEditorCore.prototype.getMinHeight=function(){return this.minHeight};
/**
     * Return true if current editor mode is Markdown
     * @returns {boolean}
     */ToastUIEditorCore.prototype.isMarkdownMode=function(){return"markdown"===this.mode};
/**
     * Return true if current editor mode is WYSIWYG
     * @returns {boolean}
     */ToastUIEditorCore.prototype.isWysiwygMode=function(){return"wysiwyg"===this.mode};
/**
     * Return false
     * @returns {boolean}
     */ToastUIEditorCore.prototype.isViewer=function(){return false};
/**
     * Get current Markdown editor's preview style
     * @returns {string}
     */ToastUIEditorCore.prototype.getCurrentPreviewStyle=function(){return this.mdPreviewStyle};
/**
     * Change editor's mode to given mode string
     * @param {string} mode - Editor mode name of want to change
     * @param {boolean} [withoutFocus] - Change mode without focus
     */ToastUIEditorCore.prototype.changeMode=function(e,t){if(this.mode!==e){this.mode=e;if(this.isWysiwygMode()){var r=this.toastMark.getRootNode();var n=this.convertor.toWysiwygModel(r);this.wwEditor.setModel(n)}else{n=this.wwEditor.getModel();this.mdEditor.setMarkdown(this.convertor.toMarkdownText(n),!t)}this.eventEmitter.emit("removePopupWidget");this.eventEmitter.emit("changeMode",e);if(!t){var a=this.convertor.getMappedPos();this.focus();this.isWysiwygMode()&&ye(a)?this.wwEditor.setSelection(a):Array.isArray(a)&&this.mdEditor.setSelection(a)}}};ToastUIEditorCore.prototype.destroy=function(){var e=this;this.wwEditor.destroy();this.mdEditor.destroy();this.preview.destroy();this.scrollSync.destroy();this.eventEmitter.emit("destroy");this.eventEmitter.getEvents().forEach((function(t,r){return e.off(r)}))};ToastUIEditorCore.prototype.hide=function(){this.eventEmitter.emit("hide")};ToastUIEditorCore.prototype.show=function(){this.eventEmitter.emit("show")};
/**
     * Move on scroll position of the editor container
     * @param {number} value scrollTop value of editor container
     */ToastUIEditorCore.prototype.setScrollTop=function(e){this.getCurrentModeEditor().setScrollTop(e)};
/**
     * Get scroll position value of editor container
     * @returns {number} scrollTop value of editor container
     */ToastUIEditorCore.prototype.getScrollTop=function(){return this.getCurrentModeEditor().getScrollTop()};ToastUIEditorCore.prototype.reset=function(){this.wwEditor.setModel([]);this.mdEditor.setMarkdown("")};
/**
     * Get current selection range
     * @returns {Array.<number[]>|Array.<number>} Returns the range of the selection depending on the editor mode
     * @example
     * // Markdown mode
     * const mdSelection = editor.getSelection();
     *
     * console.log(mdSelection); // [[startLineOffset, startCurorOffset], [endLineOffset, endCurorOffset]]
     *
     * // WYSIWYG mode
     * const wwSelection = editor.getSelection();
     *
     * console.log(wwSelection); // [startCursorOffset, endCursorOffset]
     */ToastUIEditorCore.prototype.getSelection=function(){return this.getCurrentModeEditor().getSelection()};
/**
     * Set the placeholder on all editors
     * @param {string} placeholder - placeholder to set
     */ToastUIEditorCore.prototype.setPlaceholder=function(e){this.placeholder=e;this.mdEditor.setPlaceholder(e);this.wwEditor.setPlaceholder(e)};ToastUIEditorCore.prototype.getEditorElements=function(){return{mdEditor:this.mdEditor.getElement(),mdPreview:this.preview.getElement(),wwEditor:this.wwEditor.getElement()}};
/**
     * Convert position to match editor mode
     * @param {number|Array.<number>} start - start position
     * @param {number|Array.<number>} end - end position
     * @param {string} mode - Editor mode name of want to match converted position to
     */ToastUIEditorCore.prototype.convertPosToMatchEditorMode=function(e,t,r){var n,a;void 0===t&&(t=e);void 0===r&&(r=this.mode);var o=this.mdEditor.view.state.doc;var i=Array.isArray(e);var s=Array.isArray(t);var l=e;var u=t;if(i!==s)throw new Error("Types of arguments must be same");"markdown"!==r||i||s?"wysiwyg"===r&&i&&s&&(a=getMdToEditorPos(o,e,t),l=a[0],u=a[1]):(n=getEditorToMdPos(o,e,t),l=n[0],u=n[1]);return[l,u]};return ToastUIEditorCore}();function html$1(e){for(var t,r,n=arguments,a=1,o="",i="",s=[0],c=function(e){1===a&&(e||(o=o.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?s.push(e?n[e]:o):3===a&&(e||o)?(s[1]=e?n[e]:o,a=2):2===a&&"..."===o&&e?s[2]=assign(s[2]||{},n[e]):2===a&&o&&!e?(s[2]=s[2]||{})[o]=!0:a>=5&&(5===a?((s[2]=s[2]||{})[r]=e?o?o+n[e]:n[e]:o,a=6):(e||o)&&(s[2][r]+=e?o+n[e]:o)),o=""},l=0;l<e.length;l++){l&&(1===a&&c(),c(l));for(let n=0;n<e[l].length;n++)t=e[l][n],1===a?"<"===t?(c(),s=[s,"",null],a=3):o+=t:4===a?"--"===o&&">"===t?(a=1,o=""):o=t+o[0]:i?t===i?i="":o+=t:'"'===t||"'"===t?i=t:">"===t?(c(),a=1):a&&("="===t?(a=5,r=o,o=""):"/"===t&&(a<5||">"===e[l][n+1])?(c(),3===a&&(s=s[0]),a=s,(s=s[0]).push(this.apply(null,a.slice(1))),a=0):" "===t||"\t"===t||"\n"===t||"\r"===t?(c(),a=2):o+=t),3===a&&"!--"===o&&(a=4,s=s[0])}return c(),s.length>2?s.slice(1):s[1]
/**
 * Check whether the given variable is a boolean or not.
 *  If the given variable is a boolean, return true.
 * @param {*} obj - Target for checking
 * @returns {boolean} Is boolean?
 * @memberof module:type
 */}function isBoolean(e){return"boolean"===typeof e||e instanceof Boolean}var fZ=isBoolean;var hZ=function(){function VNodeWalker(e){this.current=e;this.root=e;this.entering=true}VNodeWalker.prototype.walk=function(){var e=this,t=e.entering,r=e.current;if(!r)return null;if(t)if(r.firstChild){this.current=r.firstChild;this.entering=true}else this.entering=false;else if(r===this.root)this.current=null;else if(r.next){this.current=r.next;this.entering=true}else{this.current=r.parent;this.entering=false}return{vnode:r,entering:t}};return VNodeWalker}();var mZ=function(){function VNode(e,t,r){this.parent=null;this.old=null;this.firstChild=null;this.next=null;this.skip=false;this.type=e;this.props=t;this.children=r;this.props.children=r;if(t.ref){this.ref=t.ref;delete t.ref}if(t.key){this.key=t.key;delete t.key}}VNode.prototype.walker=function(){return new hZ(this)};VNode.removalNodes=[];return VNode}();function createTextNode(e){return new mZ("TEXT_NODE",{nodeValue:e},[])}function excludeUnnecessaryChild(e,t){var r=e;fZ(e)||null==e?r=null:(q(e)||ye(e))&&(r=createTextNode(String(e)));r&&t.push(r)}function h(e,t){var r=[];for(var n=2;n<arguments.length;n++)r[n-2]=arguments[n];var a=[];r.forEach((function(e){Array.isArray(e)?e.forEach((function(e){excludeUnnecessaryChild(e,a)})):excludeUnnecessaryChild(e,a)}));return new mZ(e,t||{},a)}var gZ=html$1.bind(h);
/**
 * Check whether the given variable is an object or not.
 * If the given variable is an object, return true.
 * @param {*} obj - Target for checking
 * @returns {boolean} Is object?
 * @memberof module:type
 */function isObject(e){return e===Object(e)}var yZ=isObject;function createNode(e){var t;if("TEXT_NODE"===e.type)t=document.createTextNode(e.props.nodeValue);else{t=document.createElement(e.type);setProps(t,{},e.props)}return t}function removeNode(e,t){e.node?t.removeChild(e.node):removeNode(e.firstChild,t)}function innerDiff(e,t,r){Object.keys(t).forEach((function(n){if(/^on/.test(n)){if(!r[n]||t[n]!==r[n]){var a=n.slice(2).toLowerCase();e.removeEventListener(a,t[n])}}else"children"===n||r[n]||isTextNode(e)||e.removeAttribute(n)}));setProps(e,t,r,(function(e){return!shallowEqual(t[e],r[e])}))}var bZ=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i;function setProps(e,t,r,n){Object.keys(r).forEach((function(a){if(!n||n(a))if(/^on/.test(a)){var o=a.slice(2).toLowerCase();e.addEventListener(o,r[a])}else"nodeValue"===a?e[a]=r[a]:"style"===a&&yZ(r[a])?setStyleProps(e,t[a],r[a]):"children"!==a&&(false===r[a]?e.removeAttribute(a):e.setAttribute(a,r[a]))}))}function setStyleProps(e,t,r){t&&Object.keys(t).forEach((function(t){e.style[t]=""}));Object.keys(r).forEach((function(t){var n=r[t];e.style[t]=ye(n)&&!bZ.test(t)?n+"px":n}))}function commit(e){mZ.removalNodes.forEach((function(e){return diff(e)}));if(e){var t=void 0;var r=e.walker();while(t=r.walk()){e=t.vnode;if(t.entering)diff(e);else if(bt(e.type)){var n=e.component;!e.old&&n.mounted&&n.mounted();if(e.old&&n.updated){var a=n.prevProps||{};n.updated(a)}}}}}function getParentNode(e){var t=e.parent;while(!t.node)t=t.parent;return t.node}function diff(e){if(e&&e.parent){if(e.node){var t=getParentNode(e);"A"===e.effect?t.appendChild(e.node):"U"===e.effect&&innerDiff(e.node,e.old.props,e.props)}if("D"===e.effect){var r=void 0;var n=e.walker();while(r=n.walk()){e=r.vnode;if(!r.entering)if(bt(e.type)){var a=e.component;a.beforeDestroy&&a.beforeDestroy()}else{t=getParentNode(e);removeNode(e,t)}}}e.ref&&(e.component?e.ref(e.component):e.node&&e.ref(e.node))}}function createComponent(e,t){var r=t.props,n=t.component;if(n){n.prevProps=n.props;n.props=t.props;return n}return new e(r)}function buildVNode(e){var t=e;while(e&&!e.skip){if(bt(e.type)){var r=createComponent(e.type,e);r.vnode=e;e.component=r;e.props.children=e.children=[r.render()];buildChildrenVNode(e)}else{e.node||(e.node=createNode(e));buildChildrenVNode(e)}if(e.firstChild)e=e.firstChild;else{while(e&&e.parent&&!e.next){e=e.parent;if(e===t)break}e=e.next}}}function isSameType(e,t){return e&&t&&t.type===e.type&&(!t.key||t.key===e.key)}function buildChildrenVNode(e){var t=e.children;var r=e.old?e.old.firstChild:null;var n=null;t.forEach((function(t,a){var o=isSameType(r,t);if(o){t.old=r;t.parent=e;t.node=r.node;t.component=r.component;t.effect="U"}if(t&&!o){t.old=null;t.parent=e;t.node=null;t.effect="A"}if(r&&!o){mZ.removalNodes.push(r);r.effect="D"}r&&(r=r.next);0===a?e.firstChild=t:t&&(n.next=t);n=t}));var a=last$1(t);if(!t.length)while(r){mZ.removalNodes.push(r);r.effect="D";r=r.next}while(r&&a)if(r&&a.old!==r){mZ.removalNodes.push(r);r.effect="D";r=r.next}}function destroy(e){e.effect="D";mZ.removalNodes=[e];commit();mZ.removalNodes=[]}function rerender(e){var t=e.vnode;t.effect="U";t.old=t;t.next&&(t.next.skip=true);mZ.removalNodes=[];buildVNode(t);commit(t);t.next&&(t.next.skip=false)}function render(e,t){var r=new mZ(e.tagName.toLowerCase(),{},[t]);r.node=e;mZ.removalNodes=[];buildVNode(r);commit(r);return function(){return destroy(r.firstChild)}}var wZ=function(){function Component(e){this.props=e;this.state={};this.refs={}}Component.prototype.setState=function(e){var t=__assign$1(__assign$1({},this.state),e);if(!shallowEqual(this.state,t)){this.state=t;rerender(this)}};return Component}();var TZ=function(e){__extends$1(Switch,e);function Switch(t){var r=e.call(this,t)||this;r.state={hide:false};return r}Switch.prototype.show=function(){this.setState({hide:false})};Switch.prototype.hide=function(){this.setState({hide:true})};Switch.prototype.render=function(){var e=this.props,t=e.editorType,r=e.eventEmitter;return gZ(CZ||(CZ=__makeTemplateObject(['\n      <div class="','" style="display: ','">\n        <div\n          class="tab-item','"\n          onClick=',"\n        >\n          ",'\n        </div>\n        <div\n          class="tab-item','"\n          onClick=',"\n        >\n          ","\n        </div>\n      </div>\n    "],['\n      <div class="','" style="display: ','">\n        <div\n          class="tab-item','"\n          onClick=',"\n        >\n          ",'\n        </div>\n        <div\n          class="tab-item','"\n          onClick=',"\n        >\n          ","\n        </div>\n      </div>\n    "])),cls("mode-switch"),this.state.hide?"none":"block","markdown"===t?" active":"",(function(){r.emit("needChangeMode","markdown")}),_Q.get("Markdown"),"wysiwyg"===t?" active":"",(function(){r.emit("needChangeMode","wysiwyg")}),_Q.get("WYSIWYG"))};return Switch}(wZ);var CZ;
/**
 * Creates a debounced function that delays invoking fn until after delay milliseconds has elapsed
 * since the last time the debouced function was invoked.
 * @param {function} fn The function to debounce.
 * @param {number} [delay=0] The number of milliseconds to delay
 * @returns {function} debounced function.
 * @memberof module:tricks
 * @example
 * // ES6
 * import debounce from 'tui-code-snippet/tricks/debounce';
 * 
 * // CommonJS
 * const debounce = require('tui-code-snippet/tricks/debounce');
 *
 * function someMethodToInvokeDebounced() {}
 *
 * const debounced = debounce(someMethodToInvokeDebounced, 300);
 *
 * // invoke repeatedly
 * debounced();
 * debounced();
 * debounced();
 * debounced();
 * debounced();
 * debounced();    // last invoke of debounced()
 *
 * // invoke someMethodToInvokeDebounced() after 300 milliseconds.
 */function debounce$1(e,t){var r,n;t=t||0;function debounced(){n=Array.prototype.slice.call(arguments);window.clearTimeout(r);r=window.setTimeout((function(){e.apply(null,n)}),t)}return debounced}var kZ=debounce$1;var xZ=kZ;
/**
 * Creates a throttled function that only invokes fn at most once per every interval milliseconds.
 * You can use this throttle short time repeatedly invoking functions. (e.g MouseMove, Resize ...)
 * if you need reuse throttled method. you must remove slugs (e.g. flag variable) related with throttling.
 * @param {function} fn function to throttle
 * @param {number} [interval=0] the number of milliseconds to throttle invocations to.
 * @returns {function} throttled function
 * @memberof module:tricks
 * @example
 * // ES6
 * import throttle from 'tui-code-snippet/tricks/throttle';
 * 
 * // CommonJS
 * const throttle = require('tui-code-snippet/tricks/throttle');
 *
 * function someMethodToInvokeThrottled() {}
 *
 * const throttled = throttle(someMethodToInvokeThrottled, 300);
 *
 * // invoke repeatedly
 * throttled();    // invoke (leading)
 * throttled();
 * throttled();    // invoke (near 300 milliseconds)
 * throttled();
 * throttled();
 * throttled();    // invoke (near 600 milliseconds)
 * // ...
 * // invoke (trailing)
 *
 * // if you need reuse throttled method. then invoke reset()
 * throttled.reset();
 */function throttle$1(e,t){var r;var n=true;var tick=function(t){e.apply(null,t);r=null};var a,o,i;t=t||0;a=xZ(tick,t);function throttled(){i=Array.prototype.slice.call(arguments);if(n){tick(i);n=false}else{o=Number(new Date);r=r||o;a(i);o-r>=t&&tick(i)}}function reset(){n=true;r=null}throttled.reset=reset;return throttled}var MZ=throttle$1;var EZ=function(){if("undefined"!==typeof Map)return Map;
/**
     * Returns index in provided array that matches the specified key.
     *
     * @param {Array<Array>} arr
     * @param {*} key
     * @returns {number}
     */function getIndex(e,t){var r=-1;e.some((function(e,n){if(e[0]===t){r=n;return true}return false}));return r}return function(){function class_1(){this.__entries__=[]}Object.defineProperty(class_1.prototype,"size",{
/**
             * @returns {boolean}
             */
get:function(){return this.__entries__.length},enumerable:true,configurable:true});
/**
         * @param {*} key
         * @returns {*}
         */class_1.prototype.get=function(e){var t=getIndex(this.__entries__,e);var r=this.__entries__[t];return r&&r[1]};
/**
         * @param {*} key
         * @param {*} value
         * @returns {void}
         */class_1.prototype.set=function(e,t){var r=getIndex(this.__entries__,e);~r?this.__entries__[r][1]=t:this.__entries__.push([e,t])};
/**
         * @param {*} key
         * @returns {void}
         */class_1.prototype.delete=function(e){var t=this.__entries__;var r=getIndex(t,e);~r&&t.splice(r,1)};
/**
         * @param {*} key
         * @returns {void}
         */class_1.prototype.has=function(e){return!!~getIndex(this.__entries__,e)};
/**
         * @returns {void}
         */class_1.prototype.clear=function(){this.__entries__.splice(0)};
/**
         * @param {Function} callback
         * @param {*} [ctx=null]
         * @returns {void}
         */class_1.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var r=0,n=this.__entries__;r<n.length;r++){var a=n[r];e.call(t,a[1],a[0])}};return class_1}()}();var LZ="undefined"!==typeof window&&"undefined"!==typeof document&&window.document===document;var NZ=function(){return"undefined"!==typeof global&&global.Math===Math?global:"undefined"!==typeof self&&self.Math===Math?self:"undefined"!==typeof window&&window.Math===Math?window:Function("return this")()}();
/**
 * A shim for the requestAnimationFrame which falls back to the setTimeout if
 * first one is not supported.
 *
 * @returns {number} Requests' identifier.
 */var IZ=function(){return"function"===typeof requestAnimationFrame?requestAnimationFrame.bind(NZ):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)}}();var SZ=2;
/**
 * Creates a wrapper function which ensures that provided callback will be
 * invoked only once during the specified delay period.
 *
 * @param {Function} callback - Function to be invoked after the delay period.
 * @param {number} delay - Delay after which to invoke callback.
 * @returns {Function}
 */function throttle(e,t){var r=false,n=false,a=0;
/**
     * Invokes the original callback function and schedules new invocation if
     * the "proxy" was called during current request.
     *
     * @returns {void}
     */function resolvePending(){if(r){r=false;e()}n&&proxy()}
/**
     * Callback invoked after the specified delay. It will further postpone
     * invocation of the original function delegating it to the
     * requestAnimationFrame.
     *
     * @returns {void}
     */function timeoutCallback(){IZ(resolvePending)}
/**
     * Schedules invocation of the original function.
     *
     * @returns {void}
     */function proxy(){var e=Date.now();if(r){if(e-a<SZ)return;n=true}else{r=true;n=false;setTimeout(timeoutCallback,t)}a=e}return proxy}var OZ=20;var AZ=["top","right","bottom","left","width","height","size","weight"];var PZ="undefined"!==typeof MutationObserver;var DZ=function(){function ResizeObserverController(){this.connected_=false;this.mutationEventsAdded_=false;this.mutationsObserver_=null;this.observers_=[];this.onTransitionEnd_=this.onTransitionEnd_.bind(this);this.refresh=throttle(this.refresh.bind(this),OZ)}
/**
     * Adds observer to observers list.
     *
     * @param {ResizeObserverSPI} observer - Observer to be added.
     * @returns {void}
     */ResizeObserverController.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e);this.connected_||this.connect_()};
/**
     * Removes observer from observers list.
     *
     * @param {ResizeObserverSPI} observer - Observer to be removed.
     * @returns {void}
     */ResizeObserverController.prototype.removeObserver=function(e){var t=this.observers_;var r=t.indexOf(e);~r&&t.splice(r,1);!t.length&&this.connected_&&this.disconnect_()};
/**
     * Invokes the update of observers. It will continue running updates insofar
     * it detects changes.
     *
     * @returns {void}
     */ResizeObserverController.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()};
/**
     * Updates every observer from observers list and notifies them of queued
     * entries.
     *
     * @private
     * @returns {boolean} Returns "true" if any observer has detected changes in
     *      dimensions of it's elements.
     */ResizeObserverController.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));e.forEach((function(e){return e.broadcastActive()}));return e.length>0};
/**
     * Initializes DOM listeners.
     *
     * @private
     * @returns {void}
     */ResizeObserverController.prototype.connect_=function(){if(LZ&&!this.connected_){document.addEventListener("transitionend",this.onTransitionEnd_);window.addEventListener("resize",this.refresh);if(PZ){this.mutationsObserver_=new MutationObserver(this.refresh);this.mutationsObserver_.observe(document,{attributes:true,childList:true,characterData:true,subtree:true})}else{document.addEventListener("DOMSubtreeModified",this.refresh);this.mutationEventsAdded_=true}this.connected_=true}};
/**
     * Removes DOM listeners.
     *
     * @private
     * @returns {void}
     */ResizeObserverController.prototype.disconnect_=function(){if(LZ&&this.connected_){document.removeEventListener("transitionend",this.onTransitionEnd_);window.removeEventListener("resize",this.refresh);this.mutationsObserver_&&this.mutationsObserver_.disconnect();this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh);this.mutationsObserver_=null;this.mutationEventsAdded_=false;this.connected_=false}};
/**
     * "Transitionend" event handler.
     *
     * @private
     * @param {TransitionEvent} event
     * @returns {void}
     */ResizeObserverController.prototype.onTransitionEnd_=function(e){var t=e.propertyName,r=void 0===t?"":t;var n=AZ.some((function(e){return!!~r.indexOf(e)}));n&&this.refresh()};
/**
     * Returns instance of the ResizeObserverController.
     *
     * @returns {ResizeObserverController}
     */ResizeObserverController.getInstance=function(){this.instance_||(this.instance_=new ResizeObserverController);return this.instance_};ResizeObserverController.instance_=null;return ResizeObserverController}();
/**
 * Defines non-writable/enumerable properties of the provided target object.
 *
 * @param {Object} target - Object for which to define properties.
 * @param {Object} props - Properties to be defined.
 * @returns {Object} Target object.
 */var defineConfigurable=function(e,t){for(var r=0,n=Object.keys(t);r<n.length;r++){var a=n[r];Object.defineProperty(e,a,{value:t[a],enumerable:false,writable:false,configurable:true})}return e};
/**
 * Returns the global object associated with provided element.
 *
 * @param {Object} target
 * @returns {Object}
 */var getWindowOf=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||NZ};var BZ=createRectInit(0,0,0,0);
/**
 * Converts provided string to a number.
 *
 * @param {number|string} value
 * @returns {number}
 */function toFloat(e){return parseFloat(e)||0}
/**
 * Extracts borders size from provided styles.
 *
 * @param {CSSStyleDeclaration} styles
 * @param {...string} positions - Borders positions (top, right, ...)
 * @returns {number}
 */function getBordersSize(e){var t=[];for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.reduce((function(t,r){var n=e["border-"+r+"-width"];return t+toFloat(n)}),0)}
/**
 * Extracts paddings sizes from provided styles.
 *
 * @param {CSSStyleDeclaration} styles
 * @returns {Object} Paddings box.
 */function getPaddings(e){var t=["top","right","bottom","left"];var r={};for(var n=0,a=t;n<a.length;n++){var o=a[n];var i=e["padding-"+o];r[o]=toFloat(i)}return r}
/**
 * Calculates content rectangle of provided SVG element.
 *
 * @param {SVGGraphicsElement} target - Element content rectangle of which needs
 *      to be calculated.
 * @returns {DOMRectInit}
 */function getSVGContentRect(e){var t=e.getBBox();return createRectInit(0,0,t.width,t.height)}
/**
 * Calculates content rectangle of provided HTMLElement.
 *
 * @param {HTMLElement} target - Element for which to calculate the content rectangle.
 * @returns {DOMRectInit}
 */function getHTMLElementContentRect(e){var t=e.clientWidth,r=e.clientHeight;if(!t&&!r)return BZ;var n=getWindowOf(e).getComputedStyle(e);var a=getPaddings(n);var o=a.left+a.right;var i=a.top+a.bottom;var s=toFloat(n.width),l=toFloat(n.height);if("border-box"===n.boxSizing){Math.round(s+o)!==t&&(s-=getBordersSize(n,"left","right")+o);Math.round(l+i)!==r&&(l-=getBordersSize(n,"top","bottom")+i)}if(!isDocumentElement(e)){var u=Math.round(s+o)-t;var d=Math.round(l+i)-r;1!==Math.abs(u)&&(s-=u);1!==Math.abs(d)&&(l-=d)}return createRectInit(a.left,a.top,s,l)}
/**
 * Checks whether provided element is an instance of the SVGGraphicsElement.
 *
 * @param {Element} target - Element to be checked.
 * @returns {boolean}
 */var RZ=function(){return"undefined"!==typeof SVGGraphicsElement?function(e){return e instanceof getWindowOf(e).SVGGraphicsElement}:function(e){return e instanceof getWindowOf(e).SVGElement&&"function"===typeof e.getBBox}}();
/**
 * Checks whether provided element is a document element (<html>).
 *
 * @param {Element} target - Element to be checked.
 * @returns {boolean}
 */function isDocumentElement(e){return e===getWindowOf(e).document.documentElement}
/**
 * Calculates an appropriate content rectangle for provided html or svg element.
 *
 * @param {Element} target - Element content rectangle of which needs to be calculated.
 * @returns {DOMRectInit}
 */function getContentRect(e){return LZ?RZ(e)?getSVGContentRect(e):getHTMLElementContentRect(e):BZ}
/**
 * Creates rectangle with an interface of the DOMRectReadOnly.
 * Spec: https://drafts.fxtf.org/geometry/#domrectreadonly
 *
 * @param {DOMRectInit} rectInit - Object with rectangle's x/y coordinates and dimensions.
 * @returns {DOMRectReadOnly}
 */function createReadOnlyRect(e){var t=e.x,r=e.y,n=e.width,a=e.height;var o="undefined"!==typeof DOMRectReadOnly?DOMRectReadOnly:Object;var i=Object.create(o.prototype);defineConfigurable(i,{x:t,y:r,width:n,height:a,top:r,right:t+n,bottom:a+r,left:t});return i}
/**
 * Creates DOMRectInit object based on the provided dimensions and the x/y coordinates.
 * Spec: https://drafts.fxtf.org/geometry/#dictdef-domrectinit
 *
 * @param {number} x - X coordinate.
 * @param {number} y - Y coordinate.
 * @param {number} width - Rectangle's width.
 * @param {number} height - Rectangle's height.
 * @returns {DOMRectInit}
 */function createRectInit(e,t,r,n){return{x:e,y:t,width:r,height:n}}var HZ=function(){
/**
     * Creates an instance of ResizeObservation.
     *
     * @param {Element} target - Element to be observed.
     */
function ResizeObservation(e){
/**
         * Broadcasted width of content rectangle.
         *
         * @type {number}
         */
this.broadcastWidth=0;
/**
         * Broadcasted height of content rectangle.
         *
         * @type {number}
         */this.broadcastHeight=0;this.contentRect_=createRectInit(0,0,0,0);this.target=e}
/**
     * Updates content rectangle and tells whether it's width or height properties
     * have changed since the last broadcast.
     *
     * @returns {boolean}
     */ResizeObservation.prototype.isActive=function(){var e=getContentRect(this.target);this.contentRect_=e;return e.width!==this.broadcastWidth||e.height!==this.broadcastHeight};
/**
     * Updates 'broadcastWidth' and 'broadcastHeight' properties with a data
     * from the corresponding properties of the last observed content rectangle.
     *
     * @returns {DOMRectInit} Last observed content rectangle.
     */ResizeObservation.prototype.broadcastRect=function(){var e=this.contentRect_;this.broadcastWidth=e.width;this.broadcastHeight=e.height;return e};return ResizeObservation}();var _Z=function(){
/**
     * Creates an instance of ResizeObserverEntry.
     *
     * @param {Element} target - Element that is being observed.
     * @param {DOMRectInit} rectInit - Data of the element's content rectangle.
     */
function ResizeObserverEntry(e,t){var r=createReadOnlyRect(t);defineConfigurable(this,{target:e,contentRect:r})}return ResizeObserverEntry}();var $Z=function(){
/**
     * Creates a new instance of ResizeObserver.
     *
     * @param {ResizeObserverCallback} callback - Callback function that is invoked
     *      when one of the observed elements changes it's content dimensions.
     * @param {ResizeObserverController} controller - Controller instance which
     *      is responsible for the updates of observer.
     * @param {ResizeObserver} callbackCtx - Reference to the public
     *      ResizeObserver instance which will be passed to callback function.
     */
function ResizeObserverSPI(e,t,r){this.activeObservations_=[];this.observations_=new EZ;if("function"!==typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e;this.controller_=t;this.callbackCtx_=r}
/**
     * Starts observing provided element.
     *
     * @param {Element} target - Element to be observed.
     * @returns {void}
     */ResizeObserverSPI.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof getWindowOf(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;if(!t.has(e)){t.set(e,new HZ(e));this.controller_.addObserver(this);this.controller_.refresh()}}};
/**
     * Stops observing provided element.
     *
     * @param {Element} target - Element to stop observing.
     * @returns {void}
     */ResizeObserverSPI.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof getWindowOf(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;if(t.has(e)){t.delete(e);t.size||this.controller_.removeObserver(this)}}};
/**
     * Stops observing all elements.
     *
     * @returns {void}
     */ResizeObserverSPI.prototype.disconnect=function(){this.clearActive();this.observations_.clear();this.controller_.removeObserver(this)};
/**
     * Collects observation instances the associated element of which has changed
     * it's content rectangle.
     *
     * @returns {void}
     */ResizeObserverSPI.prototype.gatherActive=function(){var e=this;this.clearActive();this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))};
/**
     * Invokes initial callback function with a list of ResizeObserverEntry
     * instances collected from active resize observations.
     *
     * @returns {void}
     */ResizeObserverSPI.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_;var t=this.activeObservations_.map((function(e){return new _Z(e.target,e.broadcastRect())}));this.callback_.call(e,t,e);this.clearActive()}};
/**
     * Clears the collection of active observations.
     *
     * @returns {void}
     */ResizeObserverSPI.prototype.clearActive=function(){this.activeObservations_.splice(0)};
/**
     * Tells whether observer has active observations.
     *
     * @returns {boolean}
     */ResizeObserverSPI.prototype.hasActive=function(){return this.activeObservations_.length>0};return ResizeObserverSPI}();var FZ="undefined"!==typeof WeakMap?new WeakMap:new EZ;var jZ=function(){
/**
     * Creates a new instance of ResizeObserver.
     *
     * @param {ResizeObserverCallback} callback - Callback that is invoked when
     *      dimensions of the observed elements change.
     */
function ResizeObserver(e){if(!(this instanceof ResizeObserver))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var t=DZ.getInstance();var r=new $Z(e,t,this);FZ.set(this,r)}return ResizeObserver}();["observe","unobserve","disconnect"].forEach((function(e){jZ.prototype[e]=function(){var t;return(t=FZ.get(this))[e].apply(t,arguments)}}));var UZ=function(){return"undefined"!==typeof NZ.ResizeObserver?NZ.ResizeObserver:jZ}();var WZ=function(e){__extends$1(HeadingPopupBody,e);function HeadingPopupBody(){return null!==e&&e.apply(this,arguments)||this}HeadingPopupBody.prototype.execCommand=function(e){var t=closest(e.target,"li");this.props.execCommand("heading",{level:Number(t.getAttribute("data-level"))})};HeadingPopupBody.prototype.render=function(){var e=this;return gZ(zZ||(zZ=__makeTemplateObject(["\n      <ul\n        onClick=",'\n        aria-role="menu"\n        aria-label="','"\n      >\n        ','\n        <li data-type="Paragraph" aria-role="menuitem">\n          <div>',"</div>\n        </li>\n      </ul>\n    "],["\n      <ul\n        onClick=",'\n        aria-role="menu"\n        aria-label="','"\n      >\n        ','\n        <li data-type="Paragraph" aria-role="menuitem">\n          <div>',"</div>\n        </li>\n      </ul>\n    "])),(function(t){return e.execCommand(t)}),_Q.get("Headings"),[1,2,3,4,5,6].map((function(e){return gZ(qZ||(qZ=__makeTemplateObject(['\n              <li data-level="','" data-type="Heading" aria-role="menuitem">\n                <',">"," ","</$>\n              </li>\n            "],['\n              <li data-level="','" data-type="Heading" aria-role="menuitem">\n                <',">"," ","</$>\n              </li>\n            "])),e,"h"+e,_Q.get("Heading"),e)})),_Q.get("Paragraph"))};return HeadingPopupBody}(wZ);var qZ,zZ;var VZ=function(e){__extends$1(Tabs,e);function Tabs(){return null!==e&&e.apply(this,arguments)||this}Tabs.prototype.toggleTab=function(e,t){this.props.onClick(e,t)};Tabs.prototype.render=function(){var e=this;return gZ(QZ||(QZ=__makeTemplateObject(['\n      <div class="','" aria-role="tabpanel">\n        ',"\n      </div>\n    "],['\n      <div class="','" aria-role="tabpanel">\n        ',"\n      </div>\n    "])),cls("tabs"),this.props.tabs.map((function(t){var r=t.name,n=t.text;var a=e.props.activeTab===r;return gZ(GZ||(GZ=__makeTemplateObject(['\n            <div\n              class="tab-item','"\n              onClick=','\n              aria-role="tab"\n              aria-label="','"\n              aria-selected="','"\n              tabindex="','"\n            >\n              ',"\n            </div>\n          "],['\n            <div\n              class="tab-item','"\n              onClick=','\n              aria-role="tab"\n              aria-label="','"\n              aria-selected="','"\n              tabindex="','"\n            >\n              ',"\n            </div>\n          "])),a?" active":"",(function(t){return e.toggleTab(t,r)}),_Q.get(n),a?"true":"false",a?"0":"-1",_Q.get(n))})))};return Tabs}(wZ);var GZ,QZ;var XZ="ui";var ZZ=function(e){__extends$1(ImagePopupBody,e);function ImagePopupBody(t){var r=e.call(this,t)||this;r.initialize=function(e){void 0===e&&(e="file");var t=r.refs.url;t.value="";r.refs.altText.value="";r.refs.file.value="";ge(t,"wrong");r.setState({activeTab:e,file:null,fileNameElClassName:""})};r.execCommand=function(){"file"===r.state.activeTab?r.emitAddImageBlob():r.emitAddImage()};r.toggleTab=function(e,t){t!==r.state.activeTab&&r.initialize(t)};r.showFileSelectBox=function(){r.refs.file.click()};r.changeFile=function(e){var t=e.target.files;(null===t||void 0===t?void 0:t.length)&&r.setState({file:t[0]})};r.state={activeTab:"file",file:null,fileNameElClassName:""};r.tabs=[{name:"file",text:"File"},{name:"url",text:"URL"}];return r}ImagePopupBody.prototype.emitAddImageBlob=function(){var e=this;var t=this.refs.file.files;var r=this.refs.altText;var n=" wrong";if(null===t||void 0===t?void 0:t.length){n="";var a=t.item(0);var hookCallback=function(t,n){return e.props.execCommand("addImage",{imageUrl:t,altText:n||r.value})};this.props.eventEmitter.emit("addImageBlobHook",a,hookCallback,XZ)}this.setState({fileNameElClassName:n})};ImagePopupBody.prototype.emitAddImage=function(){var e=this.refs.url;var t=this.refs.altText;var r=e.value;var n=t.value||"image";ge(e,"wrong");r.length?r&&this.props.execCommand("addImage",{imageUrl:r,altText:n}):ve(e,"wrong")};ImagePopupBody.prototype.preventSelectStart=function(e){e.preventDefault()};ImagePopupBody.prototype.updated=function(){this.props.show||this.initialize()};ImagePopupBody.prototype.render=function(){var e=this;var t=this.state,r=t.activeTab,n=t.file,a=t.fileNameElClassName;return gZ(KZ||(KZ=__makeTemplateObject(['\n      <div aria-label="','">\n        <'," tabs="," activeTab="," onClick=",' />\n        <div style="display:','">\n          <label for="toastuiImageUrlInput">','</label>\n          <input\n            id="toastuiImageUrlInput"\n            type="text"\n            ref=','\n          />\n        </div>\n        <div style="display:',';position: relative;">\n          <label for="toastuiImageFileInput">','</label>\n          <span\n            class="',"",'"\n            onClick=',"\n            onSelectstart=","\n          >\n            ",'\n          </span>\n          <button\n            type="button"\n            class="','"\n            onClick=',"\n          >\n            ",'\n          </button>\n          <input\n            id="toastuiImageFileInput"\n            type="file"\n            accept="image/*"\n            onChange=',"\n            ref=",'\n          />\n        </div>\n        <label for="toastuiAltTextInput">','</label>\n        <input\n          id="toastuiAltTextInput"\n          type="text"\n          ref=','\n        />\n        <div class="','">\n          <button type="button" class="','" onClick=',">\n            ",'\n          </button>\n          <button type="button" class="','" onClick=',">\n            ","\n          </button>\n        </div>\n      </div>\n    "],['\n      <div aria-label="','">\n        <'," tabs="," activeTab="," onClick=",' />\n        <div style="display:','">\n          <label for="toastuiImageUrlInput">','</label>\n          <input\n            id="toastuiImageUrlInput"\n            type="text"\n            ref=','\n          />\n        </div>\n        <div style="display:',';position: relative;">\n          <label for="toastuiImageFileInput">','</label>\n          <span\n            class="',"",'"\n            onClick=',"\n            onSelectstart=","\n          >\n            ",'\n          </span>\n          <button\n            type="button"\n            class="','"\n            onClick=',"\n          >\n            ",'\n          </button>\n          <input\n            id="toastuiImageFileInput"\n            type="file"\n            accept="image/*"\n            onChange=',"\n            ref=",'\n          />\n        </div>\n        <label for="toastuiAltTextInput">','</label>\n        <input\n          id="toastuiAltTextInput"\n          type="text"\n          ref=','\n        />\n        <div class="','">\n          <button type="button" class="','" onClick=',">\n            ",'\n          </button>\n          <button type="button" class="','" onClick=',">\n            ","\n          </button>\n        </div>\n      </div>\n    "])),_Q.get("Insert image"),VZ,this.tabs,r,this.toggleTab,"url"===r?"block":"none",_Q.get("Image URL"),(function(t){return e.refs.url=t}),"file"===r?"block":"none",_Q.get("Select image file"),cls("file-name"),n?" has-file":a,this.showFileSelectBox,this.preventSelectStart,n?n.name:_Q.get("No file"),cls("file-select-button"),this.showFileSelectBox,_Q.get("Choose a file"),this.changeFile,(function(t){return e.refs.file=t}),_Q.get("Description"),(function(t){return e.refs.altText=t}),cls("button-container"),cls("close-button"),this.props.hidePopup,_Q.get("Cancel"),cls("ok-button"),this.execCommand,_Q.get("OK"))};return ImagePopupBody}(wZ);var KZ;var YZ=function(e){__extends$1(LinkPopupBody,e);function LinkPopupBody(){var t=null!==e&&e.apply(this,arguments)||this;t.execCommand=function(){var e=t.refs.url;var r=t.refs.text;ge(e,"wrong");ge(r,"wrong");if(e.value.length<1)ve(e,"wrong");else{var n=re(t.props.initialValues.linkUrl);n&&r.value.length<1?ve(r,"wrong"):t.props.execCommand("addLink",{linkUrl:e.value,linkText:r.value})}};return t}LinkPopupBody.prototype.initialize=function(){var e=this.props.initialValues,t=e.linkUrl,r=e.linkText;var n=this.refs.url;var a=this.refs.text;ge(n,"wrong");ge(a,"wrong","disabled");a.removeAttribute("disabled");if(t){ve(a,"disabled");a.setAttribute("disabled","disabled")}n.value=t||"";a.value=r||""};LinkPopupBody.prototype.mounted=function(){this.initialize()};LinkPopupBody.prototype.updated=function(e){!e.show&&this.props.show&&this.initialize()};LinkPopupBody.prototype.render=function(){var e=this;return gZ(JZ||(JZ=__makeTemplateObject(['\n      <div aria-label="','">\n        <label for="toastuiLinkUrlInput">','</label>\n        <input\n          id="toastuiLinkUrlInput"\n          type="text"\n          ref=','\n        />\n        <label for="toastuiLinkTextInput">','</label>\n        <input\n          id="toastuiLinkTextInput"\n          type="text"\n          ref=','\n        />\n        <div class="','">\n          <button type="button" class="','" onClick=',">\n            ",'\n          </button>\n          <button type="button" class="','" onClick=',">\n            ","\n          </button>\n        </div>\n      </div>\n    "],['\n      <div aria-label="','">\n        <label for="toastuiLinkUrlInput">','</label>\n        <input\n          id="toastuiLinkUrlInput"\n          type="text"\n          ref=','\n        />\n        <label for="toastuiLinkTextInput">','</label>\n        <input\n          id="toastuiLinkTextInput"\n          type="text"\n          ref=','\n        />\n        <div class="','">\n          <button type="button" class="','" onClick=',">\n            ",'\n          </button>\n          <button type="button" class="','" onClick=',">\n            ","\n          </button>\n        </div>\n      </div>\n    "])),_Q.get("Insert link"),_Q.get("URL"),(function(t){return e.refs.url=t}),_Q.get("Link text"),(function(t){return e.refs.text=t}),cls("button-container"),cls("close-button"),this.props.hidePopup,_Q.get("Cancel"),cls("ok-button"),this.execCommand,_Q.get("OK"))};return LinkPopupBody}(wZ);var JZ;var eK=20;var tK=20;var rK=5;var nK=14;var aK=5;var oK=9;var iK=1;var sK=1;var lK=1;var uK=function(e){__extends$1(TablePopupBody,e);function TablePopupBody(t){var r=e.call(this,t)||this;r.extendSelectionRange=function(e){var t=e.pageX,n=e.pageY;var a=t-r.offsetRect.left;var o=n-r.offsetRect.top;var i=r.getSelectionRangeByOffset(a,o);r.setState(__assign$1({},i))};r.execCommand=function(){r.props.execCommand("addTable",{rowCount:r.state.rowIdx+1,columnCount:r.state.colIdx+1})};r.state={rowIdx:-1,colIdx:-1};return r}TablePopupBody.prototype.getDescription=function(){return-1===this.state.colIdx?"":this.state.colIdx+1+" x "+(this.state.rowIdx+1)};TablePopupBody.prototype.getBoundByRange=function(e,t){return{width:(e+1)*eK,height:(t+1)*tK}};TablePopupBody.prototype.getRangeByOffset=function(e,t){return{colIdx:Math.floor(e/eK),rowIdx:Math.floor(t/tK)}};TablePopupBody.prototype.getTableRange=function(){var e=this.state,t=e.colIdx,r=e.rowIdx;var n=Math.max(t,aK);var a=Math.max(r,rK);t>=aK&&n<oK&&(n+=1);r>=rK&&a<nK&&(a+=1);return{colIdx:n+1,rowIdx:a+1}};TablePopupBody.prototype.getSelectionAreaBound=function(){var e=this.getBoundByRange(this.state.colIdx,this.state.rowIdx),t=e.width,r=e.height;return t||r?{width:t-lK,height:r-lK,display:"block"}:{display:"none"}};TablePopupBody.prototype.getSelectionRangeByOffset=function(e,t){var r=this.getRangeByOffset(e,t);r.rowIdx=Math.min(Math.max(r.rowIdx,iK),nK);r.colIdx=Math.min(Math.max(r.colIdx,sK),oK);return r};TablePopupBody.prototype.updated=function(){if(this.props.show){if(-1===this.state.colIdx&&-1===this.state.rowIdx){var e=this.refs.tableEl.getBoundingClientRect(),t=e.left,r=e.top;this.offsetRect={left:window.pageXOffset+t,top:window.pageYOffset+r}}}else this.setState({colIdx:-1,rowIdx:-1})};TablePopupBody.prototype.createTableArea=function(e){var t=e.colIdx,r=e.rowIdx;var n=[];for(var a=0;a<r;a+=1){var o=[];for(var i=0;i<t;i+=1){var s=cls("table-cell")+(a>0?"":" header");o.push(gZ(cK||(cK=__makeTemplateObject(['<div class="','"></div>'],['<div class="','"></div>'])),s))}n.push(gZ(dK||(dK=__makeTemplateObject(['<div class="','">',"</div>"],['<div class="','">',"</div>"])),cls("table-row"),o))}return gZ(vK||(vK=__makeTemplateObject(['<div class="','">',"</div>"],['<div class="','">',"</div>"])),cls("table"),n)};TablePopupBody.prototype.render=function(){var e=this;var t=this.getTableRange();var r=this.getSelectionAreaBound();return gZ(pK||(pK=__makeTemplateObject(['\n      <div aria-label="','">\n        <div\n          class="','"\n          ref=',"\n          onMousemove=","\n          onClick=","\n        >\n          ",'\n          <div class="','" style=','></div>\n        </div>\n        <p class="','">',"</p>\n      </div>\n    "],['\n      <div aria-label="','">\n        <div\n          class="','"\n          ref=',"\n          onMousemove=","\n          onClick=","\n        >\n          ",'\n          <div class="','" style=','></div>\n        </div>\n        <p class="','">',"</p>\n      </div>\n    "])),_Q.get("Insert table"),cls("table-selection"),(function(t){return e.refs.tableEl=t}),this.extendSelectionRange,this.execCommand,this.createTableArea(t),cls("table-selection-layer"),r,cls("table-description"),this.getDescription())};return TablePopupBody}(wZ);var cK,dK,vK,pK;var fK=function(e){__extends$1(CustomPopupBody,e);function CustomPopupBody(){return null!==e&&e.apply(this,arguments)||this}CustomPopupBody.prototype.mounted=function(){this.refs.el.appendChild(this.props.body)};CustomPopupBody.prototype.updated=function(e){this.refs.el.replaceChild(this.props.body,e.body)};CustomPopupBody.prototype.render=function(){var e=this;return gZ(hK||(hK=__makeTemplateObject(["<div ref=","></div>"],["<div ref=","></div>"])),(function(t){return e.refs.el=t}))};return CustomPopupBody}(wZ);var hK;function createToolbarItemInfo(e){return q(e)?createDefaultToolbarItemInfo(e):e}function createScrollSyncToolbarItem(){var e=document.createElement("label");var t=document.createElement("input");var r=document.createElement("span");e.className="scroll-sync active";t.type="checkbox";t.checked=true;r.className="switch";var onMounted=function(r){return t.addEventListener("change",(function(t){var n=t.target.checked;n?ve(e,"active"):ge(e,"active");r("toggleScrollSync",{active:n})}))};e.appendChild(t);e.appendChild(r);return{name:"scrollSync",el:e,onMounted:onMounted}}function createDefaultToolbarItemInfo(e){var t;switch(e){case"heading":t={name:"heading",className:"heading",tooltip:_Q.get("Headings"),state:"heading"};break;case"bold":t={name:"bold",className:"bold",command:"bold",tooltip:_Q.get("Bold"),state:"strong"};break;case"italic":t={name:"italic",className:"italic",command:"italic",tooltip:_Q.get("Italic"),state:"emph"};break;case"strike":t={name:"strike",className:"strike",command:"strike",tooltip:_Q.get("Strike"),state:"strike"};break;case"hr":t={name:"hr",className:"hrline",command:"hr",tooltip:_Q.get("Line"),state:"thematicBreak"};break;case"quote":t={name:"quote",className:"quote",command:"blockQuote",tooltip:_Q.get("Blockquote"),state:"blockQuote"};break;case"ul":t={name:"ul",className:"bullet-list",command:"bulletList",tooltip:_Q.get("Unordered list"),state:"bulletList"};break;case"ol":t={name:"ol",className:"ordered-list",command:"orderedList",tooltip:_Q.get("Ordered list"),state:"orderedList"};break;case"task":t={name:"task",className:"task-list",command:"taskList",tooltip:_Q.get("Task"),state:"taskList"};break;case"table":t={name:"table",className:"table",tooltip:_Q.get("Insert table"),state:"table"};break;case"image":t={name:"image",className:"image",tooltip:_Q.get("Insert image")};break;case"link":t={name:"link",className:"link",tooltip:_Q.get("Insert link")};break;case"code":t={name:"code",className:"code",command:"code",tooltip:_Q.get("Code"),state:"code"};break;case"codeblock":t={name:"codeblock",className:"codeblock",command:"codeBlock",tooltip:_Q.get("Insert CodeBlock"),state:"codeBlock"};break;case"indent":t={name:"indent",className:"indent",command:"indent",tooltip:_Q.get("Indent"),state:"indent"};break;case"outdent":t={name:"outdent",className:"outdent",command:"outdent",tooltip:_Q.get("Outdent"),state:"outdent"};break;case"scrollSync":t=createScrollSyncToolbarItem();break;case"more":t={name:"more",className:"more",tooltip:_Q.get("More")};break}"scrollSync"!==t.name&&(t.className+=" "+cls("toolbar-icons"));return t}function createPopupInfo(e,t){var r=t.el,n=t.pos,a=t.popup,o=t.initialValues;switch(e){case"heading":return{render:function(e){return gZ(mK||(mK=__makeTemplateObject(["<"," ..."," />"],["<"," ..."," />"])),WZ,e)},className:cls("popup-add-heading"),fromEl:r,pos:n};case"link":return{render:function(e){return gZ(gK||(gK=__makeTemplateObject(["<"," ..."," />"],["<"," ..."," />"])),YZ,e)},className:cls("popup-add-link"),fromEl:r,pos:n,initialValues:o};case"image":return{render:function(e){return gZ(yK||(yK=__makeTemplateObject(["<"," ..."," />"],["<"," ..."," />"])),ZZ,e)},className:cls("popup-add-image"),fromEl:r,pos:n};case"table":return{render:function(e){return gZ(bK||(bK=__makeTemplateObject(["<"," ..."," />"],["<"," ..."," />"])),uK,e)},className:cls("popup-add-table"),fromEl:r,pos:n};case"customPopupBody":return a?__assign$1({render:function(e){return gZ(wK||(wK=__makeTemplateObject(["<"," ..."," body="," />"],["<"," ..."," body="," />"])),fK,e,a.body)},fromEl:r,pos:n},a):null;default:return null}}function setGroupState(e){e.hidden=e.length===e.filter((function(e){return e.hidden})).length}function groupToolbarItems(e,t){var toggleScrollSyncState=function(e){e.hidden="scrollSync"===e.name&&t;return e};return e.reduce((function(e,t){e.push(t.map((function(e){return toggleScrollSyncState(createToolbarItemInfo(e))})));var r=e[(e.length||1)-1];r&&setGroupState(r);return e}),[])}function toggleScrollSync(e,t){e.forEach((function(e){e.forEach((function(e){return e.hidden="scrollSync"===e.name&&t}));setGroupState(e)}))}var mK,gK,yK,bK,wK;var TK=20;var CK=function(e){__extends$1(Popup,e);function Popup(){var t=null!==e&&e.apply(this,arguments)||this;t.handleMousedown=function(e){closest(e.target,"."+cls("popup"))||closest(e.target,t.props.info.fromEl)||t.props.hidePopup()};return t}Popup.prototype.mounted=function(){document.addEventListener("mousedown",this.handleMousedown);this.props.eventEmitter.listen("closePopup",this.props.hidePopup)};Popup.prototype.beforeDestroy=function(){document.removeEventListener("mousedown",this.handleMousedown)};Popup.prototype.updated=function(e){var t=this.props,r=t.show,n=t.info;if(r&&n.pos&&e.show!==r){var a=__assign$1({},n.pos);var o=this.refs.el.offsetWidth;var i=closest(this.refs.el,"."+cls("toolbar"));var s=i.offsetWidth;a.left+o>=s&&(a.left=s-o-TK);shallowEqual(this.state.popupPos,a)||this.setState({popupPos:a})}};Popup.prototype.render=function(){var e=this;var t=this.props,r=t.info,n=t.show,a=t.hidePopup,o=t.eventEmitter,i=t.execCommand;var s=r||{},l=s.className,u=void 0===l?"":l,d=s.style,v=s.render,p=s.initialValues,f=void 0===p?{}:p;var m=__assign$1(__assign$1({display:n?"block":"none"},d),this.state.popupPos);return gZ(kK||(kK=__makeTemplateObject(['\n      <div\n        class="'," ",'"\n        style=',"\n        ref=",'\n        aria-role="dialog"\n      >\n        <div class="','">\n          ',"\n        </div>\n      </div>\n    "],['\n      <div\n        class="'," ",'"\n        style=',"\n        ref=",'\n        aria-role="dialog"\n      >\n        <div class="','">\n          ',"\n        </div>\n      </div>\n    "])),cls("popup"),u,m,(function(t){return e.refs.el=t}),cls("popup-body"),v&&v({eventEmitter:o,show:n,hidePopup:a,execCommand:i,initialValues:f}))};return Popup}(wZ);var kK;var xK=6;function connectHOC(e){return function(t){__extends$1(ButtonHOC,t);function ButtonHOC(e){var r=t.call(this,e)||this;r.showTooltip=function(e){var t=r.props.item.tooltip;if(!r.props.disabled&&t){var n=r.getBound(e);var a=n.left+xK+"px";var o=n.top+xK+"px";J(r.props.tooltipRef.current,{display:"block",left:a,top:o});r.props.tooltipRef.current.querySelector(".text").textContent=t}};r.hideTooltip=function(){J(r.props.tooltipRef.current,"display","none")};r.state={active:false,disabled:e.disabled};r.addEvent();return r}ButtonHOC.prototype.addEvent=function(){var e=this;var t=this.props,r=t.item,n=t.eventEmitter;r.state&&n.listen("changeToolbarState",(function(t){var n;var a=t.toolbarState;var o=null!==(n=a[r.state])&&void 0!==n?n:{},i=o.active,s=o.disabled;e.setState({active:!!i,disabled:null!==s&&void 0!==s?s:e.props.disabled})}))};ButtonHOC.prototype.getBound=function(e){var t=getTotalOffset(e,closest(e,"."+cls("toolbar"))),r=t.offsetLeft,n=t.offsetTop;return{left:r,top:e.offsetHeight+n}};ButtonHOC.prototype.render=function(){return gZ(MK||(MK=__makeTemplateObject(["\n        <","\n          ...","\n          active=","\n          showTooltip=","\n          hideTooltip=","\n          getBound=","\n          disabled=","\n        />\n      "],["\n        <","\n          ...","\n          active=","\n          showTooltip=","\n          hideTooltip=","\n          getBound=","\n          disabled=","\n        />\n      "])),e,this.props,this.state.active,this.showTooltip,this.hideTooltip,this.getBound,this.state.disabled||this.props.disabled)};return ButtonHOC}(wZ)}var MK;var EK=80;var LK=function(e){__extends$1(ToolbarButtonComp,e);function ToolbarButtonComp(){var t=null!==e&&e.apply(this,arguments)||this;t.showTooltip=function(){t.props.showTooltip(t.refs.el)};t.execCommand=function(){var e=t.props,r=e.item,n=e.execCommand,a=e.setPopupInfo,o=e.getBound,i=e.eventEmitter;var s=r.command,l=r.name,u=r.popup;if(s)n(s);else{var d=u?"customPopupBody":l;var v=i.emit("query","getPopupInitialValues",{popupName:d})[0];var p=createPopupInfo(d,{el:t.refs.el,pos:o(t.refs.el),popup:u,initialValues:v});p&&a(p)}};return t}ToolbarButtonComp.prototype.mounted=function(){this.setItemWidth()};ToolbarButtonComp.prototype.updated=function(e){e.item.name!==this.props.item.name&&this.setItemWidth()};ToolbarButtonComp.prototype.setItemWidth=function(){var e=this.props,t=e.setItemWidth,r=e.item;t&&t(r.name,getOuterWidth(this.refs.el)+(r.hidden?EK:0))};ToolbarButtonComp.prototype.render=function(){var e=this;var t=this.props,r=t.hideTooltip,n=t.disabled,a=t.item,o=t.active;var i=__assign$1({display:a.hidden?"none":null},a.style);var s=(a.className||"")+(o?" active":"");return gZ(IK||(IK=__makeTemplateObject(["\n      <button\n        ref=",'\n        type="button"\n        style=',"\n        class=","\n        onClick=","\n        onMouseover=","\n        onMouseout=","\n        disabled=","\n        aria-label=","\n      >\n        ","\n      </button>\n    "],["\n      <button\n        ref=",'\n        type="button"\n        style=',"\n        class=","\n        onClick=","\n        onMouseover=","\n        onMouseout=","\n        disabled=","\n        aria-label=","\n      >\n        ","\n      </button>\n    "])),(function(t){return e.refs.el=t}),i,s,this.execCommand,this.showTooltip,r,!!n,a.text||a.tooltip||"",a.text||"")};return ToolbarButtonComp}(wZ);var NK=connectHOC(LK);var IK;var SK=function(e){__extends$1(CustomToolbarItemComp,e);function CustomToolbarItemComp(){var t=null!==e&&e.apply(this,arguments)||this;t.showTooltip=function(){t.props.showTooltip(t.refs.el)};t.showPopup=function(){var e=createPopupInfo("customPopupBody",{el:t.refs.el,pos:t.props.getBound(t.refs.el),popup:t.props.item.popup});e&&t.props.setPopupInfo(e)};return t}CustomToolbarItemComp.prototype.mounted=function(){var e=this.props,t=e.setItemWidth,r=e.item;this.refs.el.appendChild(r.el);t&&t(r.name,getOuterWidth(this.refs.el));r.onMounted&&r.onMounted(this.props.execCommand)};CustomToolbarItemComp.prototype.updated=function(e){var t;var r=this.props,n=r.item,a=r.active,o=r.disabled;e.active===a&&e.disabled===o||(null===(t=n.onUpdated)||void 0===t?void 0:t.call(n,{active:a,disabled:o}))};CustomToolbarItemComp.prototype.render=function(){var e=this;var t=this.props,r=t.disabled,n=t.item;var a={display:n.hidden?"none":"inline-block"};var getListener=function(e){return r?null:e};return gZ(AK||(AK=__makeTemplateObject(["\n      <div\n        ref=","\n        style=","\n        class=","\n        onClick=","\n        onMouseover=","\n        onMouseout=","\n      ></div>\n    "],["\n      <div\n        ref=","\n        style=","\n        class=","\n        onClick=","\n        onMouseover=","\n        onMouseout=","\n      ></div>\n    "])),(function(t){return e.refs.el=t}),a,cls("toolbar-item-wrapper"),getListener(this.showPopup),getListener(this.showTooltip),getListener(this.props.hideTooltip))};return CustomToolbarItemComp}(wZ);var OK=connectHOC(SK);var AK;var PK=function(e){__extends$1(ToolbarGroup,e);function ToolbarGroup(){return null!==e&&e.apply(this,arguments)||this}ToolbarGroup.prototype.render=function(){var e=this;var t=this.props,r=t.group,n=t.hiddenDivider;var a=r.hidden?{display:"none"}:null;var o=n?{display:"none"}:null;return gZ(BK||(BK=__makeTemplateObject(['\n      <div class="','" style=',">\n        ",'\n        <div class="','" style=',"></div>\n      </div>\n    "],['\n      <div class="','" style=',">\n        ",'\n        <div class="','" style=',"></div>\n      </div>\n    "])),cls("toolbar-group"),a,r.map((function(t){var r=t.el?OK:NK;return gZ(DK||(DK=__makeTemplateObject(["<"," key="," ..."," item="," />"],["<"," key="," ..."," item="," />"])),r,t.name,e.props,t)})),cls("toolbar-divider"),o)};return ToolbarGroup}(wZ);var DK,BK;var RK=4;var HK=function(e){__extends$1(DropdownToolbarButtonComp,e);function DropdownToolbarButtonComp(t){var r=e.call(this,t)||this;r.handleClickDocument=function(e){var t=e.target;closest(t,"."+cls("dropdown-toolbar"))||closest(t,".more")||r.setState({showDropdown:false,dropdownPos:null})};r.showTooltip=function(){r.props.showTooltip(r.refs.el)};r.state={showDropdown:false,dropdownPos:null};return r}DropdownToolbarButtonComp.prototype.getBound=function(){var e=this.props.getBound(this.refs.el);e.top+=RK;return __assign$1(__assign$1({},e),{left:null,right:10})};DropdownToolbarButtonComp.prototype.mounted=function(){document.addEventListener("click",this.handleClickDocument)};DropdownToolbarButtonComp.prototype.updated=function(){this.state.showDropdown&&!this.state.dropdownPos&&this.setState({dropdownPos:this.getBound()})};DropdownToolbarButtonComp.prototype.beforeDestroy=function(){document.removeEventListener("click",this.handleClickDocument)};DropdownToolbarButtonComp.prototype.render=function(){var e=this;var t=this.state,r=t.showDropdown,n=t.dropdownPos;var a=this.props,o=a.disabled,i=a.item,s=a.items,l=a.hideTooltip;var u=s.filter((function(e){return!e.hidden}));var d=u.length?null:{display:"none"};var v=r?null:{display:"none"};return gZ(FK||(FK=__makeTemplateObject(['\n      <div class="','" style=',">\n        <button\n          ref=",'\n          type="button"\n          class=',"\n          onClick=","\n          onMouseover=","\n          onMouseout=","\n          disabled=",'\n        ></button>\n        <div\n          class="','"\n          style=',"\n          ref=","\n        >\n          ","\n        </div>\n      </div>\n    "],['\n      <div class="','" style=',">\n        <button\n          ref=",'\n          type="button"\n          class=',"\n          onClick=","\n          onMouseover=","\n          onMouseout=","\n          disabled=",'\n        ></button>\n        <div\n          class="','"\n          style=',"\n          ref=","\n        >\n          ","\n        </div>\n      </div>\n    "])),cls("toolbar-group"),d,(function(t){return e.refs.el=t}),i.className,(function(){return e.setState({showDropdown:true})}),this.showTooltip,l,o,cls("dropdown-toolbar"),__assign$1(__assign$1({},v),n),(function(t){return e.refs.dropdownEl=t}),u.length?u.map((function(t,r){var n;return gZ($K||($K=__makeTemplateObject(["\n                  <","\n                    group=","\n                    hiddenDivider=","\n                    ...","\n                  />\n                "],["\n                  <","\n                    group=","\n                    hiddenDivider=","\n                    ...","\n                  />\n                "])),PK,t,r===u.length-1||(null===(n=u[r+1])||void 0===n?void 0:n.hidden),e.props)})):null)};return DropdownToolbarButtonComp}(wZ);var _K=connectHOC(HK);var $K,FK;var jK=50;var UK=function(e){__extends$1(Toolbar,e);function Toolbar(t){var r=e.call(this,t)||this;r.toggleTab=function(e,t){var n=r.props.eventEmitter;if(r.state.activeTab!==t){var a="write"===t?"changePreviewTabWrite":"changePreviewTabPreview";n.emit(a);r.setState({activeTab:t})}};r.setItemWidth=function(e,t){r.itemWidthMap[e]=t};r.setPopupInfo=function(e){r.setState({showPopup:true,popupInfo:e})};r.openPopup=function(e,t){void 0===t&&(t={});var n=r.refs.el.querySelector("."+cls("toolbar-group")+" ."+e);if(n){var a=getTotalOffset(n,closest(n,"."+cls("toolbar"))),o=a.offsetLeft,i=a.offsetTop;var s=createPopupInfo(e,{el:n,pos:{left:o,top:n.offsetHeight+i},initialValues:t});s&&r.setPopupInfo(s)}};r.hidePopup=function(){r.state.showPopup&&r.setState({showPopup:false})};r.execCommand=function(e,t){var n=r.props.eventEmitter;n.emit("command",e,t);r.hidePopup()};r.tabs=[{name:"write",text:"Write"},{name:"preview",text:"Preview"}];r.itemWidthMap={};r.initialItems=groupToolbarItems(t.toolbarItems||[],r.hiddenScrollSync());r.state={items:r.initialItems,dropdownItems:[],showPopup:false,popupInfo:{},activeTab:"write"};r.tooltipRef={current:null};r.resizeObserver=new UZ((function(){return r.handleResize()}));r.addEvent();return r}Toolbar.prototype.insertToolbarItem=function(e,t){var r=e.groupIndex,n=e.itemIndex;var a=this.initialItems[r];t=createToolbarItemInfo(t);a?a.splice(n,0,t):this.initialItems.push([t]);this.setState(this.classifyToolbarItems())};Toolbar.prototype.removeToolbarItem=function(e){var t=this;V(this.initialItems,(function(r){var n=false;V(r,(function(a,o){if(a.name===e){n=true;r.splice(o,1);t.setState(t.classifyToolbarItems());return false}return true}));return!n}))};Toolbar.prototype.addEvent=function(){var e=this;var t=this.props.eventEmitter;this.handleResize=MZ((function(){e.setState({items:e.initialItems,dropdownItems:[]});e.setState(e.classifyToolbarItems())}),200);t.listen("openPopup",this.openPopup)};Toolbar.prototype.appendTooltipToRoot=function(){var e='<div class="'+cls("tooltip")+'" style="display:none">\n        <div class="arrow"></div>\n        <span class="text"></span>\n      </div>';this.tooltipRef.current=createElementWith(e,this.refs.el)};Toolbar.prototype.hiddenScrollSync=function(){return"wysiwyg"===this.props.editorType||"tab"===this.props.previewStyle};Toolbar.prototype.movePrevItemToDropdownToolbar=function(e,t,r,n){var moveItem=function(e){var t=e.pop();t&&n.push(t)};if(e>1)moveItem(r);else{var a=last$1(t);a&&moveItem(a)}};Toolbar.prototype.classifyToolbarItems=function(){var e=this;var t=0;var r=this.refs.el.clientWidth;var n=this.refs.el.querySelector("."+cls("toolbar-divider"));var a=n?getOuterWidth(n):0;var o=[];var i=[];var s=false;this.initialItems.forEach((function(n,l){var u=[];var d=[];n.forEach((function(n,a){if(!n.hidden){t+=e.itemWidthMap[n.name];if(t>r-jK){if(!s){e.movePrevItemToDropdownToolbar(a,o,u,d);s=true}d.push(n)}else u.push(n)}}));if(u.length){setGroupState(u);o.push(u)}if(d.length){setGroupState(d);i.push(d)}l<e.state.items.length-1&&(t+=a)}));return{items:o,dropdownItems:i}};Toolbar.prototype.mounted=function(){"tab"===this.props.previewStyle&&this.props.eventEmitter.emit("changePreviewTabWrite",true);this.setState(this.classifyToolbarItems());this.appendTooltipToRoot();this.resizeObserver.observe(this.refs.el)};Toolbar.prototype.updated=function(e){var t=this.props,r=t.editorType,n=t.previewStyle,a=t.eventEmitter;var o=n!==e.previewStyle;var i=r!==e.editorType;if(o||i){toggleScrollSync(this.initialItems,this.hiddenScrollSync());var s=this.classifyToolbarItems();if(o||"tab"===n&&"markdown"===r){a.emit("changePreviewTabWrite");s.activeTab="write"}this.setState(s)}};Toolbar.prototype.beforeDestroy=function(){window.removeEventListener("resize",this.handleResize);this.resizeObserver.disconnect();removeNode$1(this.tooltipRef.current)};Toolbar.prototype.render=function(){var e=this;var t=this.props,r=t.previewStyle,n=t.eventEmitter,a=t.editorType;var o=this.state,i=o.popupInfo,s=o.showPopup,l=o.activeTab,u=o.items,d=o.dropdownItems;var v={eventEmitter:n,tooltipRef:this.tooltipRef,disabled:"markdown"===a&&"tab"===r&&"preview"===l,execCommand:this.execCommand,setPopupInfo:this.setPopupInfo};var p="tab"===r?{borderTopLeftRadius:0}:null;return gZ(qK||(qK=__makeTemplateObject(['\n      <div class="','">\n        <div\n          class="','"\n          style="display: ','"\n        >\n          <'," tabs="," activeTab="," onClick=",' />\n        </div>\n        <div\n          class="','"\n          ref=',"\n          style=","\n        >\n          ","\n          <","\n            item=","\n            items=","\n            ...","\n          />\n        </div>\n        <","\n          info=","\n          show=","\n          eventEmitter=","\n          hidePopup=","\n          execCommand=","\n        />\n      </div>\n    "],['\n      <div class="','">\n        <div\n          class="','"\n          style="display: ','"\n        >\n          <'," tabs="," activeTab="," onClick=",' />\n        </div>\n        <div\n          class="','"\n          ref=',"\n          style=","\n        >\n          ","\n          <","\n            item=","\n            items=","\n            ...","\n          />\n        </div>\n        <","\n          info=","\n          show=","\n          eventEmitter=","\n          hidePopup=","\n          execCommand=","\n        />\n      </div>\n    "])),cls("toolbar"),cls("md-tab-container"),"wysiwyg"===a||"vertical"===r?"none":"block",VZ,this.tabs,l,this.toggleTab,cls("defaultUI-toolbar"),(function(t){return e.refs.el=t}),p,u.map((function(t,r){var n;return gZ(WK||(WK=__makeTemplateObject(["\n              <","\n                group=","\n                hiddenDivider=","\n                setItemWidth=","\n                ...","\n              />\n            "],["\n              <","\n                group=","\n                hiddenDivider=","\n                setItemWidth=","\n                ...","\n              />\n            "])),PK,t,r===u.length-1||(null===(n=u[r+1])||void 0===n?void 0:n.hidden),e.setItemWidth,v)})),_K,createToolbarItemInfo("more"),d,v,CK,i,s,n,this.hidePopup,this.execCommand)};return Toolbar}(wZ);var WK,qK;var zK=function(e){__extends$1(ContextMenu,e);function ContextMenu(t){var r=e.call(this,t)||this;r.handleClickDocument=function(e){closest(e.target,"."+cls("context-menu"))||r.setState({pos:null})};r.state={pos:null,menuGroups:[]};r.addEvent();return r}ContextMenu.prototype.addEvent=function(){var e=this;this.props.eventEmitter.listen("contextmenu",(function(t){var r=t.pos,n=t.menuGroups;e.setState({pos:r,menuGroups:n})}))};ContextMenu.prototype.mounted=function(){document.addEventListener("click",this.handleClickDocument)};ContextMenu.prototype.beforeDestroy=function(){document.removeEventListener("click",this.handleClickDocument)};ContextMenu.prototype.getMenuGroupElements=function(){var e=this;var t=this.state,r=t.pos,n=t.menuGroups;return r?n.reduce((function(t,r){var n=[];r.forEach((function(t){var r=t.label,a=t.className,o=void 0!==a&&a,i=t.disabled,s=t.onClick;var handleClick=function(){if(!i){s();e.setState({pos:null})}};n.push(gZ(VK||(VK=__makeTemplateObject(["\n                <li\n                  onClick=",'\n                  class="menu-item','"\n                  aria-role="menuitem"\n                >\n                  <span class="','">',"</span>\n                </li>\n              "],["\n                <li\n                  onClick=",'\n                  class="menu-item','"\n                  aria-role="menuitem"\n                >\n                  <span class="','">',"</span>\n                </li>\n              "])),handleClick,i?" disabled":"",o,r))}));t.push(gZ(GK||(GK=__makeTemplateObject(['<ul class="menu-group">\n              ',"\n            </ul>"],['<ul class="menu-group">\n              ',"\n            </ul>"])),n));return t}),[]):[]};ContextMenu.prototype.render=function(){var e=__assign$1({display:this.state.pos?"block":"none"},this.state.pos);return gZ(QK||(QK=__makeTemplateObject(['<div class="','" style=',' aria-role="menu">\n      ',"\n    </div>"],['<div class="','" style=',' aria-role="menu">\n      ',"\n    </div>"])),cls("context-menu"),e,this.getMenuGroupElements())};return ContextMenu}(wZ);var VK,GK,QK;var XK=function(e){__extends$1(Layout,e);function Layout(t){var r=e.call(this,t)||this;r.changeMode=function(e){e!==r.state.editorType&&r.setState({editorType:e})};r.changePreviewStyle=function(e){e!==r.state.previewStyle&&r.setState({previewStyle:e})};r.hide=function(){r.setState({hide:true})};r.show=function(){r.setState({hide:false})};var n=t.editorType,a=t.previewStyle;r.state={editorType:n,previewStyle:a,hide:false};r.addEvent();return r}Layout.prototype.mounted=function(){var e=this.props.slots,t=e.wwEditor,r=e.mdEditor,n=e.mdPreview;this.refs.wwContainer.appendChild(t);this.refs.mdContainer.insertAdjacentElement("afterbegin",r);this.refs.mdContainer.appendChild(n)};Layout.prototype.insertToolbarItem=function(e,t){this.toolbar.insertToolbarItem(e,t)};Layout.prototype.removeToolbarItem=function(e){this.toolbar.removeToolbarItem(e)};Layout.prototype.render=function(){var e=this;var t=this.props,r=t.eventEmitter,n=t.hideModeSwitch,a=t.toolbarItems,o=t.theme;var i=this.state,s=i.hide,l=i.previewStyle,u=i.editorType;var d=s?" hidden":"";var v=cls("markdown"===u?"md-mode":"ww-mode");var p=cls("md")+"-"+l+"-style";var f=cls(["light"!==o,o+" "]);return gZ(KK||(KK=__makeTemplateObject(['\n      <div\n        class="',"","",'"\n        ref=',"\n      >\n        <","\n          ref=","\n          eventEmitter=","\n          previewStyle=","\n          toolbarItems=","\n          editorType=",'\n        />\n        <div\n          class="'," ",'"\n          ref=','\n        >\n          <div class="','">\n            <div\n              class="'," ",'"\n              ref=','\n            >\n              <div class="','"></div>\n            </div>\n            <div\n              class="','"\n              ref=',"\n            />\n          </div>\n        </div>\n        ","\n        <"," eventEmitter="," />\n      </div>\n    "],['\n      <div\n        class="',"","",'"\n        ref=',"\n      >\n        <","\n          ref=","\n          eventEmitter=","\n          previewStyle=","\n          toolbarItems=","\n          editorType=",'\n        />\n        <div\n          class="'," ",'"\n          ref=','\n        >\n          <div class="','">\n            <div\n              class="'," ",'"\n              ref=','\n            >\n              <div class="','"></div>\n            </div>\n            <div\n              class="','"\n              ref=',"\n            />\n          </div>\n        </div>\n        ","\n        <"," eventEmitter="," />\n      </div>\n    "])),f,cls("defaultUI"),d,(function(t){return e.refs.el=t}),UK,(function(t){return e.toolbar=t}),r,l,a,u,cls("main"),v,(function(t){return e.refs.editorSection=t}),cls("main-container"),cls("md-container"),p,(function(t){return e.refs.mdContainer=t}),cls("md-splitter"),cls("ww-container"),(function(t){return e.refs.wwContainer=t}),!n&&gZ(ZK||(ZK=__makeTemplateObject(["<"," eventEmitter="," editorType="," />"],["<"," eventEmitter="," editorType="," />"])),TZ,r,u),zK,r)};Layout.prototype.addEvent=function(){var e=this.props.eventEmitter;e.listen("hide",this.hide);e.listen("show",this.show);e.listen("changeMode",this.changeMode);e.listen("changePreviewStyle",this.changePreviewStyle)};return Layout}(wZ);var ZK,KK;var YK=function(e){__extends$1(ToastUIEditor,e);function ToastUIEditor(t){var r;var n=e.call(this,t)||this;var a;var o=render(n.options.el,gZ(JK||(JK=__makeTemplateObject(["\n        <","\n          ref=","\n          eventEmitter=","\n          slots=","\n          hideModeSwitch=","\n          toolbarItems=","\n          previewStyle=","\n          editorType=","\n          theme=","\n        />\n      "],["\n        <","\n          ref=","\n          eventEmitter=","\n          slots=","\n          hideModeSwitch=","\n          toolbarItems=","\n          previewStyle=","\n          editorType=","\n          theme=","\n        />\n      "])),XK,(function(e){return a=e}),n.eventEmitter,n.getEditorElements(),n.options.hideModeSwitch,n.options.toolbarItems,n.options.previewStyle,n.options.initialEditType,n.options.theme));n.setMinHeight(n.options.minHeight);n.setHeight(n.options.height);n.defaultUI={insertToolbarItem:a.insertToolbarItem.bind(a),removeToolbarItem:a.removeToolbarItem.bind(a),destroy:o};null===(r=n.pluginInfo.toolbarItems)||void 0===r?void 0:r.forEach((function(e){var t=e.groupIndex,r=e.itemIndex,a=e.item;n.defaultUI.insertToolbarItem({groupIndex:t,itemIndex:r},a)}));n.eventEmitter.emit("loadUI",n);return n}
/**
     * Factory method for Editor
     * @param {object} options Option for initialize TUIEditor
     * @returns {object} ToastUIEditor or ToastUIEditorViewer
     */ToastUIEditor.factory=function(e){return e.viewer?new nZ(e):new ToastUIEditor(e)};
/**
     * add toolbar item
     * @param {Object} indexInfo group index and item index of the toolbar item
     * @param {string|Object} item toolbar item
     */ToastUIEditor.prototype.insertToolbarItem=function(e,t){this.defaultUI.insertToolbarItem(e,t)};
/**
     * Remove toolbar item
     * @param {string} itemName toolbar item name
     */ToastUIEditor.prototype.removeToolbarItem=function(e){this.defaultUI.removeToolbarItem(e)};ToastUIEditor.prototype.destroy=function(){e.prototype.destroy.call(this);this.defaultUI.destroy()};return ToastUIEditor}(pZ);var JK;pZ.setLanguage(["en","en-US"],{Markdown:"Markdown",WYSIWYG:"WYSIWYG",Write:"Write",Preview:"Preview",Headings:"Headings",Paragraph:"Paragraph",Bold:"Bold",Italic:"Italic",Strike:"Strike",Code:"Inline code",Line:"Line",Blockquote:"Blockquote","Unordered list":"Unordered list","Ordered list":"Ordered list",Task:"Task",Indent:"Indent",Outdent:"Outdent","Insert link":"Insert link","Insert CodeBlock":"Insert codeBlock","Insert table":"Insert table","Insert image":"Insert image",Heading:"Heading","Image URL":"Image URL","Select image file":"Select image file","Choose a file":"Choose a file","No file":"No file",Description:"Description",OK:"OK",More:"More",Cancel:"Cancel",File:"File",URL:"URL","Link text":"Link text","Add row to up":"Add row to up","Add row to down":"Add row to down","Add column to left":"Add column to left","Add column to right":"Add column to right","Remove row":"Remove row","Remove column":"Remove column","Align column to left":"Align column to left","Align column to center":"Align column to center","Align column to right":"Align column to right","Remove table":"Remove table","Would you like to paste as table?":"Would you like to paste as table?","Text color":"Text color","Auto scroll enabled":"Auto scroll enabled","Auto scroll disabled":"Auto scroll disabled","Choose language":"Choose language"});export{YK as Editor,pZ as EditorCore,YK as default};

